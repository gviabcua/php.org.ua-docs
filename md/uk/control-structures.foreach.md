foreach

-   [« for](control-structures.for.html)
    
-   [break »](control-structures.break.html)
    
-   [PHP Manual](index.html)
    
-   [Управляющие конструкции](language.control-structures.html)
    
-   foreach
    

## foreach

(PHP 4, PHP 5, PHP 7, PHP 8)

Конструкція `foreach` надає простий спосіб перебору масивів . `foreach` працює тільки з масивами та об'єктами, і генеруватиме помилку при спробі використання зі змінними інших типів або неініціалізованими змінними. Існує два види синтаксису:

```
foreach (iterable_expression as $value)
    statement
foreach (iterable_expression as $key => $value)
    statement
```

Перший цикл перебирає масив, що задається за допомогою `iterable_expression`. На кожній ітерації значення поточного елемента надається змінною `$value`

Другий цикл додатково надасть ключ поточного елемента змінної `$key` на кожній ітерації.

Зверніть увагу, що `foreach` не змінює покажчик внутрішнього масиву, який використовується такими функціями, як [current()](function.current.html) і [key()](function.key.html)

можливо [настроить итераторы объектов](language.oop5.iterations.html)

Для того щоб безпосередньо змінювати елементи масиву всередині циклу, змінної `$value` має передувати знак &. У цьому випадку значення буде присвоєно за [ссылке](language.references.html)

```php
<?php
$arr = array(1, 2, 3, 4);
foreach ($arr as &$value) {
    $value = $value * 2;
}
// массив $arr сейчас таков: array(2, 4, 6, 8)
unset($value); // разорвать ссылку на последний элемент
?>
```

**Увага**

Посилання `$value` на останній елемент масиву залишиться після закінчення циклу `foreach`. Рекомендується знищувати її за допомогою [unset()](function.unset.html). В іншому випадку ви можете зіткнутися з такою поведінкою:

```php
<?php
$arr = array(1, 2, 3, 4);
foreach ($arr as &$value) {
    $value = $value * 2;
}
// $arr = array(2, 4, 6, 8)

// Без unset($value), $value всё ещё ссылается на последний элемент: $arr[3]

foreach ($arr as $key => $value) {
    // $arr[3] будет перезаписываться значениями $arr при каждой итерации цикла
    echo "{$key} => {$value} ";
    print_r($arr);
}
// ...И в конце концов предпоследнее значение определит окончательное содержимое $arr[3]

// вывод:
// 0 => 2 Array ( [0] => 2, [1] => 4, [2] => 6, [3] => 2 )
// 1 => 4 Array ( [0] => 2, [1] => 4, [2] => 6, [3] => 4 )
// 2 => 6 Array ( [0] => 2, [1] => 4, [2] => 6, [3] => 6 )
// 3 => 6 Array ( [0] => 2, [1] => 4, [2] => 6, [3] => 6 )
?>
```

Можна перебирати значення постійного масиву за посиланням:

```php
<?php
foreach (array(1, 2, 3, 4) as &$value) {
    $value = $value * 2;
}
?>
```

> **Зауваження**
> 
> Оператор `foreach` не підтримує можливість придушення повідомлень про помилки за допомогою префікса `@`

Ще кілька прикладів, що демонструють використання оператора:

```php
<?php
/* Пример 1: только значение */

$a = array(1, 2, 3, 17);

foreach ($a as $v) {
    echo "Текущее значение переменной \$a: $v.\n";
}

/* Пример 2: значение (для иллюстрации массив выводится в виде значения с ключом) */

$a = array(1, 2, 3, 17);

$i = 0; /* только для пояснения */

foreach ($a as $v) {
    echo "\$a[$i] => $v.\n";
    $i++;
}

/* Пример 3: ключ и значение */

$a = array(
    "one" => 1,
    "two" => 2,
    "three" => 3,
    "seventeen" => 17
);

foreach ($a as $k => $v) {
    echo "\$a[$k] => $v.\n";
}

/* Пример 4: многомерные массивы */
$a = array();
$a[0][0] = "a";
$a[0][1] = "b";
$a[1][0] = "y";
$a[1][1] = "z";

foreach ($a as $v1) {
    foreach ($v1 as $v2) {
        echo "$v2\n";
    }
}

/* Пример 5: динамические массивы */

foreach (array(1, 2, 3, 4, 5) as $v) {
    echo "$v\n";
}
?>
```

### Розпакування вкладених масивів за допомогою list()

(PHP 5> = 5.5.0, PHP 7, PHP 8)

Можна перебрати масив масивів та розпакувати вкладений масив у змінні циклу, передавши [list()](function.list.html) як значення.

Наприклад:

```php
<?php
$array = [
    [1, 2],
    [3, 4],
];

foreach ($array as list($a, $b)) {
    // $a содержит первый элемент вложенного массива,
    // а $b содержит второй элемент.
    echo "A: $a; B: $b\n";
}
?>
```

Результат виконання цього прикладу:

```
A: 1; B: 2
A: 3; B: 4
```

Можна передавати меншу кількість елементів у [list()](function.list.html), чим знаходиться у вкладеному масиві, в цьому випадку значення масиву, що залишилися, будуть проігноровані:

```php
<?php
$array = [
    [1, 2],
    [3, 4],
];

foreach ($array as list($a)) {
    // Обратите внимание на отсутствие $b.
    echo "$a\n";
}
?>
```

Результат виконання цього прикладу:

```
1
3
```

Якщо масив містить недостатньо елементів для заповнення всіх змінних [list()](function.list.html), то буде згенеровано зауваження про помилку:

```php
<?php
$array = [
    [1, 2],
    [3, 4],
];

foreach ($array as list($a, $b, $c)) {
    echo "A: $a; B: $b; C: $c\n";
}
?>
```

Результат виконання цього прикладу:

```
Notice: Undefined offset: 2 in example.php on line 7
A: 1; B: 2; C:

Notice: Undefined offset: 2 in example.php on line 7
A: 3; B: 4; C:
```