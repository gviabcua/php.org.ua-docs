---
navigation:
  - control-structures.for.md: « for
  - control-structures.break.md: break »
  - index.md: PHP Manual
  - language.control-structures.md: Керуючі конструкції
title: foreach
origin_hash: ddf652f5224dc9f1fa9671347921941ca401ea50
---
## foreach

(PHP 4, PHP 5, PHP 7, PHP 8)

Мовна конструкція `foreach` пропонує найпростіший спосіб перебору масивів. Конструкція `foreach` працює тільки з масивами та об'єктами, і буде видавати помилку при спробі використовувати її зі змінними інших типів даних або неініціалізованими змінними. Розробнику доступні два види синтаксису:

```
foreach (iterable_expression as $value)
    statement
foreach (iterable_expression as $key => $value)
    statement
```

Перша форма обходить доступні для перебору дані, задані виразом `iterable_expression`. На кожній ітерації значення поточного елемента надається змінною `$value`

Друга форма додатково присвоюватиме ключ поточного елемента змінної `$key` на кожній ітерації.

Обратите внимание, что конструкция`foreach` не змінює внутрішній покажчик масиву, з яким, наприклад, працюють функції [current()](function.current.md) і [key()](function.key.md)

Разработчику доступна[налаштування ітерації об'єктів](language.oop5.iterations.md)

Щоб безпосередньо змінювати елементи масиву всередині циклу, перед змінною `$value` вказують знак &. Тоді значення буде надано [за посиланням](language.references.md)

```php
<?php

$arr = array(1, 2, 3, 4);
foreach ($arr as &$value) {
    $value = $value * 2;
}
// массив $arr теперь выглядит так: array(2, 4, 6, 8)
unset($value); // разорвать ссылку на последний элемент
?>
```

**Увага**

Посилання змінної `$value` на останній елемент масиву залишиться навіть після закінчення циклу `foreach`. Рекомендовано знищувати її мовною конструкцією [unset()](function.unset.md). В іншому випадку розробник зіткнеться з такою поведінкою:

```php
<?php

$arr = array(1, 2, 3, 4);
foreach ($arr as &$value) {
    $value = $value * 2;
}
// $arr = array(2, 4, 6, 8)

// Без вызова конструкции unset($value), перменная $value всё ещё ссылается на последний элемент: $arr[3]

foreach ($arr as $key => $value) {
    // Значение элемента $arr[3] будет обновляться значениями массива $arr при каждой итерации цикла...
    echo "{$key} => {$value} ";
    print_r($arr);
}
// ...до тех пор, пока предпоследнее значение не будет скопировано в последнее значение

// вывод:
// 0 => 2 Array ( [0] => 2, [1] => 4, [2] => 6, [3] => 2 )
// 1 => 4 Array ( [0] => 2, [1] => 4, [2] => 6, [3] => 4 )
// 2 => 6 Array ( [0] => 2, [1] => 4, [2] => 6, [3] => 6 )
// 3 => 6 Array ( [0] => 2, [1] => 4, [2] => 6, [3] => 6 )
?>
```

Дозволено перебирати значення константного масиву за посиланням:

```php
<?php

foreach (array(1, 2, 3, 4) as &$value) {
    $value = $value * 2;
}
?>
```

> **Зауваження** :
> 
> Мовна конструкція `foreach` не підтримує придушення повідомлень про помилки через оператора `@`

Ще приклади, що показують роботу конструкції:

```php
<?php

/* Пример 1: только значение */

$a = array(1, 2, 3, 17);

foreach ($a as $v) {
    echo "Текущее значение переменной \$a: $v.\n";
}

/* Пример 2: значение (для иллюстрации массив выводится в виде значения с ключом) */

$a = array(1, 2, 3, 17);

$i = 0; /* только для пояснения */

foreach ($a as $v) {
    echo "\$a[$i] => $v.\n";
    $i++;
}

/* Пример 3: ключ и значение */

$a = array(
    "one" => 1,
    "two" => 2,
    "three" => 3,
    "seventeen" => 17
);

foreach ($a as $k => $v) {
    echo "\$a[$k] => $v.\n";
}

/* Пример 4: многомерные массивы */
$a = array();
$a[0][0] = "a";
$a[0][1] = "b";
$a[1][0] = "y";
$a[1][1] = "z";

foreach ($a as $v1) {
    foreach ($v1 as $v2) {
        echo "$v2\n";
    }
}

/* Пример 5: динамические массивы */

foreach (array(1, 2, 3, 4, 5) as $v) {
    echo "$v\n";
}
?>
```

### Розпакування вкладених масивів мовною конструкцією list()

(PHP 5 >= 5.5.0, PHP 7, PHP 8)

Доступний перебір масиву масивів та розпакування вкладеного масиву в змінні циклу шляхом передачі конструкції [list()](function.list.md)в качестве значения.

Например:

```php
<?php

$array = [
    [1, 2],
    [3, 4],
];

foreach ($array as list($a, $b)) {
    // Переменная $a содержит первый элемент вложенного массива,
    // а переменная $b — второй.
    echo "A: $a; B: $b\n";
}
?>
```

Результат виконання наведеного прикладу:

```
A: 1; B: 2
A: 3; B: 4
```

У конструкцію [list()](function.list.md) дозволено передавати меншу кількість елементів, ніж міститься у вкладеному масиві, тоді значення масиву, що залишилися, будуть проігноровані:

```php
<?php

$array = [
    [1, 2],
    [3, 4],
];

foreach ($array as list($a)) {
    // Обратите внимание, переменной $b здесь нет.
    echo "$a\n";
}
?>
```

Результат виконання наведеного прикладу:

```
1
3
```

Якщо масив містить недостатньо елементів для заповнення змінних у конструкції [list()](function.list.md), то буде згенеровано повідомлення про помилку:

```php
<?php

$array = [
    [1, 2],
    [3, 4],
];

foreach ($array as list($a, $b, $c)) {
    echo "A: $a; B: $b; C: $c\n";
}
?>
```

Результат виконання наведеного прикладу:

```
Notice: Undefined offset: 2 in example.php on line 7
A: 1; B: 2; C:

Notice: Undefined offset: 2 in example.php on line 7
A: 3; B: 4; C:
```
