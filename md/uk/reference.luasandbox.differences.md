Відмінності від стандартного Lua

-   [« Типи ресурсів](luasandbox.resources.md)
    
-   [Приклади »](luasandbox.examples.md)
    
-   [PHP Manual](index.md)
    
-   [LuaSandbox](book.luasandbox.md)
    
-   Відмінності від стандартного Lua
    

# Відмінності від стандартного Lua

LuaSandbox надає ізольоване середовище, яке в деяких відносинах відрізняється від стандартного Lua 5.1.

### Функції, які недоступні

-   `dofile()` `loadfile()` та пакет `io`оскільки вони дозволяють прямий доступ до файлової системи. При необхідності доступ до файлової системи повинен здійснюватися через callback-функції PHP.
    
-   Пакет `package`, включаючи `require()` і `module()`, оскільки він залежить від прямого доступу до файлової системі. Замість нього можна використовувати перезапис на чистому Lua, такий як той, що використовується в модулі MediaWiki Scribunto.
    
-   `load()` і `loadstring()`для статичного аналізу коду Lua.
    
-   `print()`, оскільки функція виводить стандартний висновок. При необхідності висновок повинен виконуватись через callback-функції PHP.
    
-   Більшість пакету `os`оскільки він дозволяє керувати процесом і виконувати інші процеси.
    
    -   `os.clock()` `os.date()` `os.difftime()` і `os.time()` залишаються доступними.
-   Більшість пакету `debug`оскільки він дозволяє маніпулювати станом Lua та метаданими способами, які можуть порушити пісочницю.
    
    -   `debug.traceback()` залишається доступним.
-   `string.dump()`оскільки це може розкрити внутрішні дані.
    
-   `collectgarbage()` `gcinfo()` та пакет `coroutine` не було перевірено на безпеку.
    

### Змінені функції

-   `pcall()` і `xpcall()` неспроможна відловити певні помилки, особливо помилки часу очікування.
    
-   `tostring()` не включає адреси вказівників.
    
-   `string.match()` була виправлена ​​для обмеження глибини рекурсії та періодичної перевірки часу очікування.
    
-   `math.random()` і `math.randomseed()` замінюються версіями, які не поділяють стан із функцією PHP `rand()`
    
-   Метаметоди `__pairs` і `__ipairs` Lua 5.2 підтримуються за допомогою `pairs()` і `ipairs()`