---
navigation:
  - function.db2-lob-read.html: « db2lobread
  - function.db2-num-fields.html: db2numfields »
  - index.md: PHP Manual
  - ref.ibm-db2.html: Функції IBM DB2
title: db2nextresult
---
# db2nextresult

(PECL ibmdb2> = 1.0.0)

db2nextresult — Запитує наступний набір результатів із процедури, що зберігається.

### Опис

```methodsynopsis
db2_next_result(resource $stmt): resource
```

Ця процедура може повертати нуль або більше наборів результатів. Хоча ви обробляєте перший набір результатів так само, як і результати, що повертаються простим оператором SELECT, для отримання другого та наступних наборів результатів із процедури, що зберігається, ви повинні викликати функцію **db2nextresult()** та повернути результат у змінну PHP з унікальним ім'ям.

### Список параметрів

`stmt`

Підготовлений оператор, який повертається функцією [db2exec()](function.db2-exec.html) або [db2execute()](function.db2-execute.md)

### Значення, що повертаються

Повертає новий ресурс оператора, що містить наступний набір результатів, якщо процедура, що зберігається, повернула інший набір результатів. Повертає **`false`**, якщо процедура, що зберігається, не повернула інший набір результатів.

### Приклади

**Приклад #1 Виклик процедури, що зберігається, повертає кілька наборів результатів**

У наступному прикладі викликається процедура, що зберігається, яка повертає три набори результатів. Перший набір результатів витягується безпосередньо з того ж ресурсу операторів, для якого викликається оператор CALL, а другий та третій набори результатів вилучаються з ресурсів операторів, що повертаються викликами функції **db2nextresult()**

```php
<?php
$conn = db2_connect($database, $user, $password);

if ($conn) {
  $stmt = db2_exec($conn, 'CALL multiResults()');

  print "Получение первого набора результатов\n";
  while ($row = db2_fetch_array($stmt)) {
    var_dump($row);
  }

  print "\nПолучение второго набора результатов\n";
  $res = db2_next_result($stmt);
  if ($res) {
    while ($row = db2_fetch_array($res)) {
      var_dump($row);
    }
  }

  print "\nПолучение третьего набора результатов\n";
  $res2 = db2_next_result($stmt);
  if ($res2) {
    while ($row = db2_fetch_array($res2)) {
      var_dump($row);
    }
  }

  db2_close($conn);
}
?>
```

Результат виконання цього прикладу:

```
Получение первого набора результатов
array(2) {
  [0]=>
  string(16) "Bubbles         "
  [1]=>
  int(3)
}
array(2) {
  [0]=>
  string(16) "Gizmo           "
  [1]=>
  int(4)
}

Получение второго набора результатов
array(4) {
  [0]=>
  string(16) "Sweater         "
  [1]=>
  int(6)
  [2]=>
  string(5) "llama"
  [3]=>
  string(6) "150.00"
}
array(4) {
  [0]=>
  string(16) "Smarty          "
  [1]=>
  int(2)
  [2]=>
  string(5) "horse"
  [3]=>
  string(6) "350.00"
}

Получение третьего набора результатов
array(1) {
  [0]=>
  string(16) "Bubbles         "
}
array(1) {
  [0]=>
  string(16) "Gizmo           "
}
```
