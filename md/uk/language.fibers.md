---
navigation:
  - language.exceptions.extending.md: « Спадкування винятків
  - language.generators.md: Генератори »
  - index.md: PHP Manual
  - langref.md: Довідник мови
title: Fibers
origin_hash: ddf652f5224dc9f1fa9671347921941ca401ea50
---
# Fibers

### Огляд файберів

(PHP 8 >= 8.1.0)

Файбери є перериваються функції повного циклу. Файбери можуть бути припинені з будь-якого місця циклу, припиняючи виконання у файбері доти, доки файбер не буде відновлено в майбутньому.

Файбери призупиняють весь цикл виконання, тому функцію, що викликає, безпосередньо не потрібно змінювати спосіб її виклику.

Виконання може бути перервано у будь-якому місці циклу за допомогою методу [Fiber::suspend()](fiber.suspend.md) (тобто виклик [Fiber::suspend()](fiber.suspend.md) може перебувати у глибоко вкладеної функції або навіть взагалі не існувати).

На відміну від генераторів ([Generator](class.generator.md)) без стека, у кожного об'єкта [Fiber](class.fiber.md) є свій власний стек викликів, що дозволяє призупиняти їх усередині глибоко вкладених функцій викликів. Функція, яка оголошує точку переривання (тобто виклик методу [Fiber::suspend()](fiber.suspend.md)), не повинна змінювати свій тип, що повертається, на відміну від функції, що використовує [yield](language.generators.syntax.md#control-structures.yield), який має повертати екземпляр [Generator](class.generator.md)

Файбери можуть бути призупинені під час виклику будь-якої функції, включаючи ті, що викликаються з віртуальної машини PHP, наприклад, функції, що надаються [array\_map()](function.array-map.md), або методи, що викликаються [foreach](control-structures.foreach.md) для об'єкту [Iterator](class.iterator.md)

Після припинення виконання файбера може бути відновлено з будь-яким значенням за допомогою методу [Fiber::resume()](fiber.resume.md) або шляхом передачі виключення у файбер за допомогою [Fiber::throw()](fiber.throw.md). Значення повертається (або викидається виняток) з методу [Fiber::suspend()](fiber.suspend.md)

> **Зауваження**: Через поточні обмеження неможливо переключати файбер у деструкторі об'єкта.

**Приклад #1 Простий приклад**

```php
<?php
$fiber = new Fiber(function (): void {
   $value = Fiber::suspend('fiber');
   echo "Значение возобновлённого файбера: ", $value, PHP_EOL;
});

$value = $fiber->start();

echo "Значение приостановленного файбера: ", $value, PHP_EOL;

$fiber->resume('test');
?>
```

Результат виконання наведеного прикладу:

```
Значение приостановленного файбера: fiber
Значение возобновлённого файбера: test
```
