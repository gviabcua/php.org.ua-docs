Використання PHP

-   [« Проблемы сборки](faq.build.html)
    
-   [Хеширование паролей »](faq.passwords.html)
    
-   [PHP Manual](index.html)
    
-   [ЧАВО](faq.html)
    
-   Використання PHP
    

# Використання PHP

У цьому розділі зібрано безліч загальних помилок, які можуть зустрітися при написанні PHP-скриптів.

1.  [Я не можу запам'ятати порядок аргументів PHP-функцій, що вони, випадкові?](#faq.using.parameterorder)
2.  [Я хочу написати загальний PHP-скрипт, який може обробляти дані, що надходять з будь-якої форми. Як дізнатися які змінні методи POST доступні?](#faq.using.anyform)
3.  [Мені треба перетворити всі одиночні лапки (') у зворотний сліш з наступною одиночною лапкою ('). Як я можу це зробити за допомогою регулярного вираження? Я також хотів би перетворити " на " и в](#faq.using.addslashes)
4.  [Коли я роблю таке, висновок друкується не так: Що відбувається?](#faq.using.wrong-order)
5.  [Гей, що сталося з моїми рядками?](#faq.using.newlines)
6.  [Я получаю сообщение 'Warning: Cannot send session cookie - headers already sent...' или 'Cannot add header information - headers already sent...'.](#faq.using.headers-sent)
7.  [Мені потрібний прямий доступ до інформації в заголовку запиту. Як я можу це зробити?](#faq.using.header)
8.  [Коли я намагаюся використати аутентифікацію з IIS, я отримую 'No Input file specified'.](#faq.using.authentication)
9.  [Windows: Я не маю доступу до файлів, що поділяються з іншим комп'ютером, за IIS.](#faq.using.iis.sharing)
10.  [Як я повинен поєднувати XML та PHP? Він скаржиться на мої](#faq.using.mixml)
[](#faq.using.mixml)12.  [](#faq.using.mixml)[Где я могу найти полный список переменных, доступных мне в PHP?](#faq.using.variables)
13.  [Як я можу генерувати PDF-файли без використання платних або комерційних бібліотек, як PDFLib? Я хотів би щось безкоштовне і не потребує зовнішніх бібліотек PDF.](#faq.using.freepdf)
14.  [Декілька PHP директив можуть приймати скорочення для байтових значень на відміну від тільки int байтових значень. Якими є всі доступні скорочення?](#faq.using.shorthandbytes)

**Я не можу запам'ятати порядок аргументів PHP-функцій, що вони, випадкові?**

PHP – це клей, який скріплює разом сотні різних зовнішніх бібліотек, тому іноді це здається досить заплутаним. Проте, загальне правило таке:

Параметри [функцій роботи з масивами](book.array.html) упорядковані у вигляді "*голка (needle), сіно (haystack)*", тоді як порядок у [рядкових функціях](book.strings.html) зворотний, тобто аналогічний "*сіно, голка*".

**Я хочу написати загальний PHP-скрипт, який може обробляти дані, що надходять з будь-якої форми. Як дізнатися які змінні методи POST доступні?**

PHP пропонує безліч [предопределённых переменных](language.variables.predefined.html), таких як суперглобальна $POST. Ви можете пройтись по [POST](reserved.variables.post.html) так як це асоціативний масив усіх значень, які з POST. Для прикладу, давайте просто пройдемося по них з [foreach](control-structures.foreach.html), перевіримо на порожні ([empty()](function.empty.html)) значення та роздрукуємо.

```php
<?php
$empty = $post = array();
foreach ($_POST as $varname => $varvalue) {
    if (empty($varvalue)) {
        $empty[$varname] = $varvalue;
    } else {
        $post[$varname] = $varvalue;
    }
}

print "<pre>";
if (empty($empty)) {
    print "В POST не было пустых значений, вот что там было:\n";
    var_dump($post);
} else {
    print "Пришло " . count($empty) . " пустых значений\n";
    print "Всего отправлено:\n"; var_dump($post);
    print "Пустых:\n"; var_dump($empty);
    exit;
}
?>
```

**Мені треба перетворити всі одиночні лапки (') у зворотний сліш з наступною одиночною лапкою ('). Як я можу це зробити за допомогою регулярного виразу? Я також хотів би перетворити " на "і в**

Маючи на увазі, що ви хочете використовувати результат перетворення в роботі з базою даних, використовуйте відповідний механізм екранування, що йде з базою даних, що використовується. Наприклад, використовуйте [mysqlrealescapestring()](function.mysql-real-escape-string.html) з MySQL та [пгescapestring()](function.pg-escape-string.html) з PostgreSQL. Є також загальніші функції [addslashes()](function.addslashes.html) і [stripslashes()](function.stripslashes.html)Вони часто зустрічаються в старому PHP-коді.

\*\*Коли я роблю таке, висновок друкується не в тому порядку:

```php
<?php
function myfunc($argument)
{
    echo $argument + 10;
}
$variable = 10;
echo "myfunc($variable) = " . myfunc($variable);
?>
```

Що відбувається?\*\*

Для того, щоб використовувати результат вашої функції у виразі (такому як з'єднання з іншими рядками, як у наведеному вище прикладі), вам необхідно повернути значення за допомогою [return](function.return.html), а не виводити його через [echo](function.echo.html)

\*\*Гей, що сталося з моїми рядками?

```php
<pre>
<?php echo "Это должно быть на первой строке."; ?>
<?php echo "А это должно быть на следующей строке."; ?>
</pre>
```

У PHP блок коду завершується або з "?>", або з "?>n" (де n означає "новий рядок"). У наведеному прикладі пропозиції виведуть на одному рядку, так як PHP опускає символ нового рядка після завершення блоку. Це означає, що вам необхідно вставити додатковий символ нового рядка після кожного блоку PHP-коду, щоб висновок продовжувався з нового рядка.

Чому PHP робить це? Тому що при форматуванні звичайного HTML це, зазвичай, спрощує ваше життя коли вам не потрібний цей новий рядок і вам не треба створювати неймовірно довгі рядки для того, щоб зробити вихідний сторінки читаним.

**Я отримую повідомлення 'Warning: Cannot send session cookie - headers already sent...' або 'Cannot add header information - headers already sent...'.**

функцій [header()](function.header.html) [setcookie()](function.setcookie.html), і [функциям сессии](ref.session.html) потрібно додати заголовки до вихідного потоку, але заголовки можуть бути надіслані лише перед іншим вмістом. Перед використанням цих функцій не можна нічого виводити, зокрема HTML. Функція [headerssent()](function.headers-sent.html) перевірить, якщо ваш скрипт уже надіслав заголовки; також дивіться [функции управления выводом](ref.outcontrol.html)

**Мені потрібний прямий доступ до інформації в заголовку запиту. Як я можу це зробити?**

Це робить функцію [getallheaders()](function.getallheaders.html)якщо ви запускаєте PHP як модуль Apache. Так, наступний шматок коду покаже вам усі заголовки запиту:

```php
<?php
$headers = getallheaders();
foreach ($headers as $name => $content) {
    echo "headers[$name] = $content<br />\n";
}
?>
```

Також дивіться [apachelookupuri()](function.apache-lookup-uri.html) [apacheresponseheaders()](function.apache-response-headers.html) і [fsockopen()](function.fsockopen.html)

**Коли я намагаюся використати аутентифікацію з IIS, я отримую 'No Input file specified'.**

Це нестача моделі безпеки IIS. Проблема загальна для всіх програм CGI, що виконуються під IIS. Щоб уникнути проблеми, створіть простий HTML файл (необроблений PHP) як вхідну сторінку в автентифікованій директорії. Потім використовуйте тег META для перенаправлення на PHP сторінку або помістіть посилання, що вказує на PHP сторінку. Після цього PHP розпізнає автентифікацію правильно. Це не повинно вплинути на інші веб-сервери NT. Для додаткової інформації дивіться: [» http://support.microsoft.com/kb/q160422/](http://support.microsoft.com/kb/q160422/) та розділ керівництва [HTTP Аутентифікація](features.http-auth.html)

**Windows: Я не маю доступу до файлів, що поділяються з іншим комп'ютером, за IIS.**

Вам необхідно внести зміни. Ідіть у `Internet Information Services`. Знайдіть ваш PHP файл і перейдіть до його властивостей. Ідіть у закладку `File Security` `Edit -> Anonymous access and authentication control`

Ви можете виправити проблему або знявши позначку з `Anonymous Access` і залишивши зазначеним `Integrated Window Authentication`, або відзначивши `Anonymous Access` і відредагувати права користувача, оскільки він може бути прав.

**Як я повинен поєднувати XML та PHP? Він скаржиться на мої**

\*\*

Для того, щоб вбудувати `. По умолчанию эта директива включена (`On\`).

**Де я можу знайти повний список змінних, доступних у PHP?**

Читайте сторінку посібника з [предопределённым переменным](language.variables.predefined.html), оскільки вона містить частковий список певних змінних, доступних вашому скрипту. Повний список доступних змінних (і безліч іншої інформації) можна побачити, викликавши функцію [phpinfo()](function.phpinfo.html). Не забудьте прочитати розділ посібника з [переменным, лежащим вне PHP](language.variables.external.html) оскільки він описує загальні сценарії для зовнішніх змінних, таких як HTML форма, куки та URL.

**Як я можу генерувати PDF-файли без використання платних або комерційних бібліотек, як PDFLib? Я б хотів щось безкоштовне і не потребує зовнішніх бібліотек PDF.**

Є кілька альтернатив, написаних на PHP, таких як [» FPDF](http://www.fpdf.org/) і [» TCPDF](http://www.tcpdf.org/)

**Декілька PHP директив можуть приймати скорочення для байтових значень на відміну від тільки int байтових значень. Якими є всі доступні скорочення?**

Доступні опції: K (для кілобайт), M (для мегабайт) та G (для гігабайт); вони реєстронезалежні. Все інше вважається байтами . `1M` одно одному мегабайту або `1048576` байтам . `1K` дорівнює одному кілобайту або `1024` байтам. Ці скорочення ви можете використовувати в php.ini та функції [iniset()](function.ini-set.html). Зверніть увагу, що числове значення наводиться типу int; наприклад, `0.5M` інтерпретується як `0`

> **Зауваження** **кілобайт та кібібайт**
> 
> У нотації PHP один кілобайт дорівнює 1024 байтам, тоді як стандарт IEC вважає це за кібібайт. У результаті: k і K = 1024 байти.

\*\*