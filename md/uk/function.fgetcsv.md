Читає рядок з файлу та проводить розбір даних CSV

-   [« fgetc](function.fgetc.html)
    
-   [fgets »](function.fgets.html)
    
-   [PHP Manual](index.html)
    
-   [Функції файлової системи](ref.filesystem.html)
    
-   Читає рядок з файлу та проводить розбір даних CSV
    

# fgetcsv

(PHP 4, PHP 5, PHP 7, PHP 8)

fgetcsv — Читає рядок із файлу та проводить розбір даних CSV

### Опис

```methodsynopsis
fgetcsv(    resource $stream,    ?int $length = null,    string $separator = ",",    string $enclosure = "\"",    string $escape = "\\"): array|false
```

Ця функція схожа на функцію [fgets()](function.fgets.html), з тією різницею, що вона здійснює аналіз рядка на наявність записів у форматі CSV і повертає знайдені поля як масив.

> **Зауваження**
> 
> Ця функція враховує налаштування локалі. Наприклад, якщо `LANG` встановлена ​​в `en_US.UTF-8`, то файли в однобайтовому кодуванні будуть неправильно прочитані цією функцією.

### Список параметрів

`stream`

Коректний файловий покажчик на файл, успішно відкритий за допомогою [fopen()](function.fopen.html) [popen()](function.popen.html) або [fsockopen()](function.fsockopen.html)

`length`

Повинний бути більшим за найдовший рядок (у символах), знайдений у CSV-файлі (включаючи завершальний символ кінця рядка). В іншому випадку, рядок буде розбитий на шматки довжиною в `length` символів, якщо місце розриву нічого очікувати всередині обмежувачів полів (enclosure).

Відсутність цього параметра (або встановлення його в 0 або \*\*`null`\*\*починаючи з PHP 8.0.0) призведе до того, що довжина рядка буде не обмежена. Це може зашкодити швидкості виконання.

`separator`

Необов'язковий параметр `separator` встановлює роздільник поля (лише один однобайтовий символ).

`enclosure`

Необов'язковий параметр `enclosure` встановлює символ обмежувача поля (лише один однобайтовий символ).

`escape`

Необов'язковий параметр `escape` встановлює екрануючий символ (не більше одного однобайтового символу). Порожня стрічка (`""`) відключає пропрієтарний механізм екранування.

> **Зауваження**: Зазвичай символ `enclosure` екранується всередині поля шляхом його подвоювання; однак, символ `escape` як альтернатива. Тому значення за промовчанням цих параметрів `""` і `\"` мають однакове значення. Крім дозволу екранувати символ `enclosure` символ `escape` немає особливого сенсу; він навіть не призначений для самого екранування.

### Значення, що повертаються

Повертає індексований масив із прочитаними полями у разі успішного виконання або **`false`** у разі виникнення помилки.

> **Зауваження**
> 
> Порожній рядок CSV-файлу буде повернуто як масив, що містить єдиний елемент null, помилки в даному випадку не виникне.

> **Зауваження**: Якщо у вас виникають проблеми з розпізнаванням PHP кінців рядків при читанні або створенні файлів на Macintosh-сумісному комп'ютері, увімкнення опції [autodetectlineendings](filesystem.configuration.html#ini.auto-detect-line-endings) може допомогти вирішити проблему.

### список змін

| Версия | Описание |
| --- | --- |
|  | Параметр `length` тепер припускає значення **`null`** |
|  | Тепер параметр `escape` може приймати порожній рядок для вимкнення пропрієтарного механізму екранування. |

### Приклади

**Приклад #1 Читання та виведення на екран вмісту файлу CSV**

```php
<?php
$row = 1;
if (($handle = fopen("test.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $num = count($data);
        echo "<p> $num полей в строке $row: <br /></p>\n";
        $row++;
        for ($c=0; $c < $num; $c++) {
            echo $data[$c] . "<br />\n";
        }
    }
    fclose($handle);
}
?>
```

### Дивіться також

-   [strgetcsv()](function.str-getcsv.html) - Розбирає CSV-рядки в масив
-   [explode()](function.explode.html) - Розбиває рядок за допомогою роздільника
-   [file()](function.file.html) - Читає вміст файлу та поміщає його в масив
-   [pack()](function.pack.html) - Упакувати дані у бінарний рядок
-   [fputcsv()](function.fputcsv.html) - Форматує рядок у вигляді CSV і записує його у файловий покажчик