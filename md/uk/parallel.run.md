---
navigation:
  - parallel.bootstrap.md: « parallelbootstrap
  - class.parallel-runtime.html: parallelRuntime »
  - index.md: PHP Manual
  - functional.parallel.md: Функціональний API
title: parallelrun
---
# parallelrun

parallelrun - Виконання

### Опис

```methodsynopsis
parallel\run(Closure $task): ?Future
```

Планує `task` для виконання в parallel.

```methodsynopsis
parallel\run(Closure $task, array $argv): ?Future
```

Планує `task` для виконання в parallel, передаючи `argv` під час виконання.

### Автоматичне планування

Якщо **parallelRuntime** внутрішньо створений та кешований попереднім викликом **parallelrun()** не діє, він буде використовуватися для виконання завдання. Якщо жоден **parallelRuntime** не діє, parallel створить і збереже в кеш **parallelRuntime**

> **Зауваження**
> 
> Об'єкти **parallelRuntime**створені програмістом, не використовуються для автоматичного планування.

### Список параметрів

`task`

Замикання ([Closure](class.closure.md)) зі специфічними характеристиками.

`argv`

Масив (array) аргументів із конкретними характеристиками, які будуть передані `task` під час виконання.

### Характеристики задачі

Замикання, заплановані для паралельного виконання, не повинні:

-   приймати або повертати значення за посиланням
-   приймати або повертати внутрішні об'єкти (див. примітки)
-   виконувати обмежений набір інструкцій

У замиканнях, призначених для паралельного виконання, заборонено такі інструкції:

-   yield
-   use by-reference
-   declare class
-   declare named function

> **Зауваження**
> 
> Вкладені замикання можуть використовувати yield або передачу значення посилання, але не повинні містити оголошення класів або іменованих функцій.

> **Зауваження**
> 
> Жодні інструкції не заборонені у файлах, які можуть включати завдання.

### Аргументи характеристик

Аргументи не повинні:

-   містити посилання
-   утримувати ресурси
-   містити внутрішні об'єкти (дивіться примітки)

> **Зауваження**
> 
> У разі ресурсів файлового потоку ресурс буде перетворено на файловий дескриптор і передано як ціле число (int), де це можливо, не підтримується у Windows.

### Примітки до внутрішніх об'єктів

Внутрішні об'єкти зазвичай використовують структуру, що налаштовується, яку не можна безпечно скопіювати за значенням, в PHP в даний час відсутній механізм для цього (без серіалізації), і тому можуть використовуватися тільки об'єкти, які не використовують структуру, що налаштовується.

Деякі внутрішні об'єкти не використовують структуру, що настроюється, наприклад, [parallelEventsEvent](class.parallel-events-event.html) і тому можуть використовуватись спільно.

Замикання - це особливий вид внутрішнього об'єкта, який підтримує копіювання за значенням, тому може використовуватись спільно.

Канали відіграють ключову роль у написанні паралельного коду і за потреби підтримують одночасний доступ і виконання, тому можуть використовуватися спільно.

**Увага**

Користувальницький клас, що розширює внутрішній клас, може використовувати структуру, що налаштовується, визначену внутрішнім класом, і в цьому випадку вони не можуть бути безпечно скопійовані за значенням і тому не можуть використовуватися спільно.

### Значення, що повертаються

**Увага**

Не можна ігнорувати повертається [parallelFuture](class.parallel-future.html)якщо завдання містить оператор return або throw.

### Винятки

**Увага**

Викидає parallelRuntimeErrorClosed, якщо [parallelRuntime](class.parallel-runtime.html) було закрито.

**Увага**

Викидає parallelRuntimeErrorIlegallegalfunction, якщо `task` є замиканням, створеним із внутрішньої функції.

**Увага**

Викидає parallelRuntimeErrorIlegallegalінструкції, якщо `task` містить неприпустимі інструкції.

**Увага**

Викидає parallelRuntimeErrorIlegalкомп'ютер, якщо `task` приймає або `argv` містить неприпустимі змінні.

**Увага**

Викидає parallelRuntimeErrorIllegalReturn, якщо `task` повертається некоректно.

### Дивіться також

-   [parallelRuntime::run](parallel-runtime.run.html)
