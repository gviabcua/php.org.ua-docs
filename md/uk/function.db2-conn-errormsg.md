Повертає останнє повідомлення про помилку підключення та значення SQLCODE

-   [« db2connerror](function.db2-conn-error.html)
    
-   [db2connect »](function.db2-connect.html)
    
-   [PHP Manual](index.md)
    
-   [Функції IBM DB2](ref.ibm-db2.html)
    
-   Повертає останнє повідомлення про помилку підключення та значення SQLCODE
    

# db2connerrormsg

(PECL ibmdb2> = 1.0.0)

db2connerrormsg — Повертає останнє повідомлення про помилку підключення та значення SQLCODE

### Опис

```methodsynopsis
db2_conn_errormsg(resource $connection = ?): string
```

Повертає повідомлення про помилку та значення SQLCODE, що становить причину, через яку остання спроба підключення до бази даних завершилася невдачею. Оскільки [db2connect()](function.db2-connect.html) повертає **`false`** у разі невдалої спроби підключення, не потрібно передавати жодних параметрів у **db2connerrormsg()** для отримання відповідного повідомлення про помилку та значення SQLCODE.

Однак, якщо з'єднання було успішним, але згодом стало недійсним, можна передати параметр `connection`, щоб отримати відповідне повідомлення про помилку та значення SQLCODE для конкретного з'єднання.

### Список параметрів

`connection`

Ресурс підключення, пов'язаний із підключенням, яке спочатку було успішним, але згодом стало недійсним.

### Значення, що повертаються

Повертає рядок, що містить повідомлення про помилку та значення SQLCODE, отримане внаслідок невдалої спроби підключення. Якщо під час останньої спроби підключення помилок не виникло, **db2connerrormsg()** повертає порожній рядок.

### Приклади

**Приклад #1 Отримання повідомлення про помилку, повернутий у разі невдалої спроби підключення**

У цьому прикладі показано, як повернути повідомлення про помилку та значення SQLCODE після навмисної передачі неприпустимих параметрів [db2connect()](function.db2-connect.html)

```php
<?php
$conn = db2_connect('badname', 'baduser', 'badpassword');
if (!$conn) {
    print db2_conn_errormsg();
}
?>
```

Результат виконання цього прикладу:

```
[IBM][CLI Driver] SQL1013N  The database alias name
or database name "BADNAME" could not be found.  SQLSTATE=42705
 SQLCODE=-1013
```

### Дивіться також

-   [db2connerror()](function.db2-conn-error.html) - Повертає рядок, що містить значення SQLSTATE, повернене останньою спробою підключення
-   [db2connect()](function.db2-connect.html) - Повертає з'єднання з базою даних
-   [db2stmterror()](function.db2-stmt-error.html) - Повертає рядок, що містить SQLSTATE, повернутий SQL-оператором
-   [db2stmterrormsg()](function.db2-stmt-errormsg.html) - Повертає рядок, що містить останнє повідомлення про помилку SQL-виразу