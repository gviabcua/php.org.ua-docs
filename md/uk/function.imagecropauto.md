---
navigation:
  - function.imagecrop.md: « imagecrop
  - function.imagedashedline.md: imagedashedline »
  - index.md: PHP Manual
  - ref.image.md: Функції GD та функції для роботи із зображеннями
title: imagecropauto
---
# imagecropauto

(PHP 5> = 5.5.0, PHP 7, PHP 8)

imagecropauto — Обрізає зображення автоматично за допомогою одного з доступних режимів.

### Опис

```methodsynopsis
imagecropauto(    GdImage $image,    int $mode = IMG_CROP_DEFAULT,    float $threshold = 0.5,    int $color = -1): GdImage|false
```

Автоматично обрізає зображення відповідно до заданого `mode`

### Список параметрів

`image`

Об'єкт [GdImage](class.gdimage.md), що повертається однією з функцій створення зображень, наприклад, такий як [imagecreatetruecolor()](function.imagecreatetruecolor.md)

`mode`

Одна з наступних констант:

**`IMG_CROP_DEFAULT`**

Те саме, що і **`IMG_CROP_TRANSPARENT`**. До PHP 7.4.0, пов'язаний libgd використав **`IMG_CROP_SIDES`**, якщо зображення не мало прозорого кольору.

**`IMG_CROP_TRANSPARENT`**

Обрізає прозорим фоном.

**`IMG_CROP_BLACK`**

Обрізає чорне тло.

**`IMG_CROP_WHITE`**

Обрізає білим тлом.

**`IMG_CROP_SIDES`**

Використовує чотири кути зображення, щоб спробувати виявити фон для обрізки.

**`IMG_CROP_THRESHOLD`**

Обрізає зображення, використовуючи задані `threshold` і `color`

`threshold`

Визначає допуск у відсотках, який використовуватиметься при порівнянні кольору зображення та кольору обрізки. Метод, що використовується для розрахунку різниці кольорів, заснований на колірній відстані в кубі RGB(a).

Використовується лише у режимі **`IMG_CROP_THRESHOLD`**

> **Зауваження**: До PHP 7.4.0 у комплекті libgd використовувався дещо інший алгоритм, тому один і той же `threshold` давав різні результати для системного та пов'язаного libgd.

`color`

Або значення кольору RGB, або індекс палітри.

Використовується лише у режимі **`IMG_CROP_THRESHOLD`**

### Значення, що повертаються

Повертає об'єкт обрізаного зображення у разі успішного виконання або **`false`** у разі виникнення помилки. Якщо повне зображення було обрізано, [imagecrop()](function.imagecrop.md) повертає **`false`**

### список змін

| Версия | Описание |
| --- | --- |
|  | `image` тепер чекає екземпляр [GdImage](class.gdimage.md); раніше очікували ресурс (resource). |
|  | У разі успішного виконання функція тепер повертає об'єкт [GDImage](class.gdimage.md); раніше повертався ресурс (resource). |
|  | Поведінка imagecropauto() у комплекті libgd синхронізована із системним libgd: **`IMG_CROP_DEFAULT`** більше не використовує **`IMG_CROP_SIDES`**, і для обрізки порога тепер використовується той самий алгоритм, що й системним libgd. |
|  | Значення за замовчуванням `mode` було змінено на **`IMG_CROP_AUTO`**. Раніше значення за промовчанням було `-1`, що відповідає **`IMG_CROP_DEFAULT`**, але передача `-1` тепер застаріла. |

### Приклади

**Приклад #1 Правильна обробка автообрізання**

Як зазначено в розділі значення, що повертається, **imagecropauto()** повертає \*\*`false`\*\*якщо все зображення було обрізано. У цьому прикладі ми маємо ресурс зображення `$im`, який має бути автоматично обрізаний, тільки якщо є що обрізати; в іншому випадку ми хочемо перейти до вихідного зображення.

```php
<?php
$cropped = imagecropauto($im, IMG_CROP_DEFAULT);
if ($cropped !== false) { // в случае возврата нового объекта изображения
    imagedestroy($im);    // мы уничтожаем исходное изображение
    $im = $cropped;       // и назначаем обрезанное изображение в $im
}
?>
```

### Дивіться також

-   [imagecrop()](function.imagecrop.md) - Обрізати зображення до заданого прямокутника
