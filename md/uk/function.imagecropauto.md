---
navigation:
  - function.imagecrop.md: « imagecrop
  - function.imagedashedline.md: imagedashedline »
  - index.md: PHP Manual
  - ref.image.md: Функції GD та функції для роботи із зображеннями
title: imagecropauto
origin_hash: ddf652f5224dc9f1fa9671347921941ca401ea50
---
# imagecropauto

(PHP 5 >= 5.5.0, PHP 7, PHP 8)

imagecropauto — Обрізає зображення автоматично на основі заданого режиму

### Опис

```methodsynopsis
imagecropauto(    GdImage $image,    int $mode = IMG_CROP_DEFAULT,    float $threshold = 0.5,    int $color = -1): GdImage|false
```

Автоматично обрізає зображення на основі заданого режиму (`mode`

### Список параметрів

`image`

Об'єкт [GdImage](class.gdimage.md), що повертається однією з функцій створення зображень, наприклад, такий як [imagecreatetruecolor()](function.imagecreatetruecolor.md)

`mode`

Одна з наступних констант:

**`IMG_CROP_DEFAULT`**

Те саме, що і **`IMG_CROP_TRANSPARENT`**. До PHP 7.4.0 вбудований модуль libgd вибирав режим **`IMG_CROP_SIDES`**, якщо зображення не було прозорого кольору.

**`IMG_CROP_TRANSPARENT`**

Обрізає прозорим фоном.

**`IMG_CROP_BLACK`**

Обрізає чорне тло.

**`IMG_CROP_WHITE`**

Обрізає білим тлом.

**`IMG_CROP_SIDES`**

Аналізує чотири кути зображення, щоб спробувати виявити фон для обрізки.

**`IMG_CROP_THRESHOLD`**

Обрізає зображення, використовуючи задані `threshold`и`color`

`threshold`

Визначає допуск у відсотках, який буде використаний для порівняння кольору зображення та кольору обрізки. Метод розрахунку різниці кольорів заснований на колірній відстані в кубі RGB(a).

Враховується лише у режимі **`IMG_CROP_THRESHOLD`**

> **Зауваження**: До PHP 7.4.0 у модулі libgd працював трохи інший алгоритм, тому один і той же поріг `threshold` давав різні результати для системного та вбудованого модуля libgd.

`color`

Або значення кольору RGB, або індекс палітри.

Враховується лише у режимі **`IMG_CROP_THRESHOLD`**

### Значення, що повертаються

Повертає об'єкт обрізаного зображення у разі успішного виконання або **`false`** у разі виникнення помилки. Повертає **`false`** і тоді, коли все зображення було обрізано.

### список змін

| Версия | Опис |
| --- | --- |
| 8.0.0 | `image` тепер чекає екземпляр [GdImage](class.gdimage.md); раніше очікувався коректний `gd` ресурс (Resource). |
| 8.0.0 | У разі успішного виконання функція тепер повертає об'єкт [GDImage](class.gdimage.md); раніше повертався ресурс (resource). |
| 7.4.0 | Поведінка imagecropauto() у комплекті libgd синхронізована із системним libgd: **`IMG_CROP_DEFAULT`** більше не використовує **`IMG_CROP_SIDES`**, і для обрізки порога тепер використовується той самий алгоритм, що й системним libgd. |
| 7.4.0 | Значення режиму (`mode`) за замовчуванням було змінено на **`IMG_CROP_AUTO`**. . Раніше значенням за умовчанням було `-1`, що відповідає **`IMG_CROP_DEFAULT`**, але передача `-1` тепер застаріла. |

### Приклади

**Приклад #1 Правильна обробка автообрізання**

Як зазначено в розділі значення, що повертається, функція **imagecropauto()** повертає **`false`**, якщо все зображення було обрізано. У цьому прикладі є ресурс зображення `$im`, який повинен бути автоматично обрізаний, тільки якщо є обрізати; інакше потрібно перейти до вихідного зображення.

```php
<?php

$cropped = imagecropauto($im, IMG_CROP_DEFAULT);
if ($cropped !== false) { // в случае возврата нового объекта изображения
    imagedestroy($im);    // мы уничтожаем исходное изображение
    $im = $cropped;       // и назначаем обрезанное изображение в $im
}

?>
```

### Дивіться також

-   [imagecrop()](function.imagecrop.md) \- Обрізати зображення до заданого прямокутника
