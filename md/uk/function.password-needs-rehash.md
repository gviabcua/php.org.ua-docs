Перевіряє, що зазначений хеш відповідає заданим опціям

-   [« password\_hash](function.password-hash.html)
    
-   [password\_verify »](function.password-verify.html)
    
-   [PHP Manual](index.html)
    
-   [Функции хеширования паролей](ref.password.html)
    
-   Перевіряє, що зазначений хеш відповідає заданим опціям
    

# passwordneedsrehash

(PHP 5> = 5.5.0, PHP 7, PHP 8)

passwordneedsrehash — Перевіряє, чи зазначений хеш відповідає заданим опціям

### Опис

```methodsynopsis
password_needs_rehash(string $hash, string|int|null $algo, array $options = []): bool
```

Перевіряє, що зазначений хеш відповідає заданим опціям та заданому алгоритму. Якщо ні, то можна дійти невтішного висновку у тому, що хеш треба перестворити.

### Список параметрів

`hash`

Хеш, створений функцією [password\_hash()](function.password-hash.html)

`algo`

[Константа](password.constants.html), Що позначає алгоритм хешування пароля, що використовується.

`options`

Асоціативний масив із опціями. За документацією щодо підтримуваних опцій для кожного алгоритму зверніться до розділу [Константы алгоритмов хеширования паролей](password.constants.html)

### Значення, що повертаються

Повертає **`true`**якщо пароль повинен бути перехешований з використанням алгоритму `algo` та опцій `options`, або **`false`**, якщо ні.

### список змін

| Версия | Описание                                                                                             |
|--------|------------------------------------------------------------------------------------------------------|
|        | Параметр `algo` Тепер чекає рядок (string), але все ще приймає число (int) для зворотної сумісності. |

### Приклади

**Приклад #1 Приклад використання **passwordneedsrehash()****

```php
<?php

$password = 'rasmuslerdorf';
$hash = '$2y$10$YCFsG6elYca568hBi2pZ0.3LDL5wjgxct1N8w/oLR/jfHsiQwCqTS';

// Параметр стоимости может изменяться в связи со сменой оборудования
$options = array('cost' => 11);

// Проверка сохранённого хеша с помощью пароля
if (password_verify($password, $hash)) {
    // Проверяем, не нужно ли использовать более новый алгоритм
    // или другую алгоритмическую стоимость
    if (password_needs_rehash($hash, PASSWORD_DEFAULT, $options)) {
        // Если таки да, перехешируем и сохраняем новый хеш
        $newHash = password_hash($password, PASSWORD_DEFAULT, $options);
    }

    // Авторизуем пользователя
}
?>
```