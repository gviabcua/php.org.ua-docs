---
navigation:
  - function.svn-delete.html: « svndelete
  - function.svn-export.html: svnexport »
  - index.md: PHP Manual
  - ref.svn.md: Функції SVN
title: svndiff
---
# svndiff

(PECL svn> = 0.1.0)

svndiff - Рекурсивно показує відмінності двох файлів

### Опис

```methodsynopsis
svn_diff(    string $path1,    int $rev1,    string $path2,    int $rev2): array
```

Рекурсивно показує різницю двох файлів `path1` і `path2`

> **Зауваження**
> 
> Це не інструмент для перегляду загальних змін. Можуть бути розглянуті відмінності лише локальних файлів, які знаходяться в системі контролю версій SVN : інші файли відмінності переглянути не вдасться.

### Список параметрів

`path1`

Перший шлях. Це може бути URL файлу/директорії у репозиторії SVN або шлях до локального файлу/директорії.

> **Зауваження**: Відносні шляхи будуть обчислені, якби поточна робоча директорія була домашньою папкою самого PHP Щоб використовувати робочу директорію скрипта, що викликає, використовуйте [realpath()](function.realpath.md) або dirname(FILE

**Увага**

Якщо шлях до локального файлу складається тільки із зворотних слішів (), без слєша (/), даному модулю не вдасться знайти необхідні файли. Завжди замінюйте всі зворотні сліші () на слєші (/), використовуючи цю функцію.

`rev1`

Номер ревізії першого файлу. Використовуйте константу **`SVN_REVISION_HEAD`** для завдання останньої ревізії.

`path2`

Другий шлях до файлу, аналогічно `path1`

`rev2`

Номер ревізії другого файлу, аналогічно `rev1`

### Значення, що повертаються

Повертає список масивів, що складається з двох потоків: перша - відмінності файлів; друга – помилки. Потоки можуть бути прочитані функцією [fread()](function.fread.md). При помилці повертає **`false`** або **`null`**

За промовчанням висновок відмінностей буде у стандартному форматі Subversion, але також може використовуватися [»  зовнішнім інструментом показу відмінностей](http://svnbook.red-bean.com/en/1.2/svn.advanced.externaldifftools.md), залежно від налаштування Subversion.

### Приклади

**Приклад #1 Простий приклад**

Приклад нижче ілюструє просте використання цієї функції та отримання даних із потоку.

```php
<?php
list($diff, $errors) = svn_diff(
    'http://www.example.com/svnroot/trunk/foo', SVN_REVISION_HEAD,
    'http://www.example.com/svnroot/branches/dev/foo', SVN_REVISION_HEAD
);
if (!$diff) exit;
$contents = '';
while (!feof($diff)) {
  $contents .= fread($diff, 8192);
}
fclose($diff);
fclose($errors);
var_dump($contents);
?>
```

Результат виконання цього прикладу:

```
Index: http://www.example.com/svnroot/trunk/foo
===================================================================
--- http://www.example.com/svnroot/trunk/foo        (.../foo) (revision 23)
+++ http://www.example.com/svnroot/branches/dev/foo (.../foo) (revision 27)
 // остальный вывод diff
```

**Приклад #2 Висновок різниці між двома ревізіями одного файлу**

Цей приклад показує як реалізувати функцію-обертку, яка дозволяє користувачеві переглядати різницю між двома ревізіями одного файлу, використовуючи зовнішній шлях репозиторію (стандартний синтаксис такої реалізації дещо надлишковий):

```php
<?php
function svn_diff_same_item($path, $rev1, $rev2) {
    return svn_diff($path, $rev1, $path, $rev2);
}
?>
```

**Приклад #3 Більш зручний спосіб виведення відмінностей між двома файлами**

Цей приклад показує як реалізувати функцію-обертку для виведення відмінностей між двома локальними файлами, яка є переносимою та позбавлена ​​помилок під час роботи з функцією [realpath()](function.realpath.md) і зворотним слішем.

```php
<?php
function svn_diff_local($path1, $rev1, $path2, $rev2) {
    $path1 = str_replace('\\', '/', realpath($path1));
    $path2 = str_replace('\\', '/', realpath($path2));
    return svn_diff($path1, $rev1, $path2, $rev2);
}
?>
```

### Примітки

**Увага**

Ця функція є *ЕКСПЕРИМЕНТАЛЬНОЇ*. Поведінка цієї функції, її ім'я та документація, що до неї належить, можуть змінитися в наступних версіях PHP без повідомлення. Використовуйте цю функцію на свій страх та ризик.

### Дивіться також

-   [» SVN-документация по svn diff](http://svnbook.red-bean.com/en/1.2/svn.ref.svn.c.diff.md)
