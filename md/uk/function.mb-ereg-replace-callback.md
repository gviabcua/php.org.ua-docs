---
navigation:
  - function.mb-ereg-match.md: « mb\_ereg\_match
  - function.mb-ereg-replace.md: mb\_ereg\_replace »
  - index.md: PHP Manual
  - ref.mbstring.md: Функції для роботи з багатобайтовими рядками
title: mb\_ereg\_replace\_callback
origin_hash: ddf652f5224dc9f1fa9671347921941ca401ea50
---
# mb\_ereg\_replace\_callback

(PHP 5 >= 5.4.1, PHP 7, PHP 8)

mb\_ereg\_replace\_callback — Виконує пошук та заміну за регулярним виразом за допомогою багатобайтових кодувань, обробляючи збіги callback-функцією

### Опис

```methodsynopsis
mb_ereg_replace_callback(    string $pattern,    callable $callback,    string $string,    ?string $options = null): string|false|null
```

Перевіряє рядок `string` на збіг із шаблоном `pattern`потім замінює знайдений текст виведенням функції `callback`

Поведінка цієї функції майже ідентична функції [mb\_ereg\_replace()](function.mb-ereg-replace.md), за винятком того, що замість рядка заміни `replacement`необходимо определять функцию`callback`

### Список параметрів

`pattern`

Шаблон регулярного виразу.

В параметре`pattern` можна вказувати багатобайтові символи.

`callback`

Callback-функція, яка буде викликана і отримає масив тих, що збіглися в рядку `string` елементів. Callback-функція має повертати рядок заміни.

Передається до параметра `callback` функції **mb\_ereg\_replace\_callback()** callback-функція часто потрібна лише одному місці. Можна використовувати [анонімні функції](functions.anonymous.md), щоб визначити callback-функцію усередині виклику функції **mb\_ereg\_replace\_callback()**. Вчиняючи так, розробник отримує всю інформацію про виклик в одному місці і не забруднює простір імен функцій ім'ям callback-функції, яка більше ніде не буде потрібна.

`string`

Рядок (string) для перевірки.

`options`

Варіант пошуку. Пояснення наведено в описі функції [mb\_regex\_set\_options()](function.mb-regex-set-options.md)

### Значення, що повертаються

Повертає результуючий рядок у разі успішного виконання або **`false`** у разі виникнення помилки. Якщо рядок `string` неприпустима для поточного кодування, повертається значення **`null`**

### список змін

| Версия | Опис |
| --- | --- |
| 8.0.0 | Параметр`options` тепер може набувати значення null. |
| 7.1.0 | Функція перевіряє, чи допустимий рядок `string` для поточного кодування. |

### Приклади

**Приклад #1 Приклад использования функции**mb\_ereg\_replace\_callback()\*\*\*\*

```php
<?php

// этот текст был утверждён в 2002
// мы хотим обновить его для 2003
$text = "День смеха — 04/01/2002\n";
$text.= "Последнее Рождество было 12/24/2001\n";

// callback-функция
function next_year($matches)
{
  // как обычно: в $matches[0] будет полное совпадение
  // $matches[1] — совпадение для первого подшаблона,
  // заключённое в «(...)» и т. д.
  return $matches[1] . ($matches[2] + 1);
}

echo mb_ereg_replace_callback(
    "(\d{2}/\d{2}/)(\d{4})",
    "next_year",
    $text,
);

?>
```

Результат виконання наведеного прикладу:

```
День смеха - 04/01/2003
Последнее Рождество было 12/24/2002
```

**Приклад #2 Приклад использования функции**mb\_ereg\_replace\_callback()\*\* з анонімною функцією\*\*

```php
<?php
// этот текст был утверждён в 2002
// мы хотим обновить его для 2003
$text = "День смеха — 04/01/2002\n";
$text.= "Последнее Рождество было 12/24/2001\n";

echo mb_ereg_replace_callback(
    "(\d{2}/\d{2}/)(\d{4})",
    function ($matches) {
        return $matches[1] . ($matches[2] + 1);
    },
    $text,
);
?>
```

### Примітки

> **Зауваження** :
> 
> Для цієї функції буде використано внутрішнє кодування або кодування, встановлене функцією [mb\_regex\_encoding()](function.mb-regex-encoding.md)

### Дивіться також

-   [mb\_regex\_encoding()](function.mb-regex-encoding.md) \- Встановлює/отримує кодування символів для однобайтового регулярного виразу
-   [mb\_ereg\_replace()](function.mb-ereg-replace.md) \- Замінює за регулярним виразом за допомогою багатобайтових кодувань
-   [Анонімні функції](functions.anonymous.md)
