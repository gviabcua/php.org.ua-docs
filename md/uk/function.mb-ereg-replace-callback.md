---
navigation:
  - function.mb-ereg-match.md: « mberegmatch
  - function.mb-ereg-replace.md: мбeregreplace »
  - index.md: PHP Manual
  - ref.mbstring.md: Функції для роботи з багатобайтовими рядками
title: мбeregreplacecallback
---
# мбeregreplacecallback

(PHP 5> = 5.4.1, PHP 7, PHP 8)

мбeregreplacecallback — Виконує пошук та заміну за регулярним виразом за допомогою багатобайтових кодувань використовуючи callback-функцію

### Опис

```methodsynopsis
mb_ereg_replace_callback(    string $pattern,    callable $callback,    string $string,    ?string $options = null): string|false|null
```

Перевіряє рядок `string` на збіг із шаблоном `pattern`потім замінює знайдений текст результатом функції `callback`

Поведінка цієї функції майже ідентична з функцією [мбeregreplace()](function.mb-ereg-replace.md), за винятком того, що замість рядка заміни `replacement` необхідно визначати функцію `callback`

### Список параметрів

`pattern`

Шаблон регулярного виразу.

Мультибайтові символи можуть використовуватися в `pattern`

`callback`

Функція, яка буде викликана для отримання та передачі масиву збігів у рядок `subject`. Callback-функція повинна повертати рядок для заміни.

Часто може знадобитися оголошувати функцію `callback` для **мбeregreplacecallback()** лише одному місці. У такому разі використовуйте [анонімні функції](functions.anonymous.md) для визначення callback-функції всередині виклику **мбeregreplacecallback()**. При такому підході у вас буде вся інформація про виклик в одному місці і ви не забрудните простір імен функції ім'ям своєї callback-функції, яке більше ніде не використовується.

`string`

Рядок (string) для перевірки.

`options`

Опція пошуку. Детальніше дивіться [мбregexsetoptions()](function.mb-regex-set-options.md)

### Значення, що повертаються

Результуючий рядок у разі успішного виконання або **`false`** у разі виникнення помилки. Якщо `string` некоректна для поточного кодування, повертається **`null`**

### список змін

| Версия | Описание |
| --- | --- |
|  | `options` тепер допускає значення null. |
|  | Функція перевіряє, чи коректна `string` для поточного кодування. |

### Приклади

**Приклад #1 Приклад функції **мбeregreplacecallback()****

```php
<?php
// этот текст использовался в 2002
// мы хотим обновить для использования его в 2003
$text = "День смеха - 04/01/2002\n";
$text.= "Последнее Рождество было 12/24/2001\n";
// callback-функция
function next_year($matches)
{
  // как обычно: в $matches[0] будет полное совпадение
  // $matches[1] - совпадение для первого маски,
  // заключённой в '(...)' и т.д.
  return $matches[1].($matches[2]+1);
}
echo mb_ereg_replace_callback(
            "(\d{2}/\d{2}/)(\d{4})",
            "next_year",
            $text);

?>
```

Результат виконання цього прикладу:

```
День смеха - 04/01/2003
Последнее Рождество было 12/24/2002
```

**Приклад #2 **мбeregreplacecallback()** використовує анонімну функцію**

```php
<?php
// этот текст использовался в 2002
// мы хотим обновить для использования его в 2003
$text = "День смеха - 04/01/2002\n";
$text.= "Последнее Рождество было 12/24/2001\n";

echo mb_ereg_replace_callback(
            "(\d{2}/\d{2}/)(\d{4})",
            function ($matches) {
               return $matches[1].($matches[2]+1);
            },
            $text);
?>
```

### Примітки

> **Зауваження**
> 
> Для цієї функції буде використано внутрішнє кодування або кодування, встановлене функцією [мбregexencoding()](function.mb-regex-encoding.md)

### Дивіться також

-   [мбregexencoding()](function.mb-regex-encoding.md) - Встановлює/отримує поточне кодування для багатобайтового регулярного виразу
-   [мбeregreplace()](function.mb-ereg-replace.md) - Здійснює заміну за регулярним виразом за допомогою багатобайтових кодувань
-   [Анонімні функції](functions.anonymous.md)
