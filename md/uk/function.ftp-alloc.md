Резервує місце на диску для файлу, що закачується

-   [« Функции FTP](ref.ftp.html)
    
-   [ftp\_append »](function.ftp-append.html)
    
-   [PHP Manual](index.html)
    
-   [Функции FTP](ref.ftp.html)
    
-   Резервує місце на диску для файлу, що закачується
    

# ftpalloc

(PHP 5, PHP 7, PHP 8)

ftpalloc — Резервує місце на диску для файлу, що закачується.

### Опис

```methodsynopsis
ftp_alloc(FTP\Connection $ftp, int $size, string &$response = null): bool
```

Надсилає команду `ALLO` FTP-серверу для резервування місця під файл, що завантажується.

> **Зауваження**
> 
> Багато FTP-серверів не підтримують цю команду. Такі сервери повертають код невдачі (**`false`**), що означає відсутність підтримки цієї команди, або код успішного виконання (**`true`**), що означає, що в резервуванні немає необхідності і клієнту слід продовжувати, ніби операцію було виконано успішно. Тому цю функцію слід використовувати з серверами, які потребують обов'язкового резервування.

### Список параметрів

`ftp`

Ан [FTP\\Connection](class.ftp-connection.html) instance.

`size`

Кількість байт, що резервуються.

`response`

Текстове подання відповіді сервера буде повернуто за посиланням у аргумент `response`якщо він вказаний.

### Значення, що повертаються

Повертає **`true`** у разі успішного виконання або **`false`** у разі виникнення помилки.

### список змін

| Версия | Описание                                                                                                                                              |
|--------|-------------------------------------------------------------------------------------------------------------------------------------------------------|
|        | Параметр `ftp` тепер чекає екземпляр [FTP\\Connection](class.ftp-connection.html); раніше очікувався ресурс ([resource](language.types.resource.html) |

### Приклади

**Приклад #1 Приклад використання **ftpalloc()****

```php
<?php

$file = "/home/user/myfile";

/* соединение с сервером */
$ftp = ftp_connect('ftp.example.com');
$login_result = ftp_login($ftp, 'anonymous', 'user@example.com');

if (ftp_alloc($ftp, filesize($file), $result)) {
  echo "Место на сервере успешно зарезервировано.  Отправляю $file.\n";
  ftp_put($conn_id, '/incoming/myfile', $file, FTP_BINARY);
} else {
  echo "Не удалось зарезервировать место на сервере. Ответ сервера: $result\n";
}

ftp_close($ftp);

?>
```

### Дивіться також

-   [ftp\_put()](function.ftp-put.html) - Завантажує файл на FTP-сервер
-   [ftp\_fput()](function.ftp-fput.html) - Завантажує попередньо відкритий файл на FTP-сервер