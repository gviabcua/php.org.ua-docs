---
navigation:
  - function.fnmatch.md: « fnmatch
  - function.fpassthru.md: fpassthru »
  - index.md: PHP Manual
  - ref.filesystem.md: Функції файлової системи
title: fopen
---
# fopen

(PHP 4, PHP 5, PHP 7, PHP 8)

fopen — Відкриває файл або URL

### Опис

```methodsynopsis
fopen(    string $filename,    string $mode,    bool $use_include_path = false,    ?resource $context = null): resource|false
```

**fopen()** закріплює іменований ресурс, вказаний у аргументі `filename`за потоком.

### Список параметрів

`filename`

Якщо `filename` передано у формі "scheme://...", він вважається URL і PHP проведе пошук обробника протоколу (також відомого як "обертка") для цієї схеми. Якщо жодна обгортка не закріплена за протоколом, PHP видасть зауваження, щоб допомогти вам відстежити потенційну проблему у вашому скрипті і потім продовжить виконання, начебто `filename` вказував на звичайний файл.

Якщо PHP встановлено, що `filename` вказує на локальний файл, тоді намагається відкрити потік до цього файлу. Файл повинен бути доступний PHP, так що вам слід переконатися, що права доступу до файлу це дозволяють. Якщо ви увімкнули [openbasedir](ini.core.md#ini.open-basedir), накладаються подальші обмеження.

Якщо PHP встановив, що `filename` вказує на зареєстрований протокол і цей протокол зареєстрований як мережна URL, PHP виконує перевірку стану директиви [allowurlfopen](filesystem.configuration.md#ini.allow-url-fopen). Якщо вона вимкнена, PHP видасть попередження та виклик fopen закінчиться невдачею.

> **Зауваження**
> 
> Список підтримуваних протоколів доступний у розділі [Підтримувані протоколи та обгортки](wrappers.md). Деякі протоколи (`обёртки`) підтримують `контекст` та/або опції php.ini. Зверніться до відповідної сторінки з описом використовуваного протоколу для отримання списку опцій, які можуть бути встановлені. (наприклад, значення php.ini `user_agent` використовується обгорткою `http`

На платформі Windows необхідно екранувати всі зворотні сліші на шляху до файлу або використовувати прямі сліші.

```php
<?php
$handle = fopen("c:\\folder\\resource.txt", "r");
?>
```

`mode`

Параметр `mode` вказує тип доступу, який ви просите потоку. Він може бути одним із наступних варіантів:

**Список можливих режимів для **fopen()**, використовуючи `mode`**

| `mode` | Описание |
| --- | --- |
| `'r'` | Відкриває файл лише для читання; поміщає покажчик на початок файлу. |
| `'r+'` | Відкриває файл для читання та запису; поміщає покажчик на початок файлу. |
| `'w'` | Відкриває файл для запису; в іншому випадку поводиться так само, як і `'w+'` |
| `'w+'` | Відкриває файл для читання та запису; поміщає покажчик на початок файлу і обрізає файл до нульової довжини. Якщо файл не існує – намагається його створити. |
| `'a'` | Відкриває файл для запису; поміщає покажчик у кінець файлу. Якщо файл не існує – намагається його створити. У цьому режимі функція [fseek()](function.fseek.md) не застосовується, записи завжди додаються до кінця. |
| `'a+'` | Відкриває файл для читання та запису; поміщає покажчик у кінець файлу. Якщо файл не існує – намагається його створити. У цьому режимі функція [fseek()](function.fseek.md) впливає лише на позицію читання, записи завжди додаються до кінця. |
| `'x'` | Створює та відкриває тільки для запису; поміщає покажчик на початок файлу. Якщо файл вже існує, виклик **fopen()** закінчиться невдачею, поверне **`false`** та видасть помилку рівня **`E_WARNING`**. Якщо файл не існує, він спробує його створити. Це еквівалентно вказівкам прапорів \`O\_EXCL |
| `'x+'` | Створює та відкриває для читання та запису; в іншому має ту ж поведінку, що і`'x'` |
| `'c'` | Відкриває файл лише для запису. Якщо файл не існує, він створюється. Якщо файл існує, то він не обрізається (на відміну від `'w'`), і виклик до цієї функції не викликає помилку (так само як і у випадку з `'x'`). Вказівник на файл буде встановлено на початок файлу. Це може бути корисним за бажанням заблокувати файл (див. [flock()](function.flock.md)) перед зміною, оскільки використання `'w'` може обрізати файл ще до того, як було отримано блокування (якщо ви хочете обрізати файл, можна використовувати функцію [ftruncate()](function.ftruncate.md) після запиту на блокування). |
| `'c+'` | Відкриває файл для читання та запису; в іншому має ту ж поведінку, що і `'c'` |
| `'e'` | Встановити прапор close-on-exec (закрити під час запуску) на відкритий файловий дескриптор. Доступно тільки в PHP скомпілюваному на системах, що підтримують POSIX.1-2008. |

> **Зауваження**
> 
> Різні сімейства операційних систем мають різні угоди щодо закінчення рядків. Коли ви пишете текст і хочете вставити розрив рядка, ви повинні використовувати правильні символи (або символ) для операційної системи. Системи сімейства Unix використовують `\n` як символ кінця рядка, системи сімейства Windows використовують `\r\n` як символи закінчення рядка та системи сімейства Macintosh (Mac OS Classic) використовують `\r` як символ кінця рядка.
> 
> Якщо ви використовуєте неправильний символ кінця рядка під час редагування файлів, ви можете виявити, що при відкритті ці файли "дивно виглядають".
> 
> Windows пропонує прапор режиму текстової трансляції (`'t'`), який автоматично переведе `\n` в `\r\n` під час роботи із файлом. І навпаки - ви також можете використати `'b'`, щоб примусово увімкнути бінарний режим, у якому ваші дані не будуть перетворюватися. Щоб використати ці режими, вкажіть `'b'` або `'t'` останньою літерою параметра `mode`
> 
> Прапором трансляції за замовчуванням є `'b'`. Ви можете використовувати режим `'t'`, якщо працюєте з текстовими файлами та використовуєте `\n` для позначення кінця рядка у вашому скрипті, але при цьому припускаєте, що ваші файли будуть використовуватися в таких додатках, як Блокнот (у застарілих версіях). У всіх інших випадках використовуйте прапор `'b'`
> 
> Якщо ви вкажете прапор 't' під час роботи з бінарними файлами, ви можете зіткнутися з дивними проблемами з вашими даними, включаючи пошкоджені файли зображень та проблеми із символами `\r\n`

> **Зауваження**
> 
> Знову ж таки з міркувань портованості вкрай рекомендується переписати старий код, який покладається на режим `'t'`, щоб замість цього він використовував правильні кінці рядків та режим `'b'`

> **Зауваження**: Параметр `mode` ігнорується під час роботи з обгортками потоку php://output, php://input, php://stdin, php://stdout, php://stderr та php://fd.

`use_include_path`

Необов'язковий третій параметр `use_include_path` може бути встановлений у '1' або **`true`**, якщо ви також хочете провести пошук файлу в [includepath](ini.core.md#ini.include-path)

`context`

Ресурс (resource) з [контекстом потоку](stream.contexts.md)

### Значення, що повертаються

Повертає покажчик на файл у разі успішного виконання або **`false`** у разі виникнення помилки

### Помилки

У разі невдалого завершення роботи генерується помилка рівня **`E_WARNING`**

### список змін

| Версия | Описание |
| --- | --- |
|  | Додана опція `'e'` |

### Приклади

**Приклад #1 Приклади використання **fopen()****

```php
<?php
$handle = fopen("/home/rasmus/file.txt", "r");
$handle = fopen("/home/rasmus/file.gif", "wb");
$handle = fopen("http://www.example.com/", "r");
$handle = fopen("ftp://user:password@example.com/somefile.txt", "w");
?>
```

### Примітки

**Увага**

При використанні SSL Microsoft IIS порушує протокол, закриваючи з'єднання без надсилання індикатора `close_notify`. PHP повідомить про це як "SSL: Fatal Protocol Error" у той момент, коли ви досягнете кінця даних. Щоб обійти це, ви повинні встановити [errorreporting](errorfunc.configuration.md#ini.error-reporting) на рівень, що виключає EWARNING. PHP вміє визначати, що на стороні сервера перебуває проблемний IIS при відкритті потоку за допомогою обгортки `https://` та не виводить попередження. Якщо ви використовуєте [fsockopen()](function.fsockopen.md) для створення `ssl://` сокету, ви самі відповідаєте за визначення та придушення цього попередження.

> **Зауваження**
> 
> Якщо ви стикаєтеся з проблемами під час читання або запису файлів, і ви використовуєте PHP у вигляді серверного модуля, переконайтеся в тому, що процес сервера має доступ до файлів і директорій, що використовуються.

> **Зауваження**
> 
> Ця функція також може приймати директорії як параметр `filename`. Якщо ви не знаєте, чи є `filename` файлом або директорією, то вам може знадобитися використовувати функцію [ісdir()](function.is-dir.md) до виклику функції **fopen()**

### Дивіться також

-   [Підтримувані протоколи та обгортки](wrappers.md)
-   [fclose()](function.fclose.md) - Закриває відкритий дескриптор файлу
-   [fgets()](function.fgets.md) - Читає рядок із файлу
-   [fread()](function.fread.md) - Бінарно-безпечне читання файлу
-   [fwrite()](function.fwrite.md) - Бінарно-безпечний запис у файл
-   [fsockopen()](function.fsockopen.md) - Відкриває з'єднання з інтернет-сокетом або доменним сокетом Unix
-   [file()](function.file.md) - Читає вміст файлу та поміщає його в масив
-   [fileexists()](function.file-exists.md) - Перевіряє існування вказаного файлу чи каталогу
-   [ісreadable()](function.is-readable.md) - Визначає існування файлу і чи він доступний для читання
-   [streamsettimeout()](function.stream-set-timeout.md) - Встановити значення часу очікування потоку
-   [popen()](function.popen.md) - Відкриває файловий покажчик процесу
-   [streamcontextcreate()](function.stream-context-create.md) - Створює контекст потоку
-   [umask()](function.umask.md) - Змінює поточну umask
-   [SplFileObject](class.splfileobject.md)
