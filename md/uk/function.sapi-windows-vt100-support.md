Отримати або встановити підтримку VT100 для заданого потоку, пов'язаного з буфером виведення консолі Windows

-   [« sapiwindowssetctrlhandler](function.sapi-windows-set-ctrl-handler.html)
    
-   [showsource »](function.show-source.html)
    
-   [PHP Manual](index.md)
    
-   [Різні функції](ref.misc.md)
    
-   Отримати або встановити підтримку VT100 для заданого потоку, пов'язаного з буфером виведення консолі Windows
    

# sapiwindowsvt100support

(PHP 7> = 7.2.0, PHP 8)

sapiwindowsvt100support — Отримати або встановити підтримку VT100 для заданого потоку, пов'язаного з буфером виведення консолі Windows

### Опис

```methodsynopsis
sapi_windows_vt100_support(resource $stream, ?bool $enable = null): bool
```

Якщо параметр `enable` дорівнює **`null`**, функція повертає **`true`** або **`false`** в залежності від того, дозволені чи ні керуючі послідовності VT100 для `stream`

Якщо параметр `enable` є логічним значенням (bool), функція спробує увімкнути або вимкнути функціональність VT100 для потоку `stream`. У цьому випадку функція поверне **`true`** або **`false`** залежно від успішності виконання.

При старті PHP намагається включити VT100 для потоків **`STDOUT`** і **`STDERR`**. Але якщо, наприклад, ці потоки перенаправлені у файл, то підтримка VT100 може включитися.

Якщо включена підтримка VT100, можна використовувати керуючі послідовності, оскільки вони відомі терміналу. Вони дозволяють змінювати виведення терміналу. У Windows ці послідовності відомі як "Console Virtual Terminal Sequences".

**Увага**

Ця функція використовує реалізацію прапора **`ENABLE_VIRTUAL_TERMINAL_PROCESSING`** у Windows 10 API, отже функціональність VT100 може бути недоступна у старіших версіях Windows.

### Список параметрів

`stream`

Потік, з яким працюватиме функція.

`enable`

Якщо є логічним значенням (bool), то має бути або **`true`**, або **`false`**, для включення та відключення VT100 відповідно.

### Значення, що повертаються

Якщо параметр `enable` дорівнює **`null`**, функція повертає **`true`** або **`false`** залежно від того, дозволені чи ні керуючі послідовності VT100

Якщо параметр `enable` є логічним значенням (bool): Повертає **`true`** у разі успішного виконання або **`false`** у разі виникнення помилки.

### список змін

| Версия | Описание |
| --- | --- |
|  | `enable` тепер допускає значення null. |

### Приклади

**Приклад #1 Стан **sapiwindowsvt100support()** за замовчуванням**

За замовчуванням, для **`STDOUT`** і **`STDERR`** підтримка VT100 увімкнена.

php -r "varexport(sapi)windowsvt100support(STDOUT));echo ' ';varexport(sapi)windowsvt100support(STDERR));"

Результатом виконання цього прикладу буде щось подібне:

```
true true
```

Якщо потік перенаправлений, то підтримка VT100 буде вимкнена:

php -r "varexport(sapi)windowsvt100support(STDOUT));echo ' ';varexport(sapi)windowsvt100support(STDERR));" 2>NUL

Результатом виконання цього прикладу буде щось подібне:

true false

**Приклад #2 Зміна стану за допомогою **sapiwindowsvt100support()****

Ви не можете увімкнути підтримку VT100 для **`STDOUT`** або **`STDERR`** якщо ці потоки перенаправлені.

php -r "varexport(sapi)windowsvt100support(STDOUT, true));echo ' ';varexport(sapi)windowsvt100support(STDERR, true));" 2>NUL

Результатом виконання цього прикладу буде щось подібне:

```
true false
```

**Приклад #3 Приклад використання за допомогою VT100**

```php
<?php
$out = fopen('php://stdout','w');
fwrite($out, 'Just forgot a lettr.');
// Переместить курсор на две позиции назад
fwrite($out, "\033[2D");
// Вставляет один пробел, сдвигая существующий текст вправо -> Просто забыли букву.
fwrite($out, "\033[1@");
fwrite($out, 'e');
?>
```

Результат виконання цього прикладу:

```
Just forgot a letter.
```