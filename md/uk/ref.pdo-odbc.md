Функції ODBC та DB2 (PDOODBC)

-   [« PDOOCI DSN](ref.pdo-oci.connection.html)
    
-   [PDOODBC DSN »](ref.pdo-odbc.connection.html)
    
-   [PHP Manual](index.html)
    
-   [Драйвери PDO](pdo.drivers.html)
    
-   Функції ODBC та DB2 (PDOODBC)
    

# Функції ODBC та DB2 (PDOODBC)

## Вступ

PDOODBC – драйвер, що реалізує [интерфейс PHP Data Objects (PDO)](intro.pdo.html) для доступу до баз даних через драйвер ODBC або бібліотеку IBM DB2 Call Level Interface (DB2 CLI). На даний момент PDOODBC підтримує різні "відтінки" драйверів баз даних:

ibm-db2

Підтримка доступу до серверів IBM DB2 Universal Database, Cloudscape та Apache Derby через вільний клієнт DB2 express-C.

unixODBC

Підтримує доступ до баз даних через менеджер драйверів unixODBC та власні ODBC драйвери баз даних.

generic

Надає опцію компіляції менеджерів драйверів ODBC, які не підтримуються PDOODBC безпосередньо.

У Windows phppdoodbc.dll має бути включений як модуль у php.ini. Він збирається за участю Windows ODBC Driver Manager, тому PHP може підключатися до будь-якої бази даних, визначеної як System DSN.

## Встановлення

**PDOODBC на UNIX системах**

1.  Модуль PDOODBC включено у вихідний код PHP. Ви можете скомпілювати модуль як статичний або розділяється, використовуючи наступний синтаксис **configure**
    
    ibmdb2
    
    ```
    ./configure --with-pdo-odbc=ibm-db2,/opt/IBM/db2/V8.1/
    ```
    
    Для збирання PDOODBC для ibm-db2 потрібно попередньо встановити файли заголовків пакета розробника програм DB2. Заголовні файли пакета розробника додатків DB2 можна встановити як за допомогою інсталяційного пакета сервера DB2, так і у складі окремого клієнта "DB2 Application Development Client", доступного для завантаження з [» сайта поддержки](https://www.ibm.com/developerworks/downloads/im/db2express/index.html) IBM developerWorks.
    
    Якщо ви не вкажете директорію установки бібліотек та заголовних файлів DB2, **configure** буде шукати їх у /home/db2inst1/sqllib.
    
    unixODBC
    
    ```
    ./configure --with-pdo-odbc=unixODBC,/usr/local
    ```
    
    Якщо ви не вкажете директорію установки бібліотек і файлів заголовків unixODBC, **configure** буде шукати їх у /usr/local.
    
    generic
    
    ```
    ./configure --with-pdo-odbc=generic,/usr/local,libname,ldflags,cflags
    ```
    

## Обумовлені константи

Наведені нижче константи визначені цим драйвером і будуть доступні лише у випадку, якщо PHP був зібраний з підтримкою цього модуля, або цей модуль був динамічно завантажений під час виконання. Крім того, ці залежні від драйвера константи повинні бути використані лише разом із цим драйвером. Використання атрибутів, специфічних для деякого драйвера з іншим драйвером, може викликати несподівану поведінку. Якщо ваш код виконується з кількома драйверами, можна використовувати функцію [PDO::getAttribute()](pdo.getattribute.html) для отримання атрибуту **`PDO::ATTR_DRIVER_NAME`** для перевірки драйвера.

**`PDO::ODBC_ATTR_USE_CURSOR_LIBRARY`** (int)

Цей параметр визначає, чи використовується бібліотека курсорів ODBC. Бібліотека курсорів ODBC підтримує деякі додаткові особливості ODBC (наприклад, блокові курсори, що прокручуються), які можуть не реалізовуватися драйвером. Підтримуються такі значення:

-   **`PDO::ODBC_SQL_USE_IF_NEEDED`** (за замовчуванням): використовувати бібліотеку курсорів ODBC, якщо необхідно.
    
-   **`PDO::ODBC_SQL_USE_DRIVER`**: ніколи не використовувати бібліотеку курсорів ODBC
    
-   **`PDO::ODBC_SQL_USE_ODBC`**: використовувати бібліотеку курсорів ODBC.
    

**`PDO::ODBC_ATTR_ASSUME_UTF8`** (bool)

Лише для Windows. Якщо **`true`**, то дані в кодуванні UTF-16 (`CHAR` `VARCHAR` і `LONGVARCHAR`) будуть конвертовані в UTF-8 під час читання або запису. Якщо **`false`** (за умовчанням), перетворення кодування символів може бути виконане драйвером.

## Налаштування під час виконання

Поведінка цих функцій залежить від установок у php.ini.

**Конфігураційні опції PDOODBC**

| Имя | По умолчанию | Место изменения | Список изменений |
| --- | --- | --- | --- |
| [pdoodbc.connectionpooling](ref.pdo-odbc.html#ini.pdo-odbc.connection-pooling) | "strict" | PHPINIALL |  |
| [pdoodbc.db2instancename](ref.pdo-odbc.html#ini.pdo-odbc.db2-instance-name) | NULL | PHPINISYSTEM | Ця можливість застаріла та *буде* обов'язково *видалено* в майбутньому. |

Для детального опису констант PHPINI, зверніться до розділу [Де можуть бути встановлені параметри конфігурації](configuration.changes.modes.html)

Коротке пояснення конфігураційних директив.

`pdo_odbc.connection_pooling` string

Чи потрібно поєднувати з'єднання ODBC. Може бути `"strict"` `"relaxed"` або `"off"` (аналогічно `""`). Параметр визначає як строго менеджер з'єднань повинен порівнювати параметри з'єднань для вибору, створювати нове з'єднання або повертати вже існуюче. За промовчанням рекомендується використовувати **`strict`**, що означає, що збережене з'єднання повертатиметься лише, якщо всі параметри точно збігаються . **`relaxed`** призведе до того, що закешоване з'єднання буде повернуто, якщо параметри схожі. Це спричинить більш активне використання кеша, але може призвести до витоку інформації про з'єднання (наприклад) між віртуальними хостами.

Це налаштування можна змінити тільки в php.ini та впливає на всі процеси; всі модулі, завантажені в процес і які використовують ті ж бібліотеки ODBC, залежатимуть від цієї настройки, включаючи [Уніфікований модуль ODBC](ref.uodbc.html)

**Увага**

Значення **`relaxed`** не повинно використовуватися на загальному хостингу з метою безпеки.

**Підказка**

Якщо у вас немає дуже серйозного приводу використовувати значення, відмінне від **`strict`** - Не змінюйте його.

`pdo_odbc.db2_instance_name` string

Якщо ви скомпілювали PDOODBC з використанням `db2`, ця опція встановить значення змінної оточення DB2INSTANCE у системах Linux і UNIX, що дорівнює обраному імені екземпляра DB2. Це дозволяє PDOODBC визначити розташування бібліотек DB2 і з'єднатися з каталогом бази даних DB2.

Це налаштування можна змінити тільки в php.ini, і воно впливає на всі процеси; всі модулі, завантажені в процес і які використовують ті ж бібліотеки ODBC, залежатимуть від цієї настройки, включаючи [уніфікований модуль ODBC](ref.uodbc.html)

Ця опція не працює у Windows.

## Зміст

-   [PDOODBC DSN](ref.pdo-odbc.connection.html) — З'єднання з базами даних ODBC або DB2