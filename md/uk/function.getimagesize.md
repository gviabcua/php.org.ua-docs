Отримання розміру зображення

-   [« gd\_info](function.gd-info.html)
    
-   [getimagesizefromstring »](function.getimagesizefromstring.html)
    
-   [PHP Manual](index.html)
    
-   [Функции GD и функции для работы с изображениями](ref.image.html)
    
-   Отримання розміру зображення
    

# getimagesize

(PHP 4, PHP 5, PHP 7, PHP 8)

getimagesize — Отримання розміру зображення

### Опис

```methodsynopsis
getimagesize(string $filename, array &$image_info = null): array|false
```

Функція **getimagesize()** визначить розмір будь-якого заданого, підтримуваного зображення та поверне цей розмір разом з типом файлу та текстовим рядком `height/width`, яку можна буде використовувати всередині тега HTML `IMG`, а також поверне відповідний тип вмісту HTTP.

Також **getimagesize()** може повернути додаткові відомості про зображення через аргумент `image_info`

**Застереження**

Функція очікує, що `filename` є правильним файлом зображення. Якщо буде передано файл, що не містить зображення, він може бути некоректно інтерпретований як зображення і функція завершиться успішно, але масив буде містити безглузді значення.

Не використовуйте **getimagesize()** для перевірки, що файл є зображенням. Для цього використовуйте модуль [Fileinfo](book.fileinfo.html)

> **Зауваження**: Зверніть увагу на те, що окремі частини JPC та JP2 зображень можуть мати різну глибину кольору. У цьому випадку параметр "bits" буде стояти максимальне значення з усіх виявлених. Також JP2 файли можуть містити `несколько кодовых потоков JPEG 2000`. В такому випадку **getimagesize()** поверне значення для першого потоку, який буде виявлено функцією в корені файлу.

> **Зауваження**: Інформація про іконки витягується з іконки з найбільшим бітрейтом

> **Зауваження**: Зображення GIF складаються з одного або декількох кадрів, де кожен кадр може займати лише частину зображення. Розмір зображення, що повертається **getimagesize()**, буде загальним розміром (прочитаним з дескриптора логічного екрану).

### Список параметрів

`filename`

Цей аргумент задає файл, відомості про який витягуватиметься. Це може бути локальний чи віддалений (залежить від конфігурації) файл. Передача даних віддаленого файлу повинна здійснюватися одним із [поддерживаемых потоков](wrappers.html)

`image_info`

Цей необов'язковий аргумент дозволяє отримати деякі розширені відомості з файлу зображення. На даний момент можна отримати різні JPG APP маркери у вигляді асоціативного масиву. Деякі програми використовують ці маркери для вбудовування тексту у зображення. Найчастіше вбудовують [» IPTC](http://www.iptc.org/) відомості в APP13 маркер. Для перетворення двійкових даних APP13 маркера на щось легкочитане можна скористатися функцією [iptcparse()](function.iptcparse.html)

> **Зауваження**
> 
> `image_info` підтримує лише файли JFIF.

### Значення, що повертаються

Повертає масив із 7 елементів. Не всі типи зображень містять елементи з каналами (`channels`) та бітрейтом (`bits`

Індекси 0 і 1 містять ширину та висоту зображення.

> **Зауваження**
> 
> Деякі формати файлів можуть зберігати кілька зображень або взагалі не містити зображення. У таких випадках **getimagesize()** не зможе визначити розмір зображення . **getimagesize()** поверне нулі як значення висоти та ширини.

Індекс 2 містить одну з констант типу зображення [IMAGETYPE\_XXX](image.constants.html)

Індекс 3 містить рядок зі значеннями ширини та висоти зображення `height="yyy" width="xxx"`яка може бути використана всередині тега IMG.

`mime` - Відповідний MIME-тип зображення. Ці відомості використовуються для коректної обробки зображення на основі заголовка `Content-type`

**Приклад #1 **getimagesize()** та MIME типи**

```php
<?php
$size = getimagesize($filename);
$fp = fopen($filename, "rb");
if ($size && $fp) {
    header("Content-type: {$size['mime']}");
    fpassthru($fp);
    exit;
} else {
    // ошибка
}
?>
```

`channels` приймає значення 3 для RGB картинок та 4 для CMYK.

`bits` - Глибина кольору, число біт для кожного кольору.

Для деяких типів зображень наявність значень `channels` і `bits` може збити з пантелику. Наприклад, GIF завжди використовує 3 канали на піксель, але глибину кольору неможливо обчислити для анімованих GIF зображень із загальною таблицею кольорів.

У разі виникнення помилки функція поверне **`false`**

### Помилки

Якщо доступ до файлу `filename` неможливий, **getimagesize()** викличе помилку рівня **`E_WARNING`**. У разі виникнення помилки читання файлу **getimagesize()** викличе помилку рівня **`E_NOTICE`**

### список змін

| Версия | Описание |
| --- | --- |
|  | Додано підтримку WebP. |

### Приклади

**Приклад #2 Приклад використання **getimagesize()****

```php
<?php
list($width, $height, $type, $attr) = getimagesize("img/flag.jpg");
echo "<img src=\"img/flag.jpg\" $attr alt=\"пример getimagesize()\" />";
?>
```

**Приклад #3 getimagesize (URL)**

```php
<?php
$size = getimagesize("http://www.example.com/gifs/logo.gif");

// если в имени файла есть пробелы, учтите это должным образом
$size = getimagesize("http://www.example.com/gifs/lo%20go.gif");

?>
```

**Приклад #4 getimagesize(), що повертає IPTC**

```php
<?php
$size = getimagesize("testimg.jpg", $info);
if (isset($info["APP13"])) {
    $iptc = iptcparse($info["APP13"]);
    var_dump($iptc);
}
?>
```

### Примітки

> **Зауваження**
> 
> Ця функція не потребує бібліотеки GD.

### Дивіться також

-   [image\_type\_to\_mime\_type()](function.image-type-to-mime-type.html) - Отримання Mime-типу для типу зображення, що повертається функціями getimagesize, exifreaddata, exifthumbnail, exifimagetype
-   [exif\_imagetype()](function.exif-imagetype.html) - Визначте тип зображення.
-   [exif\_read\_data()](function.exif-read-data.html) - Читає заголовки EXIF ​​із файлів зображень
-   [exif\_thumbnail()](function.exif-thumbnail.html) - Отримує вбудоване прев'ю зображення
-   [imagesx()](function.imagesx.html) - Отримання ширини зображення
-   [imagesy()](function.imagesy.html) - Отримання висоти зображення