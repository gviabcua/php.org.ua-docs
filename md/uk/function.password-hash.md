---
navigation:
  - function.password-get-info.md: « passwordgetinfo
  - function.password-needs-rehash.md: passwordneedsrehash »
  - index.md: PHP Manual
  - ref.password.md: Функції хешування паролів
title: passwordhash
---
# passwordhash

(PHP 5> = 5.5.0, PHP 7, PHP 8)

passwordhash — Створює хеш пароля

### Опис

```methodsynopsis
password_hash(string $password, string|int|null $algo, array $options = []): string
```

**passwordhash()** створює хеш пароля, використовуючи сильний, незворотний алгоритм хешування.

На даний момент підтримуються такі алгоритми:

-   **`PASSWORD_DEFAULT`** - Використовується алгоритм bcrypt (за замовчуванням з PHP 5.5.0). Зверніть увагу, що алгоритм, що використовується, може з часом змінюватися на сильніший, коли такий додається в PHP. Відповідно, і довжина результату може з часом змінюватися. У зв'язку з цим рекомендується вибирати довжину поля для зберігання базі даних понад 60 символів (255 символів може бути хорошим варіантом).
-   **`PASSWORD_BCRYPT`** - використовує алгоритм **`CRYPT_BLOWFISH`**. Генерує стандартний хеш, сумісний із генерованою функцією [crypt()](function.crypt.md) із використанням ідентифікатора "$2y$". В результаті буде згенеровано рядок довжиною 60 символів або **`false`** у разі виникнення помилки.
-   **`PASSWORD_ARGON2I`** - використовувати алгоритм хешування Argon2i. Цей алгоритм доступний лише якщо PHP зібрано за допомогою Argon2.
-   **`PASSWORD_ARGON2ID`** - використовувати алгоритм хешування Argon2id. Цей алгоритм доступний лише якщо PHP зібрано за допомогою Argon2.

Опції, що підтримуються для **`PASSWORD_BCRYPT`**

-   `salt` (string) – для самостійного завдання солі для хешування. Зверніть увагу, що це призведе до перевизначення та запобігання автоматичному створенню солі.
    
    Якщо не поставлено, то **passwordhash()** буде генерувати випадкову сіль для кожного пароля, що хешується. Це кращий режим роботи.
    
    **Увага**
    
    Ця опція оголошена застарілою. Рекомендується використовувати сіль, що автоматично генерується. Починаючи з PHP 8.0.0, явно задана сіль ігнорується.
    
-   `cost` (int) - ставить необхідну алгоритмічну складність. Приклад використання цього значення можна переглянути на сторінці присвяченої функції [crypt()](function.crypt.md)
    
    Якщо не встановлено, то буде використано значення за замовчуванням `10`. Це хороша базова вартість, але ви можете збільшити її залежно від можливостей свого обладнання.
    

Опції, що підтримуються для **`PASSWORD_ARGON2I`** і **`PASSWORD_ARGON2ID`**

-   `memory_cost` (int) - Максимальний розмір пам'яті (кілобайт), яку можна використовувати для обчислення хешу Argon2. За замовчуванням **`PASSWORD_ARGON2_DEFAULT_MEMORY_COST`**
    
-   `time_cost` (int) – Максимально можливий час, який можна витратити для обчислення хешу Argon2. За замовчуванням **`PASSWORD_ARGON2_DEFAULT_TIME_COST`**
    
-   `threads` (int) – кількість потоків, які можна використовувати для обчислення хешу Argon2. За замовчуванням **`PASSWORD_ARGON2_DEFAULT_THREADS`**
    
    **Увага**
    
    Доступно лише тоді, коли PHP використовує libargon2, але не при реалізації libsodium.
    

### Список параметрів

`password`

Користувальницький пароль.

**Застереження**

Використання алгоритму **`PASSWORD_BCRYPT`** призведе до обрізання поля `password` до максимальної довжини 72 байти.

`algo`

[Константа](password.constants.md), Що позначає алгоритм хешування пароля, що використовується.

`options`

Асоціативний масив із опціями. За документацією щодо підтримуваних опцій для кожного алгоритму зверніться до розділу [Константи алгоритмів хешування паролів](password.constants.md)

Якщо не задано, то буде використано стандартну вартість і сіль буде генеруватися автоматично.

### Значення, що повертаються

Повертає пароль хешування.

Використаний алгоритм, вартість та сіль буде повернуто як частину хешу. Таким чином, інформація, необхідна для перевірки хеша, буде в нього включена. Це дозволить функції [passwordverify()](function.password-verify.md) перевіряти хеш без необхідності окремого зберігання інформації про солі та алгоритм.

### список змін

| Версия | Описание |
| --- | --- |
|  | **passwordhash()** більше не повертає **`false`** у разі виникнення помилки. |
|  | Параметр `algo` тепер допускає значення null. |
|  | Параметр `algo` Тепер чекає рядок (string), але все ще приймає число (int) для зворотної сумісності. |
|  | Модуль sodium забезпечує альтернативну реалізацію паролів Argon2. |
|  | Додано підтримку алгоритму хешування паролів Argon2id за допомогою **`PASSWORD_ARGON2ID`** |
|  | Додано підтримку хешуючого алгоритму Argon2i за допомогою **`PASSWORD_ARGON2I`** |

### Приклади

**Приклад #1 Приклад використання **passwordhash()****

```php
<?php
/**
 * Мы просто хотим захешировать свой пароль используя настройки по умолчанию.
 * Значит будет использован BCRYPT и результат будет 60 символов длиной.
 *
 * Помните, что алгоритм по умолчанию может измениться в будущем, так что
 * имеет смысл заранее позаботиться о том, чтобы система хранения хешей
 * смогла хранить более 60 символов (255 в самый раз)
 */
echo password_hash("rasmuslerdorf", PASSWORD_DEFAULT);
?>
```

Результатом виконання цього прикладу буде щось подібне:

```
$2y$10$.vGA1O9wmRjrwAVXD98HNOgsNpDczlqm3Jq7KnEd1rVAGv3Fykk1a
```

**Приклад #2 Приклад використання **passwordhash()** з ручним завданням вартості**

```php
<?php
/**
 * Тут мы увеличиваем алгоритмическую стоимость BCRYPT до 12.
 * Но это никак не скажется на длине полученного результата, она останется 60 символов
 */
$options = [
    'cost' => 12,
];
echo password_hash("rasmuslerdorf", PASSWORD_BCRYPT, $options);
?>
```

Результатом виконання цього прикладу буде щось подібне:

```
$2y$12$QjSH496pcT5CEbzjD/vtVeH03tfHKFy36d4J0Ltp3lRtee9HDxY3K
```

**Приклад #3 Приклад пошуку хорошого значення вартості для **passwordhash()****

```php
<?php
/**
 * Данный код замерит скорость выполнения операции хеширования для вашего сервера
 * с разными значениями алгоритмической сложности для определения максимального
 * его значения, не приводящего к деградации производительности. Хорошее базовое
 * значение лежит в диапазоне 8-10, но если ваш сервер достаточно мощный, то можно
 * задать и больше. Данный скрипт ищет максимальное значение, при котором
 * хеширование уложится в 50 миллисекунд.
 */
$timeTarget = 0.05; // 50 миллисекунд.

$cost = 8;
do {
    $cost++;
    $start = microtime(true);
    password_hash("test", PASSWORD_BCRYPT, ["cost" => $cost]);
    $end = microtime(true);
} while (($end - $start) < $timeTarget);

echo "Оптимальная стоимость: " . $cost;
?>
```

Результатом виконання цього прикладу буде щось подібне:

```
Оптимальная стоимость: 10
```

**Приклад #4 Приклад використання **passwordhash()** з Argon2i**

```php
<?php
echo 'Хеш Argon2i: ' . password_hash('rasmuslerdorf', PASSWORD_ARGON2I);
?>
```

Результатом виконання цього прикладу буде щось подібне:

```
Хеш Argon2i: $argon2i$v=19$m=1024,t=2,p=2$YzJBSzV4TUhkMzc3d3laeg$zqU/1IN0/AogfP4cmSJI1vc8lpXRW9/S0sYY2i2jHT0
```

### Примітки

**Застереження**

Рекомендується використовувати автоматичну генерацію солі. Дана функція самостійно створить хорошу сіль, якщо ви не заважатимете їй підсовуючи свою.

Як було зазначено вище, опція `salt` була оголошена застарілою в PHP 7.0 і викликатиме відповідне попередження. Підтримка ручного завдання солі може бути видалена у новіших версіях.

> **Зауваження**
> 
> Рекомендується протестувати цю функцію на залізі для визначення оптимального значення алгоритмічної складності. Переконайтеся, що з вибраною складністю функція виконується швидше за 100 мілісекунд для інтерактивних систем. Скрипт, показаний вище, допоможе вам вибрати відповідне значення.

> **Зауваження**: Оновлення підтримуваних алгоритмів для цієї функції (або зміна значення за замовчуванням) повинні дотримуватися правил:
> 
> -   Будь-який новий алгоритм повинен бути присутнім у ядрі як мінімум 1 повний реліз PHP для того, щоб його можна було встановити за замовчуванням. Таким чином, якщо, наприклад, новий алгоритм був доданий в 7.5.5, то задати за замовчуванням його можна буде тільки в 7.7 (7.6 буде тим самим повним релізом, протягом якого він має бути присутнім, від 7.6.0 до 7.7.0 ). Але якщо новий алгоритм доданий до 7.6.0, то його також можна буде задати за замовчуванням до 7.7.0.
> -   Алгоритм за замовчуванням може бути змінений тільки в повному релізі (7.3.0, 8.0.0 тощо), але не в проміжних. Єдиний виняток - якщо в поточному алгоритмі знайдена критична вразливість.

### Дивіться також

-   [passwordverify()](function.password-verify.md) - Перевіряє, чи пароль хешу відповідає
-   [crypt()](function.crypt.md) - Необоротне хешування рядка
-   [» Користувацька реалізація](https://github.com/ircmaxell/password_compat)
-   [sodiumcryptopwhashstr()](function.sodium-crypto-pwhash-str.md) - Отримати ASCII-кодований хеш
