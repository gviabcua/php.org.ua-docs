---
navigation:
  - mysqlnd.memory.md: « Управление памятью
  - mysqlnd.plugin.mysql-proxy.html: Сравнение плагинов mysqlnd с MySQL Proxy »
  - index.md: PHP Manual
  - book.mysqlnd.md: Mysqlnd
title: API для плагінів до вбудованого драйвера MySQL
---
# API для плагінів до вбудованого драйвера MySQL

## Зміст

-   [Сравнение плагинов mysqlnd с MySQL Proxy](mysqlnd.plugin.mysql-proxy.html)
-   [Получение API плагинов mysqlnd](mysqlnd.plugin.obtaining.md)
-   [Архитектура плагинов MySQL Native Driver](mysqlnd.plugin.architecture.md)
-   [API плагінів mysqlnd](mysqlnd.plugin.api.md)
-   [Начинаем разработку плагина mysqlnd](mysqlnd.plugin.developing.md)

API для плагінів до вбудованого драйвера MySQL є особливістю вбудованого драйвера MySQL (`mysqlnd`). Плагіни `mysqlnd` працюють на рівні між PHP-додатками та сервером MySQL. Це схоже на роботу MySQL Proxy. Плагіни `mysqlnd` можуть реалізовувати стандартні завдання MySQL Proxy, такі як балансування навантаження, моніторинг та оптимізація швидкодії. При цьому, внаслідок іншої архітектури та місця розташування, плагіни `mysqlnd` немає деяких недоліків MySQL Proxy. Наприклад, немає єдиної точки відмови, не потрібно встановлення окремого proxy-сервера і немає потреби у вивченні нової мови програмування Lua.

Плагін `mysqlnd` можна розглядати як модуль `mysqlnd`. Плагіни можуть перехоплювати більшу частину функцій `mysqlnd`. Ці функції викликаються модулями PHP, такими як `ext/mysql` `ext/mysqli` і `PDO_MYSQL`. У кінцевому рахунку, плагіни `mysqlnd` можуть перехоплювати всі запити, зроблені цими модулями клієнтської програми.

Внутрішні дзвінки функцій `mysqlnd` також можуть бути перехоплені чи замінені. Обмеження щодо роботи з внутрішньою таблицею функцій `mysqlnd` відсутні. Можна налаштувати все таким чином, що під час виклику певних функцій `mysqlnd` з модулів, які використовують `mysqlnd`, цей виклик перенаправлятиметься у відповідну функцію плагіна `mysqlnd`. Можливість маніпулювати внутрішньою таблицею функцій `mysqlnd` дає плагінам максимум гнучкості.

Плагіни `mysqlnd` фактично є модулями PHP, написаними на C і використовують API для плагінів `mysqlnd` (вбудований у драйвер `mysqlnd`). Плагіни можуть бути повністю прозорими для програм PHP. Змінювати програму не потрібно, оскільки плагіни працюють на іншому рівні. Плагіни `mysqlnd` можна розглядати як працюючі на рівень нижче `mysqlnd`

Нижченаведений список показує кілька можливих варіантів плагінів `mysqlnd`

-   Балансування навантаження
    
    -   Поділ читання та запису. Прикладом є модуль PECL/mysqlndms (Master Slave). Модель розділяє запити на читання та запис для налаштування реплікації.
        
    -   Відмовостійкість
        
    -   Рівномірне завантаження, запити на найменш завантажений сервер
        
-   Моніторинг
    
    -   Логування запитів
        
    -   Аналіз запитів
        
    -   Аудит запитів. Прикладом є модуль PECL/mysqlndsip (SQL Injection Protection, захист від ін'єкцій SQL). Модель аналізує запити та виконує лише відповідні під набір правил.
        
-   Продуктивність.
    
    -   Кешування. Прикладом є модуль PECL/mysqlndqc (Query Cache, кешування запитів).
        
    -   Обмеження ресурсів, що виділяються запитом
        
    -   Шардінг. Прикладом є модуль PECL/mysqlndmc (Multi Connect). Модель намагається розбити запит SELECT на n частин, використовуючи SELECT ... LIMIT part1, SELECT LIMIT partn. Він надсилає запити на окремі MySQL-сервера та збирає результат на клієнта.
        

*Доступні плагіни до вбудованого драйвера MySQL*

Існує кілька вже доступних плагінів mysqlnd. Список включає:

-   *PECL/mysqlndмк* - Multi Connect plugin.
    
-   *PECL/mysqlndмс* - Master Slave plugin.
    
-   *PECL/mysqlndгк* - Query Cache (Кешування запитів) plugin.
    
-   *PECL/mysqlndpscache* - Prepared Statement Handle Cache plugin (обробка кешування підготовлених запитів)
    
-   *PECL/mysqlndsip* - SQL Injection Protection plugin (захист від SQL-ін'єкцій)
    
-   *PECL/mysqlndїх* - User Handler plugin (обробка користувачів)
