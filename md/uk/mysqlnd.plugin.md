---
navigation:
  - mysqlnd.memory.md: « Управління пам'яттю
  - mysqlnd.plugin.mysql-proxy.md: Порівняння плагінів mysqlnd з MySQL Proxy »
  - index.md: PHP Manual
  - book.mysqlnd.md: Mysqlnd
title: API для плагінів до вбудованого драйвера MySQL
origin_hash: ddf652f5224dc9f1fa9671347921941ca401ea50
---
# API для плагінів до вбудованого драйвера MySQL

## Зміст

-   [Порівняння плагінів mysqlnd з MySQL Proxy](mysqlnd.plugin.mysql-proxy.md)
-   [Отримання API плагінів mysqlnd](mysqlnd.plugin.obtaining.md)
-   [Архитектура плагинов MySQL Native Driver](mysqlnd.plugin.architecture.md)
-   [API плагінів mysqlnd](mysqlnd.plugin.api.md)
-   [Розпочинаємо розробку плагіна mysqlnd](mysqlnd.plugin.developing.md)

API для плагінів до вбудованого драйвера MySQL є особливістю вбудованого драйвера MySQL (`mysqlnd`). Плагіни `mysqlnd` працюють на рівні між PHP-додатками та сервером MySQL. Це схоже на роботу MySQL Proxy. Плагіни `mysqlnd` можуть реалізовувати стандартні завдання MySQL Proxy, такі як балансування навантаження, моніторинг та оптимізація швидкодії. При цьому, внаслідок іншої архітектури та місця розташування, плагіни `mysqlnd` немає деяких недоліків MySQL Proxy. Наприклад, немає єдиної точки відмови, не потрібно встановлення окремого proxy-сервера і немає потреби у вивченні нової мови програмування Lua.

Плагин`mysqlnd` можна розглядати як модуль `mysqlnd`. Плагіни можуть перехоплювати більшу частину функцій `mysqlnd`. Ці функції викликаються модулями PHP, такими як `ext/mysql` `ext/mysqli`и`PDO_MYSQL`. Зрештою, плагіни `mysqlnd` можуть перехоплювати всі запити, зроблені цими модулями клієнтської програми.

Внутрішні дзвінки функцій `mysqlnd` також можуть бути перехоплені чи замінені. Обмеження щодо роботи з внутрішньою таблицею функцій `mysqlnd` відсутні. Можна налаштувати все таким чином, що під час виклику певних функцій `mysqlnd` з модулів, які використовують `mysqlnd`, цей виклик перенаправлятиметься у відповідну функцію плагіна `mysqlnd`. Можливість маніпулювати внутрішньою таблицею функцій `mysqlnd` дає плагінам максимум гнучкості.

Плагіни `mysqlnd` фактично є модулями PHP, написаними на C і використовують API для плагінів `mysqlnd` (вбудований у драйвер `mysqlnd`). Плагіни можуть бути повністю прозорими для програм PHP. Змінювати програму не потрібно, оскільки плагіни працюють на іншому рівні. Плагіни `mysqlnd` можна розглядати як працюючі на рівень нижче `mysqlnd`

Нижченаведений список показує кілька можливих варіантів плагінів `mysqlnd`

-   Балансування навантаження
    
    -   Поділ читання та запису. Прикладом є модуль PECL/mysqlnd\_ms (Master Slave). Модель розділяє запити на читання та запис для налаштування реплікації.
        
    -   Відмовостійкість
        
    -   Рівномірне завантаження, запити на найменш завантажений сервер
        
-   Моніторинг
    
    -   Логування запитів
        
    -   Аналіз запитів
        
    -   Аудит запитів. Прикладом є модуль PECL/mysqlnd\_sip (SQL Injection Protection, захист від ін'єкцій SQL). Модель аналізує запити та виконує лише відповідні під набір правил.
        
-   Продуктивність.
    
    -   кешування. Прикладом є модуль PECL/mysqlnd\_qc (Query Cache, кешування запитів).
        
    -   Обмеження ресурсів, що виділяються запитом
        
    -   Шардінг. Прикладом є модуль PECL/mysqlnd\_mc (Multi Connect). Модель намагається розбити запит SELECT на n частин, використовуючи SELECT ... LIMIT part\_1, SELECT LIMIT part\_n. Він надсилає запити на окремі MySQL-сервера та збирає результат на клієнта.
        

**Доступні плагіни до вбудованого драйвера MySQL**

Існує кілька вже доступних плагінів mysqlnd. Список включає:

-   **PECL/mysqlnd\_mc**\- Multi Connect plugin.
    
-   **PECL/mysqlnd\_ms**\- Master Slave plugin.
    
-   **PECL/mysqlnd\_qc**\- Query Cache (Кешування запитів) plugin.
    
-   **PECL/mysqlnd\_pscache**\- Prepared Statement Handle Cache plugin (обробка кешування підготовлених запитів)
    
-   **PECL/mysqlnd\_sip**\- SQL Injection Protection plugin (захист від SQL-ін'єкцій)
    
-   **PECL/mysqlnd\_uh**\- User Handler plugin (обробка користувачів)
