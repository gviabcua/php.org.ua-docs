Упакувати дані у бінарний рядок

-   [« ignoreuserabort](function.ignore-user-abort.html)
    
-   [phpstripwhitespace »](function.php-strip-whitespace.html)
    
-   [PHP Manual](index.html)
    
-   [Різні функції](ref.misc.html)
    
-   Упакувати дані у бінарний рядок
    

# pack

(PHP 4, PHP 5, PHP 7, PHP 8)

pack — Упакувати дані в бінарний рядок

### Опис

```methodsynopsis
pack(string $format, mixed ...$values): string
```

Упаковує задані аргументи у бінарний рядок відповідно до формату у параметрі `format`

Ідея цієї функції була запозичена з Perl і всі коди форматування працюють так само. Однак є деякі відсутні коди форматування, такі як код формату Perl "u".

Необхідно мати на увазі, що відмінність між знаковими та беззнаковими значеннями впливає лише на функцію [unpack()](function.unpack.html), тоді як функція **pack()** дає однаковий результат для знакових та беззнакових кодів формату.

### Список параметрів

`format`

Параметр `format` задається у вигляді рядка і складається з кодів формату та опціонального аргументу повторення. Аргумент може бути цілочисленним, або `*` для повторення остаточно введених даних. Для a, A, h, H число повторень визначає те, скільки символів взято від одного аргументу даних, для @ - це абсолютна позиція для розміщення наступних даних, для решти повторень визначає як багато аргументів даних було оброблено і упаковано в результуючий бінарний рядок .

Формати, що працюють на даний момент:

**Символи форматів функції **pack()****

| Код | Описание                                                     |
|-----|--------------------------------------------------------------|
| а   | Рядок (string) з NUL-заповненням                             |
| А   | Рядок (string) зі SPACE-заповненням                          |
| х   | Hex-рядок (Hex string), з нижнього розряду                   |
| Х   | Hex-рядок (Hex string), з верхнього розряду                  |
| з   | знаковий символ (char)                                       |
| З   | беззнаковий символ (char)                                    |
| з   | знаковий short (завжди 16 біт, машинний байтовий порядок)    |
| З   | беззнаковий short (завжди 16 біт, машинний байтовий порядок) |
| н   | беззнаковий short (завжди 16 біт, порядок big endian)        |
| в   | беззнаковий short (завжди 16 біт, порядок little endian)     |
| і   | знаковий integer (машинно-залежний розмір та порядок)        |
| І   | беззнаковий integer (машинно-залежний розмір та порядок)     |
| л   | знаковий long (завжди 32 біт, машинний порядок)              |
| Л   | беззнаковий long (завжди 32 біт, машинний порядок)           |
| Н   | беззнаковий long (завжди 32 біт, порядок big endian)         |
| У   | беззнаковий long (завжди 32 біт, порядок little endian)      |
| до  | signed long long (завжди 64 bit, машинний порядок)           |
| До  | беззнаковий long long (завжди 64 bit, машинний порядок)      |
| Ж   | беззнаковий long long (завжди 64 bit, порядок big endian)    |
| П   | беззнаковий long long (завжди 64 bit, порядок little endian) |
| ф   | float (машинно-залежні розмір та уявлення)                   |
| г   | float (машинно-залежний розмір, порядок байт little endian)  |
| Г   | float (машинно-залежний розмір, порядок байт big endian)     |
| д   | double (машинно-залежні розмір та уявлення)                  |
| е   | double (машинно-залежний розмір, порядок байт little endian) |
| Е   | double (машинно-залежний розмір, порядок байт big endian)    |
| з   | байт NUL                                                     |
| З   | Резервування одного байта                                    |
| З   | Рядок (string) з NUL-заповненням                             |
|     | NUL-заповнення до абсолютної позиції                         |

`values`

### Значення, що повертаються

Повертає бінарний рядок, який містить дані або **`false`** у разі виникнення помилки.

### список змін

| Версия | Описание                                                                                             |
|--------|------------------------------------------------------------------------------------------------------|
|        | Функція більше не повертає **`false`** у разі виникнення помилки.                                    |
|        | Типи float і double підтримують як зворотний, і прямий порядок передачі байтів.                      |
|        | Додані коди "e", "E", "g" та "G" для підтримки примусової вказівки порядку байт для float та double. |

### Приклади

**Приклад #1 Приклад використання **pack()****

```php
<?php
$binarydata = pack("nvc*", 0x1234, 0x5678, 65, 66);
?>
```

Отриманий бінарний рядок довжиною 6 байт міститиме послідовність байтів 0x12, 0x34, 0x78, 0x56, 0x41, 0x42.

### Примітки

**Застереження**

PHP зберігає значення типу int як знакові з машинно-залежним розміром (C тип `long`). Всі числа, передані як int, але виходять за межі цього будуть збережені з типом float. У упаковці цих float як int, вони будуть передані з типом int. Це може збігатися, так і немає із заданим шаблоном.

Найчастішим є випадок, коли упаковуються беззнакові числа типу int. У системах, де int має розмір 32 біта, число зазвичай передається за тим самим шаблоном, якби int був беззнаковим (хоча, це залежить від певних перетворень із знакове на беззнакове, згідно зі стандартом С). У системах, де тип int має розмір 64 біта, тип float не має мантиси, достатньої за розміром для зберігання значення без втрати точності. Якщо ці системи також мають простий 64-бітний тип `int` (Більшість UNIX систем не мають), то єдиним шляхом для використання формату `I` у верхньому розряді є створення негативних int значень з тим самим уявленням як і певному беззнаковом значенні.

### Дивіться також

-   [unpack()](function.unpack.html) - Розпакувати дані з бінарного рядка