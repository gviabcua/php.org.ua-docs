---
navigation:
  - function.pcntl-getpriority.md: pcntlgetpriority
  - function.pcntl-setpriority.md: pcntlsetpriority »
  - index.md: PHP Manual
  - ref.pcntl.md: Функції PCNTL
title: pcntlrfork
---
# pcntlrfork

(PHP 8> = 8.1.0)

pcntlrfork - Взаємодіє з ресурсами процесу

### Опис

```methodsynopsis
pcntl_rfork(int $flags, int $signal = 0): int
```

Взаємодіє з ресурсами процесу.

### Список параметрів

`flags`

Параметр `flags` визначає, які ресурси процесу (батьківського) поділяються новим процесом (дочірнім) або ініціалізуються в значення за умовчанням.

`flags` є логічним OR (або) деякого підмножини з:

-   **`RFPROC`**: Якщо встановлено, створюється новий процес; інакше зміни зачіпають поточний процес.
-   **`RFNOWAIT`**: Якщо встановлено, дочірній процес буде відокремлений від батьківського. При виході дочірній процес не залишатиме статусу для батька, щоб забрати його.
-   **`RFFDG`**: Якщо встановлено, копіюється таблиця дескрипторів файлів сторони, що викликає; В іншому випадку два процеси використовують одну таблицю.
-   **`RFCFDG`**: Якщо встановлено, новий процес починається з чистої таблиці дескрипторів файлів. Взаємовиключний прапор з `RFFDG`
-   **`RFLINUXTHPN`**: Якщо встановлено, ядро ​​повертатиме SIGUSR1 замість SIGCHILD під час виходу з дочірнього потоку. Призначений для повідомлення батьківського процесу про вихід з клону Linux.

`signal`

Номер сигналу.

### Значення, що повертаються

У разі успішного виконання у потоці виконання батьківського процесу повертається PID дочірнього процесу, а у потоці виконання дочірнього процесу повертається `0`. У разі виникнення помилки в контексті батька буде повернено `-1`, дочірній процес не буде створено і буде видано помилку PHP.

### Приклади

**Приклад #1 Приклад використання **pcntlrfork()****

```php
<?php

$pid = pcntl_rfork(RFNOWAIT|RFTSIGZMB, SIGUSR1);
if ($pid > 0) {
  // Родительский процесс.
  var_dump($pid);
} else {
  // Дочерний процесс.
  var_dump($pid);
  sleep(2); // поскольку дочерний процесс не ждёт, мы видим его "pid".
}
?>
```

Результатом виконання цього прикладу буде щось подібне:

```
int(77093)
int(0)
```

### Дивіться також

-   [pcntlfork()](function.pcntl-fork.md) - Розгалужити (fork) поточний запущений процес
-   [pcntlwaitpid()](function.pcntl-waitpid.md) - Очікує чи повертає статус породженого дочірнього процесу
-   [pcntlsignal()](function.pcntl-signal.md) - Встановлення оброблювача сигналу
-   [clisetprocesstitle()](function.cli-set-process-title.md) - Встановлює заголовок процесу
