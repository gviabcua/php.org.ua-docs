---
navigation:
  - function.pcntl-getpriority.md: « pcntl\_getpriority
  - function.pcntl-setpriority.md: pcntl\_setpriority »
  - index.md: PHP Manual
  - ref.pcntl.md: Функції PCNTL
title: pcntl\_rfork
origin_hash: ddf652f5224dc9f1fa9671347921941ca401ea50
---
# pcntl\_rfork

(PHP 8 >= 8.1.0)

pcntl\_rfork - Взаємодіє з ресурсами процесу

### Опис

```methodsynopsis
pcntl_rfork(int $flags, int $signal = 0): int
```

Взаємодіє з ресурсами процесу.

### Список параметрів

`flags`

Параметр`flags` визначає, які ресурси процесу (батьківського) поділяються новим процесом (дочірнім) або ініціалізуються в значення за умовчанням.

`flags` є логічним OR (або) деякого підмножини з:

-   **`RFPROC`**: Якщо встановлено, створюється новий процес; інакше зміни зачіпають поточний процес.
-   **`RFNOWAIT`**: Якщо встановлено, дочірній процес буде відокремлений від батьківського. При виході дочірній процес не залишатиме статусу для батька, щоб забрати його.
-   **`RFFDG`**: Якщо встановлено, копіюється таблиця дескрипторів файлів сторони, що викликає; В іншому випадку два процеси використовують одну таблицю.
-   **`RFCFDG`**: Якщо встановлено, новий процес починається з чистої таблиці дескрипторів файлів. Взаємовиключний прапор з`RFFDG`
-   **`RFLINUXTHPN`**: Якщо встановлено, ядро ​​повертатиме SIGUSR1 замість SIGCHILD під час виходу з дочірнього потоку. Призначений для повідомлення батьківського процесу про вихід з клону Linux.

`signal`

Номер сигналу.

### Значення, що повертаються

У разі успішного виконання у потоці виконання батьківського процесу повертається PID дочірнього процесу, а у потоці виконання дочірнього процесу повертається В случае возникновения ошибки в контексте родителя будет возвращено`-1`, дочірній процес не буде створено і буде видано помилку PHP.

### Приклади

**Пример #1 Пример использования**pcntl\_rfork()\*\*\*\*

```php
<?php

$pid = pcntl_rfork(RFNOWAIT|RFTSIGZMB, SIGUSR1);
if ($pid > 0) {
  // Родительский процесс.
  var_dump($pid);
} else {
  // Дочерний процесс.
  var_dump($pid);
  sleep(2); // поскольку дочерний процесс не ждёт, мы видим его "pid".
}
?>
```

Висновок наведеного прикладу буде схожим на:

```
int(77093)
int(0)
```

### Примітки

> **Зауваження** :
> 
> Функція доступна лише у системах BSD.

### Дивіться також

-   [pcntl\_fork()](function.pcntl-fork.md) \- Розгалужити (fork) поточний запущений процес
-   [pcntl\_waitpid()](function.pcntl-waitpid.md) \- Очікує чи повертає статус породженого дочірнього процесу
-   [pcntl\_signal()](function.pcntl-signal.md) \- Встановлення оброблювача сигналу
-   [cli\_set\_process\_title()](function.cli-set-process-title.md) \- Встановлює заголовок процесу
