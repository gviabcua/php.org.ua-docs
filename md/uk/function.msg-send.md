---
navigation:
  - function.msg-remove-queue.md: « msgremovequeue
  - function.msg-set-queue.md: msgsetqueue »
  - index.md: PHP Manual
  - ref.sem.md: Функції семафорів
title: msgsend
---
# msgsend

(PHP 4> = 4.3.0, PHP 5, PHP 7, PHP 8)

msgsend — Надіслати повідомлення до черги повідомлень

### Опис

```methodsynopsis
msg_send(    SysvMessageQueue $queue,    int $message_type,    string|int|float|bool $message,    bool $serialize = true,    bool $blocking = true,    int &$error_code = null): bool
```

**msgsend()** надсилає повідомлення `message` з типом `message_type` (має бути більше 0) у чергу повідомлень, вказану параметром `queue`

### Список параметрів

`queue`

Черга повідомлень.

`message_type`

Тип повідомлення. Має бути більше 0.

`message`

Тіло повідомлення.

> **Зауваження**
> 
> Якщо `serialize` поставлено як **`false`**, ПОВИННО бути типу: string, int, float або bool. Інакше буде виведено попередження.

`serialize`

Необов'язковий параметр `serialize` керує тим, як буде надіслано повідомлення `message`. За замовчуванням `serialize` має значення \*\*`true`\*\*що означає серіалізацію `message` перед відправкою тим самим механізмом, який використовується модулем обробки сесій. Це дозволяє відправляти складні масиви та об'єкти в інші PHP-скрипти, або якщо ви використовуєте серіалізацію WDDX, в інші сумісні з WDDX клієнти.

`blocking`

Якщо повідомлення, що розміщується в чергу, занадто велике, ваш скрипт буде очікувати прочитання повідомлень іншим процесом і звільнення місця під повідомлення, яке ви надсилаєте. Це називається блокуванням; ви можете вимкнути цю можливість, встановивши для `blocking` значення **`false`**, в цьому випадку **msgsend()** буде негайно повертати **`false`** якщо повідомлення надто велике, і встановлювати необов'язковий параметр `error_code` на значення **`MSG_EAGAIN`**, що буде вказувати вам на необхідність спробувати надіслати повідомлення дещо пізніше.

`error_code`

Якщо функція відпрацює невдало, цей код буде записаний в системну змінну errno.

### Значення, що повертаються

Повертає **`true`** у разі успішного виконання або **`false`** у разі виникнення помилки.

При успішному завершенні структура даних черги повідомлень оновиться так: `msg_lspid` буде містити ідентифікатор процесу, що викликав, `msg_qnum` збільшиться на 1, а `msg_stime` міститиме поточний час.

### список змін

| Версия | Описание |
| --- | --- |
|  | Параметр `queue` тепер чекає екземпляр [SysvMessageQueue](class.sysvmessagequeue.md); раніше очікувався ресурс (resource). |

### Дивіться також

-   [msgremovequeue()](function.msg-remove-queue.md) - Видалення черги повідомлень
-   [msgreceive()](function.msg-receive.md) - Отримання повідомлення з черги повідомлень
-   [msgstatqueue()](function.msg-stat-queue.md) - Отримання інформації із структури даних черги повідомлень
-   [msgsetqueue()](function.msg-set-queue.md) - Встановлення інформації у структурі даних черги повідомлень
