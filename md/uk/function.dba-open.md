Відкриває базу даних

-   [« dbanextkey](function.dba-nextkey.html)
    
-   [dbaoptimize »](function.dba-optimize.html)
    
-   [PHP Manual](index.md)
    
-   [Функції DBA](ref.dba.md)
    
-   Відкриває базу даних
    

# dbaopen

(PHP 4, PHP 5, PHP 7, PHP 8)

dbaopen — Відкриває базу даних

### Опис

```methodsynopsis
dba_open(    string $path,    string $mode,    string $handler = ?,    string ...$args): resource|false
```

**dbaopen()** встановлює екземпляр бази даних шляхом `path` в режимі `mode` використовуючи обробник `handler`

### Список параметрів

`path`

Шлях до файлів бази даних.

`mode`

`r` для режиму читання, `w` для режиму читання/запису з вже існуючою базою даних . `c` для режиму читання/запису та створення бази даних, якщо вона ще не була створена, та `n` для створення, обрізання та доступу для читання/запису. База даних створюється з архітектурою BTree, інші архітектури (на зразок Hash або Queue) не підтримуються.

Додатково, за допомогою наступного символу, можна встановити режим блокування бази даних . `l` для блокування бази даних за допомогою файлу .lck, або `d` для самостійного блокування засобами самої бази. Важливо, щоб усі ваші програми робили це узгоджено.

Якщо ви хочете просто перевірити доступ і не хочете чекати на звільнення блокування, ви можете додати третій символ `t`. Якщо ви абсолютно впевнені, що вам не потрібно використовувати блокування баз даних, ви можете використовувати символ `-` замість `l` або `d`. Якщо жоден із символів: `d` `l` або `-` не заданий, база даних використовуватиме режим `d`

> **Зауваження**
> 
> Одночасно може бути лише один процес, що пише в базу даних. Коли ви використовуєте dba на веб-сервері, і більш ніж один запит вимагає запису до бази даних, вони можуть це робити лише по черзі. Також, у момент читання запис не доступний. Модуль dba використовує блокування для запобігання небажаній поведінці. Вивчіть наступну таблицю:
> 
> **Блокування DBA**
> 
> | уже открыта | `mode` = "rl" | `mode` = "rlt" | `mode` = "wl" | `mode` = "wlt" | `mode` = "rd" | `mode` = "rdt" | `mode` = "wd" | `mode` = "wdt" |
> | --- | --- | --- | --- | --- | --- | --- | --- | --- |
> | не відкрита | ок | ок | ок | ок | ок | ок | ок | ок |
> | `mode` = "rl" | ок | ок | wait | false | illegal | illegal | illegal | illegal |
> | `mode` = "wl" | wait | false | wait | false | illegal | illegal | illegal | illegal |
> | `mode` = "rd" | illegal | illegal | illegal | illegal | ок | ок | wait | false |
> | `mode` = "wd" | illegal | illegal | illegal | illegal | wait | false | wait | false |
> 
> -   ok: другий виклик буде успішним.
> -   wait: другий виклик буде чекати, доки перший не викличе [dbaclose()](function.dba-close.html)
> -   false: другий виклик поверне **`false`**
> -   illegal: ви не можете змішувати модифікатори `"l"` і `"d"` у параметрі `mode`

`handler`

Ім'я [обработчика](dba.requirements.md), який буде використовуватися для доступу на шляху `path`. Йому передаються всі необов'язкові параметри, задані в **dbaopen()**

`args`

Необов'язковий рядок (string) параметрів, що передаються драйверу.

Драйвери `cdb` `cdb_make` `flatfile` `inifile` `qdbm` і `tcadb` не підтримують додаткові параметри.

Драйвери `db1` `db2` `db3` `db4` `dbm` `gdbm`, і `ndbm` підтримують єдиний додатковий параметр `$filemode`що має те саме значення, що і параметр `$mode` функції [chmod()](function.chmod.md) і за умовчанням дорівнює `0644`

Драйвер `lmdb` приймає два додаткові параметри. Перший дозволяє вказати `$filemode` (дивіться опис вище), а другий - `$mapsize`де значення має бути кратним розміру сторінки ОС або нуль, щоб використовувати розмір карти за замовчуванням. Параметр `$mapsize` підтримується починаючи з PHP 7.3.14 та 7.4.2, відповідно.

### Значення, що повертаються

Повертає обробник у разі успішного виконання або **`false`** у разі виникнення помилки.

### список змін

| Версия | Описание |
| --- | --- |
|  | Драйвер `lmdb` тепер підтримує додатковий параметр `$mapsize` |

### Дивіться також

-   [dbapopen()](function.dba-popen.html) - встановити постійний екземпляр бази даних
-   [dbaclose()](function.dba-close.html) - Закриває базу даних DBA