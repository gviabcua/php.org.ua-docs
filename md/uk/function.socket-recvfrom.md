---
navigation:
  - function.socket-recv.html: « socketrecv
  - function.socket-recvmsg.html: socketrecvmsg »
  - index.md: PHP Manual
  - ref.sockets.md: Функции сокета
title: socketrecvfrom
---
# socketrecvfrom

(PHP 4> = 4.1.0, PHP 5, PHP 7, PHP 8)

socketrecvfrom — Отримує дані із сокету, незалежно від того, під'єднаний він чи ні

### Опис

```methodsynopsis
socket_recvfrom(    Socket $socket,    string &$data,    int $length,    int $flags,    string &$address,    int &$port = null): int|false
```

Функція **socketrecvfrom()** отримує `length` байт даних у `data` з адреси `address` на порту `port` (якщо сокет не типу **`AF_UNIX`**) використовуючи сокет `socket`. Функція **socketrecvfrom()** може бути використана для отримання даних як з підключених, так і з не підключених сокетів. Додатково один або більше прапорів можуть бути вказані для того, щоб змінити поведінку функції.

Параметри `address` і `port` повинні бути передані за посиланням. Якщо сокет не орієнтований на з'єднання, `address` має бути встановлений як адресу інтернет-протоколу віддаленого хоста, або як шлях до сокету UNIX. Якщо сокет не орієнтований на з'єднання, `address` повинен бути **`null`**. Додатково `port` повинен містити порт дистанційного хоста для не підключених сокетів типу **`AF_INET`** і **`AF_INET6`**

> **Зауваження**: Ця функція безпечна для обробки даних у двійковій формі.

### Список параметрів

`socket`

Параметр `socket` має бути екземпляром [Socket](class.socket.md), попередньо створеним за допомогою функції socketcreate().

`data`

Отримані дані будуть передані до змінної, вказаної за допомогою параметра `data`

`length`

З віддаленого хоста буде отримано до `length` байт.

`flags`

Значення параметру `flags` може бути будь-якою комбінацією наступних прапорів, об'єднаних за допомогою бінарного оператора OR (`|`) Operator.

**Можливі значення для параметра `flags`**

| Флаг | Описание |
| --- | --- |
| **`MSG_OOB`** | Обробляти позасмугові (out-of-band) дані. |
| **`MSG_PEEK`** | Отримувати дані із початку черги, не видаляючи їх. |
| **`MSG_WAITALL`** | Блокувати виконання скрипту доти, доки як мінімум `length` не буде отримано. Однак, якщо буде отримано сигнал або віддалений хост від'єднається, функція може повернути менше даних. |
| **`MSG_DONTWAIT`** | Якщо цей прапор встановлено, функція повернеться навіть якщо зазвичай блокуватиме виконання скрипта. |

`address`

Якщо сокет типу **`AF_UNIX`** `address` - Це шлях до файлу. В іншому випадку, для неприєднаних сокетів, параметр `address` - це IP-адреса, віддаленого хоста, або \*\*`null`\*\*якщо сокет орієнтований на з'єднання.

`port`

Цей аргумент застосовується тільки до сокетів **`AF_INET`** і **`AF_INET6`**, та вказує віддалений порт, з якого будуть отримані дані. Якщо сокет орієнтований на з'єднання, `port` буде **`null`**

### Значення, що повертаються

**socketrecvfrom()** повертає кількість отриманих байт або **`false`**, якщо сталася помилка. Фактичний код помилки можна отримати за допомогою виклику функції [socketlasterror()](function.socket-last-error.html). Цей код помилки може бути переданий функції [socketstrerror()](function.socket-strerror.md) для отримання текстового опису помилки.

### список змін

| Версия | Описание |
| --- | --- |
|  | `socket` тепер екземпляр класу [Socket](class.socket.md); раніше був ресурсом (resource). |

### Приклади

**Приклад #1 Приклад використання **socketrecvfrom()****

```php
<?php

$socket = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP);
socket_bind($socket, '127.0.0.1', 1223);

$from = '';
$port = 0;
socket_recvfrom($socket, $buf, 12, 0, $from, $port);

echo "Получено $buf с удалённого адреса $from и удалённого порта $port" . PHP_EOL;
?>
```

Цей приклад відкриє UDP-сокет на порту 1223 за адресою 127.0.0.1 та виведе максимум 12 символів, отриманих з віддаленого хоста.

### Дивіться також

-   [socketrecv()](function.socket-recv.md) - Отримує дані із приєднаного сокету
-   [socketsend()](function.socket-send.md) - Надсилає дані в приєднаний сокет
-   [socketsendto()](function.socket-sendto.md) - Надсилає повідомлення до сокету, незалежно від того, під'єднаний він чи ні
-   [socketcreate()](function.socket-create.md) - створює сокет (кінцеву точку для обміну інформацією)
