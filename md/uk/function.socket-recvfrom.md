---
navigation:
  - function.socket-recv.md: « socket\_recv
  - function.socket-recvmsg.md: socket\_recvmsg »
  - index.md: PHP Manual
  - ref.sockets.md: Опції сокету
title: socket\_recvfrom
origin_hash: ddf652f5224dc9f1fa9671347921941ca401ea50
---
# socket\_recvfrom

(PHP 4 >= 4.1.0, PHP 5, PHP 7, PHP 8)

socket\_recvfrom — Отримує дані із сокету, незалежно від того, під'єднаний він чи ні

### Опис

```methodsynopsis
socket_recvfrom(    Socket $socket,    string &$data,    int $length,    int $flags,    string &$address,    int &$port = null): int|false
```

Функция**socket\_recvfrom()** отримує `length` байт даних у `data`из адреса`address`на порту`port` (якщо сокет не типу **`AF_UNIX`**) використовуючи сокет `socket`Функция**socket\_recvfrom()** може бути використана для отримання даних як з підключених, так і з не підключених сокетів. Додатково один або більше прапорів можуть бути вказані для того, щоб змінити поведінку функції.

Параметри `address`и`port` повинні бути передані за посиланням. Якщо сокет не орієнтований на з'єднання, `address` має бути встановлена ​​як адреса інтернет-протоколу віддаленого хоста, або як шлях до сокету UNIX. Якщо сокет не орієнтований на з'єднання, `address` повинен бути \*\*`null`\*\*Дополнительно,`port` повинен містити порт дистанційного хоста для не підключених сокетів типу **`AF_INET`**и**`AF_INET6`**

> **Зауваження**: Ця функція безпечна для обробки даних у двійковій формі.

### Список параметрів

`socket`

Параметр`socket` має бути екземпляром [Socket](class.socket.md), попередньо створеним за допомогою функції socket\_create().

`data`

Отримані дані будуть передані до змінної, вказаної за допомогою параметра `data`

`length`

З віддаленого хоста буде отримано до `length`байт.

`flags`

Значение параметра`flags` може бути будь-якою комбінацією наступних прапорів, об'єднаних за допомогою бінарного оператора OR ( ) operator.

**Можливі значення для параметра `flags`**

| Флаг | Опис |
| --- | --- |
| **`MSG_OOB`** | Обробляти позасмугові (out-of-band) дані. |
| **`MSG_PEEK`** | Отримувати дані із початку черги, не видаляючи їх. |
| **`MSG_WAITALL`** | Блокувати виконання скрипту доти, доки як мінімум `length` не буде отримано. Однак, якщо буде отримано сигнал або віддалений хост від'єднається, функція може повернути менше даних. |
| **`MSG_DONTWAIT`** | Якщо цей прапор встановлений, функція повернеться навіть якщо зазвичай блокуватиме виконання скрипта. |

`address`

Якщо сокет типу **`AF_UNIX`** `address` - Це шлях до файлу. В іншому випадку, для непід'єднаних сокетів, параметр `address` - це IP-адреса, віддаленого хоста, або \*\*`null`\*\*якщо сокет орієнтований на з'єднання.

`port`

Цей аргумент застосовний тільки до сокетів **`AF_INET`**и**`AF_INET6`**, та вказує віддалений порт, з якого будуть отримані дані. Якщо сокет орієнтований на з'єднання, `port`будет\*\*`null`\*\*

### Значення, що повертаються

**socket\_recvfrom()** повертає кількість отриманих байт або **`false`**, якщо сталася помилка. Фактичний код помилки можна отримати за допомогою виклику функції [socket\_last\_error()](function.socket-last-error.md). Цей код помилки може бути переданий функції [socket\_strerror()](function.socket-strerror.md) для отримання текстового опису помилки.

### список змін

| Версия | Опис |
| --- | --- |
| 8.0.0 | `socket` тепер екземпляр класу [Socket](class.socket.md); раніше був ресурсом (resource). |

### Приклади

**Пример #1 Пример использования**socket\_recvfrom()\*\*\*\*

```php
<?php

$socket = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP);
socket_bind($socket, '127.0.0.1', 1223);

$from = '';
$port = 0;
socket_recvfrom($socket, $buf, 12, 0, $from, $port);

echo "Получено $buf с удалённого адреса $from и удалённого порта $port" . PHP_EOL;
?>
```

Цей приклад відкриє UDP-сокет на порту 1223 за адресою 127.0.0.1 та виведе максимум 12 символів, отриманих з віддаленого хоста.

### Дивіться також

-   [socket\_recv()](function.socket-recv.md) \- Отримує дані із приєднаного сокету
-   [socket\_send()](function.socket-send.md) \- Надсилає дані в приєднаний сокет
-   [socket\_sendto()](function.socket-sendto.md) \- Надсилає повідомлення до сокету, незалежно від того, під'єднаний він чи ні
-   [socket\_create()](function.socket-create.md) \- створює сокет (кінцеву точку для обміну інформацією)
