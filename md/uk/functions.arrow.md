Стрілочні функції

-   [« Анонимные функции](functions.anonymous.html)
    
-   [Callback-функции как объекты первого класса »](functions.first_class_callable_syntax.html)
    
-   [PHP Manual](index.html)
    
-   [Функции](language.functions.html)
    
-   Стрілочні функції
    

## Стрілочні функції

Стрілецькі функції з'явилися в PHP 7.4, як більш лаконічний синтаксис для [анонимных функций](functions.anonymous.html)

І анонімні, і стрілочні функції реалізовані з використанням класу [](class.closure.html)[Closure](class.closure.html)

Основний вид запису стрілочних функцій: `fn (argument_list) => expr`

Стрілецькі функції підтримують ті ж можливості, що й [анонимные функции](functions.anonymous.html), за винятком того, що використання змінних із батьківської області завжди виконується автоматично.

Коли змінна, що використовується у виразі, визначена у батьківській області, вона буде неявно захоплена за значенням. У наступному прикладі функції $fn1 і $fn2 поводяться однаково.

**Приклад #1 Стрілецькі функції захоплюють змінні за значенням автоматично**

```php
<?php

$y = 1;

$fn1 = fn($x) => $x + $y;
// эквивалентно использованию $y по значению:
$fn2 = function ($x) use ($y) {
    return $x + $y;
};

var_export($fn1(3));
?>
```

Результат виконання цього прикладу:

```
4
```

Це також працює у вкладених стрілочних функціях:

**Приклад #2 Стрілецькі функції захоплюють змінні за значенням автоматично, навіть коли вони вкладені**

```php
<?php

$z = 1;
$fn = fn($x) => fn($y) => $x * $y + $z;
// Выведет 51
var_export($fn(5)(10));
?>
```

Подібно до анонімних функцій, синтаксис стрілочних функцій допускає довільні сигнатури функцій, включаючи типи параметрів і значень, що повертаються, значення за замовчуванням, змінні, а також передачу і повернення за посиланням. Нижче наведено коректні приклади стрілочних функцій:

**Приклад #3 Приклади використання стрілочних функцій**

```php
<?php

fn(array $x) => $x;
static fn(): int => $x;
fn($x = 42) => $x;
fn(&$x) => $x;
fn&($x) => $x;
fn($x, ...$rest) => $rest;

?>
```

Стрілецькі функції використовують прив'язку змінних за значенням. Це приблизно еквівалентно виконанню `use($x)` для кожної змінної $x, яка використовується всередині стрілочної функції. Прив'язка за значенням означає, що неможливо змінити будь-які значення із зовнішньої області. Натомість можна використовувати [анонимные функции](functions.anonymous.html) для прив'язок за посиланнями.

**Приклад #4 Значення із зовнішньої області видимості не можуть бути змінені стрілковими функціями**

```php
<?php

$x = 1;
$fn = fn() => $x++; // Ничего не изменит
$fn();
var_export($x);  // Выведет 1

?>
```

### список змін

| Версия | Описание                          |
|--------|-----------------------------------|
|        | Стали доступні стрілочні функції. |

### Примітки

> **Зауваження**: Можно використовувати [func\_num\_args()](function.func-num-args.html) [func\_get\_arg()](function.func-get-arg.html) і [func\_get\_args()](function.func-get-args.html) у стрілочній функції.