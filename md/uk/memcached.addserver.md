---
navigation:
  - memcached.addbykey.md: '« Memcached::addByKey'
  - memcached.addservers.md: 'Memcached::addServers »'
  - index.md: PHP Manual
  - class.memcached.md: Memcached
title: 'Memcached::addServer'
origin_hash: ddf652f5224dc9f1fa9671347921941ca401ea50
---
# Memcached::addServer

(PECL memcached >= 0.1.0)

Memcached::addServer — Додає сервер до пулу

### Опис

```methodsynopsis
public Memcached::addServer(string $host, int $port, int $weight = 0): bool
```

**Memcached::addServer()** додає вказаний сервер у пул. При цьому з'єднання встановлено не буде, але якщо ви використовуєте налаштування консистентного розподілу ключів (за допомогою **`Memcached::DISTRIBUTION_CONSISTENT`** або **`Memcached::OPT_LIBKETAMA_COMPATIBLE`**), деякі внутрішні структури даних буде оновлено. Таким чином, якщо вам необхідно додати кілька серверів, краще використовувати [Memcached::addServers()](memcached.addservers.md) т.к. оновлення даних відбувається одноразово.

Один і той самий сервер може зустрічатися в пулі кілька разів, тому що жодних перевірок на дублювання входжень немає. Але це недоцільно; натомість потрібно використовувати параметр `weight` підвищення пріоритету даного сервера.

### Список параметрів

`host`

Ім'я хоста memcache сервера. Якщо ім'я хоста буде недійсним, функції, що працюють з даними, встановлять результуючий код **`Memcached::RES_HOST_LOOKUP_FAILURE`**. У версії 2.0.0b1, цей параметр також може визначати шлях до unix сокет файлу, наприклад, `/path/to/memcached.sock`для использования сокета домена UNIX (UDS), в данном случае`port` повинен бути встановлений у

`port`

Порт, на якому працює сервер memcache. Зазвичай це `11211` порт. У версії 2.0.0b1, встановіть цей параметр у при використанні сокету домену UNIX (UDS).

`weight`

Ваговий коефіцієнт для заданого сервера стосовно загальної ваги всіх серверів у пулі. Ця установка керує ймовірністю сервера бути вибраним для використання. Вона використовується лише у разі консистентного розподілу і зазвичай відповідає кількості пам'яті, доступній для memcache на сервері.

### Значення, що повертаються

Повертає **`true`** у разі успішного виконання або \*\*`false`\*\*в случае возникновения ошибки.

### Приклади

**Приклад #1 Приклад використання** Memcached::addServer()\*\*\*\*

```php
<?php
$m = new Memcached();

/* Добавляет 2 сервера в пул, вероятность быть выбранным
   у второго сервера в 2 раза выше. */
$m->addServer('mem1.domain.com', 11211, 33);
$m->addServer('mem2.domain.com', 11211, 67);
?>
```

### Дивіться також

-   [Memcached::addServers()](memcached.addservers.md) \- Додає кілька серверів у пул
-   [Memcached::resetServerList()](memcached.resetserverlist.md) \- Очищає список серверів
