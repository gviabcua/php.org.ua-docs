---
navigation:
  - pdo.quote.md: '« PDO::quote'
  - pdo.setattribute.md: 'PDO::setAttribute »'
  - index.md: PHP Manual
  - class.pdo.md: PDO
title: 'PDO::rollBack'
---
# PDO::rollBack

(PHP 5> = 5.1.0, PHP 7, PHP 8, PECL pdo> = 0.1.0)

PDO::rollBack - Відкат транзакції

### Опис

```methodsynopsis
public PDO::rollBack(): bool
```

Відкочує зміни в базі даних, зроблені в рамках поточної транзакції, яка була створена методом [PDO::beginTransaction()](pdo.begintransaction.md)

Якщо в СУБД включено режим автофіксації змін, ця функція відновить режим після відкату.

Деякі СУБД, включаючи MySQL, автоматично неявно фіксують зміни, коли зустрічаються вирази мови визначення бази даних (DDL), що виконуються у межах транзакції. Ця неявна фіксація унеможливлює відкат інших змін, зроблених у рамках цієї транзакції.

### Список параметрів

Ця функція не має параметрів.

### Значення, що повертаються

Повертає **`true`** у разі успішного виконання або **`false`** у разі виникнення помилки.

### Помилки

Якщо активної транзакції немає, буде викинуто виняток [PDOException](class.pdoexception.md)

> **Зауваження**: Виняток буде викликано, навіть якщо атрибут **`PDO::ATTR_ERRMODE`** не виставлений у **`PDO::ERRMODE_EXCEPTION`**

### Приклади

**Приклад #1 Відкат транзакції**

У наступному прикладі створюється транзакція та виконуються два запити, які модифікують дані в базі, а потім база повертається до вихідного стану. У MySQL, проте, вираз DROP TABLE автоматично фіксує зміни, тому їх відкат не відбудеться.

```php
<?php
/* Начинаем транзакцию, отключение автоматической фиксации */
$dbh->beginTransaction();

/* Изменяем схему базы данных и данные в таблицах */
$sth = $dbh->exec("DROP TABLE fruit");
$sth = $dbh->exec("UPDATE dessert
    SET name = 'hamburger'");

/* Осознаем свою ошибку и откатываем транзакцию */
$dbh->rollBack();

/* База данных возвращается в режим автофиксации */
?>
```

### Дивіться також

-   [PDO::beginTransaction()](pdo.begintransaction.md) - Ініціалізація транзакції
-   [PDO::commit()](pdo.commit.md) - Фіксує транзакцію
-   [Транзакции и автофиксация изменений](pdo.transactions.md)
