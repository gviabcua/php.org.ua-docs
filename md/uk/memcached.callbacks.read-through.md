Функції зворотного виклику наскрізного читання кеша

-   [« Функции обратного вызова для результирующего набора](memcached.callbacks.result.html)
    
-   [Поддержка сессий »](memcached.sessions.html)
    
-   [PHP Manual](index.html)
    
-   [Опції зворотного дзвінка](memcached.callbacks.html)
    
-   Функції зворотного виклику наскрізного читання кеша
    

## Функції зворотного виклику наскрізного читання кеша

Дані функції викликаються у разі, коли неможливо отримати потрібне значення. У функцію зворотного дзвінка передається об'єкт Memcached та запитаний ключ, а також передається за посиланням змінна для повернення значення. Функція має повернути **`false`** або **`true`**. Якщо **`true`**, то Memcached збереже отримане значення і поверне його оригінальну функцію. Дані функції зворотного дзвінка використовуються тільки з [Memcached::get()](memcached.get.html) і [Memcached::getByKey()](memcached.getbykey.html), оскільки протокол не надає інформації про те, яких ключів не знайдено, при пакетних запитах.

**Приклад #1 Приклад використання**

```php
<?php
$m = new Memcached();
$m->addServer('localhost', 11211);

$profile_info = $m->get('user:'.$user_id, 'user_info_cb');

function user_info_cb($memc, $key, &$value)
{
    $user_id = substr($key, 5);
    /* ищем необходимые данные в БД */
    /* ... */
    $value = $profile_info;
    return true;
}
?>
```