---
navigation:
  - function.mb-scrub.md: « mb\_scrub
  - function.mb-split.md: mb\_split »
  - index.md: PHP Manual
  - ref.mbstring.md: Функції для роботи з багатобайтовими рядками
title: mb\_send\_mail
origin_hash: ddf652f5224dc9f1fa9671347921941ca401ea50
---
# mb\_send\_mail

(PHP 4 >= 4.0.6, PHP 5, PHP 7, PHP 8)

mb\_send\_mail — Надсилає закодований електронний лист

### Опис

```methodsynopsis
mb_send_mail(    string $to,    string $subject,    string $message,    array|string $additional_headers = [],    ?string $additional_params = null): bool
```

Надсилає повідомлення електронної пошти. Заголовки та повідомлення перетворюються та кодуються відповідно до налаштування функції [mb\_language()](function.mb-language.md). Це функція-обгортка для функції [mail()](function.mail.md), так що можна почитати та опис функції [mail()](function.mail.md)

### Список параметрів

`to`

Електронні адреси отримувачів. Декілька адрес в аргументі `to` перераховуються через кому. Значення цього аргументу не кодується автоматично.

`subject`

Тема листа.

`message`

Текст листа.

`additional_headers` (Необов'язковий)

Рядок або масив, які будуть вставлені в кінець заголовка листа.

Зазвичай вказують додати додаткові заголовки (From, Cc, і Bcc). Декілька додаткових заголовків повинні розділятися символом CRLF (\\r\\n). Цей параметр потрібно перевірити, щоб зловмисники не могли запровадити небажані заголовки.

Якщо передано масив, його ключі будуть іменами заголовків, а значення відповідними значеннями заголовка.

> **Зауваження** :
> 
> При отправке письма оно*зобов'язано* містити заголовок `From`. Його можна задати у параметрі `additional_headers` або через опцію у php.ini.
> 
> Якщо цього не зробити, то це призведе до повідомлення про помилку приблизно такого змісту: `Warning: mail(): "sendmail_from" not set in php.ini or custom "From:" header missing`Заголовок`From` також встановлює і заголовок `Return-Path`в Windows.

> **Зауваження** :
> 
> Якщо листа не було доставлено, спробують вказати лише символ LF (\\n). Є поштові агенти Unix (особливо [» qmail](http://cr.yp.to/qmail.md)), які автоматично замінюють символ LF на символ CRLF (що дублює символ CR при заданому символі CRLF). Це єдине рішення, оскільки ця поведінка не відповідає стандарту [» RFC 2822](http://www.faqs.org/rfcs/rfc2822)

`additional_params`

Параметр`additional_params` - Це параметр командного рядка MTA. Він корисний для завдання коректного заголовка Return-Path під час використання функції sendmail.

Цей параметр екранується функцією [escapeshellcmd()](function.escapeshellcmd.md) автоматично, щоб запобігти запуску інших команд. Функція [escapeshellcmd()](function.escapeshellcmd.md) не дає запускати команди, але допускає додавання додаткових аргументів, тому потрібно перевіряти цю опцію, щоб забезпечити безпеку.

Оскільки функція [escapeshellcmd()](function.escapeshellcmd.md) виконується автоматично, не можна використовувати низку символів, які дозволені в email-адресах. Не можна використовувати функцію [mail()](function.mail.md) для програм, які потребують вказівки таких символів.

Користувач, від імені якого запущено веб-сервер, повинен бути доданий до списку довірених користувачів у конфігурації поштового агента sendmail, щоб запобігти додаванню заголовка X-Warning до повідомлення, якщо відправник листа заданий параметром (-f). Для користувачів агента sendmail це файл /etc/mail/trusted-users.

### Значення, що повертаються

Повертає **`true`** у разі успішного виконання або \*\*`false`\*\*в случае возникновения ошибки.

### список змін

| 8.0.0 | Теперь параметр `additional_params` может принимать значение **`null`**. |
| --- | --- |
| Версія | Опис |
| \--- | \--- |
| 7.2.0 | Тепер у параметр `additional_headers` можна передавати масив. |

### Дивіться також

-   [mail()](function.mail.md) \- Надсилає електронну пошту
-   [mb\_encode\_mimeheader()](function.mb-encode-mimeheader.md) \- Кодує рядок для MIME-заголовка
-   [mb\_language()](function.mb-language.md) \- Встановлює/отримує поточну мову
