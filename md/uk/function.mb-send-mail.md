Надсилання закодованого повідомлення

-   [« mbscrub](function.mb-scrub.html)
    
-   [мбsplit »](function.mb-split.html)
    
-   [PHP Manual](index.md)
    
-   [Функції для роботи з багатобайтовими рядками](ref.mbstring.md)
    
-   Надсилання закодованого повідомлення
    

# мбsendmail

(PHP 4> = 4.0.6, PHP 5, PHP 7, PHP 8)

мбsendmail — Надіслати закодоване повідомлення

### Опис

```methodsynopsis
mb_send_mail(    string $to,    string $subject,    string $message,    array|string $additional_headers = [],    ?string $additional_params = null): bool
```

Надсилає повідомлення електронної пошти. Заголовки та повідомлення перетворюються та кодуються відповідно до налаштування [мбlanguage()](function.mb-language.html). Це обгортка для функції [mail()](function.mail.md), так що варто ознайомитись і з описом функції [mail()](function.mail.md)

### Список параметрів

`to`

Електронні адреси отримувачів. Декілька адрес в аргументі `to` перераховуються через кому. Значення цього аргументу не кодується автоматично.

`subject`

Тема листа.

`message`

Текст листа.

`additional_headers` (Необов'язковий)

Рядок або масив, що вставляються в кінець заголовка листа.

Зазвичай використовується для додавання додаткових заголовків (From, Cc та Bcc). Декілька додаткових заголовків повинні розділятися за допомогою CRLF (рn). Перевірте цей параметр, щоб запобігти ін'єкції небажаних заголовків.

Якщо передано масив, його ключі будуть іменами заголовків, а значення відповідними значеннями заголовка.

> **Зауваження**
> 
> При надсиланні листа, лист *зобов'язано* містити заголовок `From`. Його можна встановити за допомогою параметра `additional_headers` або через опцію в php.ini.
> 
> Якщо цього не зробити, то це призведе до повідомлення про помилку приблизно такого змісту: `Warning: mail(): "sendmail_from" not set in php.ini or custom "From:" header missing`. Заголовок `From` також встановлює і заголовок `Return-Path` у Windows.

> **Зауваження**
> 
> Якщо лист не діставався, спробуйте використати тільки LF (n). Деякі Unix поштові агенти (в першу чергу [» qmail](http://cr.yp.to/qmail.html)) замінюють LF на CRLF автоматично (що призводить до дублювання CR при використанні CRLF). Це єдине рішення, оскільки ця поведінка не відповідає [» RFC 2822](http://www.faqs.org/rfcs/rfc2822)

`additional_params`

значенням `additional_params` є параметр командного рядка MTA. Він корисний для завдання коректного заголовка Return-Path під час використання функції sendmail.

Цей параметр екранується функцією [escapeshellcmd()](function.escapeshellcmd.md) автоматично, щоб запобігти запуску інших команд . [escapeshellcmd()](function.escapeshellcmd.md) запобігає запуску команд, але допускає додавання додаткових аргументів, тому для забезпечення безпеки потрібно перевіряти цю опцію.

Так як [escapeshellcmd()](function.escapeshellcmd.md) застосовується автоматично, не можна використовувати деякі символи, допустимі в email-адресах. Не можна використовувати функцію [mail()](function.mail.md) для програм, які потребують використання таких символів.

Користувач, під яким запущено веб-сервер, повинен бути доданим у довірені користувачі у конфігурації sendmail, щоб запобігти додаванню заголовка X-Warning у повідомлення, якщо відправник листа заданий за допомогою цього параметра (-f). Для користувачів sendmail це файл /etc/mail/trusted-users.

### Значення, що повертаються

Повертає **`true`** у разі успішного виконання або **`false`** у разі виникнення помилки.

### список змін

| 8.0.0 | Теперь параметр `additional_params` может принимать значение **`null`**. |
| --- | --- |
| Версія | Опис |
|  |  |
|  | Тепер у параметр `additional_headers` можна передавати масив. |

### Дивіться також

-   [mail()](function.mail.md) - Надсилає електронну пошту
-   [мбencodemimeheader()](function.mb-encode-mimeheader.html) - Кодує рядок для MIME-заголовка
-   [мбlanguage()](function.mb-language.html) - Встановлює/отримує поточну мову