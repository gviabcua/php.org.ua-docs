---
navigation:
  - features.file-upload.errors.seealso.html: « Смотрите также
  - features.connection-handling.html: Работа с соединениями »
  - index.md: PHP Manual
  - features.md: Відмітні особливості
title: Робота з віддаленими файлами
---
# Робота з віддаленими файлами

У випадку, якщо опція **allowurlfopen** включена в конфігураційному файлі php.ini, ви можете використовувати URL-адреси HTTP і FTP у більшості функцій, які приймають як параметр ім'я файлу. Також ви можете використовувати посилання в операторах [include](function.include.md) [includeonce](function.include-once.html) [require](function.require.md) і [requireonce](function.require-once.md) (Для коректної роботи цих функцій повинна бути включена опція **allowurlinclude**). Додаткову інформацію про протоколи, що підтримуються в PHP, ви можете знайти в [Підтримувані протоколи та обгортки](wrappers.md)

Наприклад, ви можете використовувати це для того, щоб відкрити файл на віддаленому сервері, витягти необхідні вам дані та використовувати їх у запиті до бази даних або просто відобразити їх у дизайні вашого сайту.

**Приклад #1 Отримання заголовка віддаленої сторінки**

```php
<?php
$file = fopen ("http://www.example.com/", "r");
if (!$file) {
    echo "<p>Невозможно открыть удалённый файл.\n";
    exit;
}
while (!feof ($file)) {
    $line = fgets ($file, 1024);
    /* Сработает, только если заголовок и сопутствующие теги расположены в одной строке */
    if (preg_match ("@\<title\>(.*)\</title\>@i", $line, $out)) {
        $title = $out[1];
        break;
    }
}
fclose($file);
?>
```

Ви також можете працювати з віддаленими файлами, розташованими на FTP-сервері (маю на увазі, що ви авторизувалися з необхідними привілеями). Таким чином, ви можете тільки створювати нові файли, але спроба перезаписати існуючий файл за допомогою функції [fopen()](function.fopen.md) призведе до помилки.

Для того, щоб авторизуватися під користувачем, відмінним від 'anonymous', вам необхідно вказати логін (і, можливо, пароль) в адресному рядку, наприклад:`ftp://user:password@ftp.example.com/path/to/file`'. (Ви можете використовувати цей синтаксис для доступу до віддалених файлів по HTTPпротоколу, якщо потрібна Basic-автентифікація.)

**Приклад #2 Збереження даних на віддаленому сервері**

```php
<?php
$file = fopen ("ftp://ftp.example.com/incoming/outputfile", "w");
if (!$file) {
    echo "<p>Невозможно перезаписать удалённый файл.\n";
    exit;
}
/* Запись данных. */
fwrite ($file, $_SERVER['HTTP_USER_AGENT'] . "\n");
fclose ($file);
?>
```

> **Зауваження**
> 
> Дивлячись на наведений вище приклад, у вас може виникнути ідея використовувати цю техніку для віддаленого лог-файлу. На жаль, це нереалізовано, оскільки спроба запису у вже існуючий видалений файл за допомогою функції [fopen()](function.fopen.md) призведе до помилки. У реалізації розподіленого логування, можливо, вам допоможе функція [syslog()](function.syslog.md)
