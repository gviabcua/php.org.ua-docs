Основні відмінності від інших реалізацій SAPI

-   [« Введение](features.commandline.introduction.html)
    
-   [Опции »](features.commandline.options.html)
    
-   [PHP Manual](index.html)
    
-   [Использование PHP в командной строке](features.commandline.html)
    
-   Основні відмінності від інших реалізацій SAPI
    

## Основні відмінності від інших реалізацій SAPI

Основні відмінності CLI SAPI від інших реалізацій SAPI:

-   На відміну від CGI SAPI, заголовки не пишуться до потоку виведення.
    
    Незважаючи на те, що в CGI SAPI є спосіб придушення HTTP-заголовків, CLI SAPI немає можливості їх включити.
    
    CLI за замовчуванням запускається в тихому режимі, проте ключі **до** і **\-no-header** збережені для зворотної сумісності, що дозволяє використовувати старі CGIскрипти.
    
    Поточна директорія не змінюється робочу директорію скрипта. (Ключі **З** і **\-no-chdir** збережені для зворотної сумісності)
    
    Повідомлення про помилки видаються в текстовому режимі (без HTMLформатування).
    
-   Деякі налаштування php.ini перевизначаються CLI SAPI, оскільки вони не мають сенсу під час роботи в командному рядку:
    
    **Перевизначені директиви php.ini**
    
    | Директива                                                                                                                                                                                                        | Значение по умолчанию в CLI SAPI | Комментарий                                                                                                                                                                                                                                                                                     |
    |------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
    | [html\_errors](errorfunc.configuration.html#ini.html-errors)                                                                                                                                                     | **`false`**                      | За замовчуванням **`false`**, т.к. буває досить складно читати в консолі повідомлення про помилку, коли вони наповнені безглуздими HTMLтегами.                                                                                                                                                  |
    | [implicit\_flush](outcontrol.configuration.html#ini.implicit-flush)                                                                                                                                              | **`true`**                       | Зазвичай в консолі бажано відображати висновок, наприклад, [print](function.print.html) [echo](function.echo.html) та інших, відразу ж минаючи буфер. Тим не менш, як і раніше можна використовувати [буферизацию вывода](ref.outcontrol.html) для відкладеного висновку чи маніпуляцій із ним. |
    | [max\_execution\_time](info.configuration.html#ini.max-execution-time)                                                                                                                                           | 0 (без обмежень)                 | PHP, що виконується в консолі, зазвичай використовується для більш широкого діапазону завдань, ніж звичайні веб-скрипти. Оскільки вони можуть виконуватися дуже довго, то максимальний час виконання необмежено.                                                                                |
    | [register\_argc\_argv](ini.core.html#ini.register-argc-argv)                                                                                                                                                     | **`true`**                       |                                                                                                                                                                                                                                                                                                 |
    | Встановлення цієї опції значення **`true`** означає, що скрипти, що запускаються через CLI SAPI, завжди мають доступ до *argc* (кількість аргументів, переданих додатком) та *argv* (Масив поточних аргументів). |                                  |                                                                                                                                                                                                                                                                                                 |
    
    При використанні CLI SAPI змінні [$argc](reserved.variables.argc.html) і [$argv](reserved.variables.argv.html) автоматично заповнюються відповідними значеннями. Ці значення можна також знайти в масиві [$\_SERVER](reserved.variables.server.html), наприклад: [$\_SERVER\['argv'\]](reserved.variables.server.html)
    
    [output\_buffering](outcontrol.configuration.html#ini.output-buffering) **`false`**
    
    Незважаючи на те, що ця опція php.ini жорстко встановлена ​​в **`false`**, функції [буферизации вывода](book.outcontrol.html) все ще доступні.
    
    [max\_input\_time](info.configuration.html#ini.max-input-time) **`false`**
    
    PHP CLI не підтримує GET, POST або завантаження файлів.
    
    > **Зауваження**
    > 
    > Ці директиви не можуть бути ініціалізовані іншими значеннями конфігураційного файлу php.ini або будь-якого іншого (у разі, якщо він вказаний). Це обмеження пов'язане з тим, що значення використовуються після обробки конфігураційних файлів. Тим не менш, ці значення можуть бути змінені під час роботи скрипта (хоча це не має особливого сенсу для всіх них, наприклад [register\_argc\_argv](ini.core.html#ini.register-argc-argv)
    
    > **Зауваження**
    > 
    > Рекомендується встановити опцію [ignore\_user\_abort](misc.configuration.html#ini.ignore-user-abort) для скриптів, які використовуються з командного рядка. За подробицями звертайтесь до функції [ignore\_user\_abort()](function.ignore-user-abort.html)
    
-   Для полегшення роботи в оточенні оболонки було визначено кілька констант для [потоков ввода/вывода](features.commandline.io-streams.html)
    
-   CLI SAPI *не* змінює поточну директорію на директорію скрипта.
    
    **Приклад #1 Приклад, що демонструє різницю із CGI SAPI:**
    
    ```php
    <?php
    // Простейший тестовый скрипт под названием test.php
    echo getcwd(), "\n";
    ?>
    ```
    
    Якщо використовується CGIверсія, результат роботи буде наступним:
    
    ```
    $ pwd
    /tmp
    
    $ php -q another_directory/test.php
    /tmp/another_directory
    ```
    
    Це наочно демонструє, що PHP змінює поточну директорію на директорію скрипта.
    
    Використання CLI SAPI дає інший результат:
    
    ```
    $ pwd
    /tmp
    
    $ php -f another_directory/test.php
    /tmp
    ```
    
    Це забезпечує більшу гнучкість при написанні консольних скриптів на PHP.
    
    > **Зауваження**
    > 
    > CGI SAPI дозволяє отримати аналогічну CLI SAPI поведінку у разі використання ключа **З** під час запуску з командного рядка.