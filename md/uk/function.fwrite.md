---
navigation:
  - function.ftruncate.md: « ftruncate
  - function.glob.md: glob »
  - index.md: PHP Manual
  - ref.filesystem.md: Функції файлової системи
title: fwrite
origin_hash: ddf652f5224dc9f1fa9671347921941ca401ea50
---
# fwrite

(PHP 4, PHP 5, PHP 7, PHP 8)

fwrite — Бінарно-безпечний запис до файлу

### Опис

```methodsynopsis
fwrite(resource $stream, string $data, ?int $length = null): int|false
```

**fwrite()** записує вміст `data` у файловий потік `stream`

### Список параметрів

`stream`

Вказівник (resource) на файл, який зазвичай створюється за допомогою функції [fopen()](function.fopen.md)

`data`

Рядок, що записується.

`length`

Якщо параметр `length` є цілим числом (int), запис зупиниться після того, як `length` байтів будуть записані або буде досягнуто кінець рядка `data`, дивлячись, що станеться раніше.

### Значення, що повертаються

**fwrite()** повертає кількість записаних байт або \*\*`false`\*\*в случае возникновения ошибки.

### Помилки

Функция**fwrite()** видає помилку рівня \*\*`E_WARNING`\*\*в случае возникновения ошибки.

### список змін

| Версия | Опис |
| --- | --- |
| 8.0.0 | Параметр`length` тепер припускає значення **`null`** |

### Приклади

**Приклад #1 Простий приклад використання **fwrite()****

```php
<?php
$filename = 'test.txt';
$somecontent = "Добавить это к файлу\n";

// Вначале давайте убедимся, что файл существует и доступен для записи.
if (is_writable($filename)) {

    // В нашем Прикладе мы открываем $filename в режиме "записи в конец".
    // Таким образом, смещение установлено в конец файла и
    // наш $somecontent допишется в конец при использовании fwrite().
    if (!$fp = fopen($filename, 'a')) {
         echo "Не могу открыть файл ($filename)";
         exit;
    }

    // Записываем $somecontent в наш открытый файл.
    if (fwrite($fp, $somecontent) === FALSE) {
        echo "Не могу произвести запись в файл ($filename)";
        exit;
    }

    echo "Ура! Записали ($somecontent) в файл ($filename)";

    fclose($fp);

} else {
    echo "Файл $filename недоступен для записи";
}
?>
```

### Примітки

> **Зауваження** :
> 
> Запис у мережевий потік може припинитися до запису всіх даних. Це можна контролювати за допомогою перевірки значення функції, що повертається. **fwrite()** :
> 
> ```php
> <?php
> function fwrite_stream($fp, $string) {
>     for ($written = 0; $written < strlen($string); $written += $fwrite) {
>         $fwrite = fwrite($fp, substr($string, $written));
>         if ($fwrite === false) {
>             return $written;
>         }
>     }
>     return $written;
> }
> ?>
> ```

> **Зауваження** :
> 
> У системах, що розрізняють двійкові та текстові файли (наприклад, Windows), файл повинен бути відкритий, використовуючи прапор 'b' в кінці аргументу mode функції [fopen()](function.fopen.md)

> **Зауваження** :
> 
> Якщо дескриптор `stream` був відкритий функцією [fopen()](function.fopen.md) в режимі "додавання в кінець", то дзвінки **fwrite()** будуть атомарними (за винятком випадку, якщо розмір `data` перевищить розмір блоку файлової системи на деяких платформах, і поки файл зберігається на локальній файловій системі). Тобто немає необхідності блокувати ресурс за допомогою [flock()](function.flock.md) перед викликом **fwrite()**, і всі дані будуть записані без переривань.

> **Зауваження** :
> 
> При повторному записі файлового покажчика, дані будуть додані в кінець вмісту файлу:
> 
> ```php
> <?php
> $fp = fopen('data.txt', 'w');
> fwrite($fp, '1');
> fwrite($fp, '23');
> fclose($fp);
> 
> //Вміст 'data.txt' тепер 123, а не 23!
> ?>
> ```

### Дивіться також

-   [fread()](function.fread.md) \- Бінарно-безпечне читання файлу
-   [fopen()](function.fopen.md) \- Відкриває файл або URL
-   [fsockopen()](function.fsockopen.md) \- Відкриває з'єднання з інтернет-сокетом або доменним сокетом Unix
-   [popen()](function.popen.md) \- Відкриває файловий покажчик процесу
-   [file\_get\_contents()](function.file-get-contents.md) \- Читає вміст файлу в рядок
-   [pack()](function.pack.md) \- Упакувати дані у бінарний рядок
