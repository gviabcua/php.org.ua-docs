---
navigation:
  - function.ldap-get-values.md: « ldap\_get\_values
  - function.ldap-mod_add-ext.md: ldap\_mod\_add\_ext »
  - index.md: PHP Manual
  - ref.ldap.md: Функції LDAP
title: ldap\_list
origin_hash: ddf652f5224dc9f1fa9671347921941ca401ea50
---
# ldap\_list

(PHP 4, PHP 5, PHP 7, PHP 8)

ldap\_list — Однорівневий пошук

### Опис

```methodsynopsis
ldap_list(    LDAP\Connection|array $ldap,    array|string $base,    array|string $filter,    array $attributes = [],    int $attributes_only = 0,    int $sizelimit = -1,    int $timelimit = -1,    int $deref = LDAP_DEREF_NEVER,    ?array $controls = null): LDAP\Result|array|false
```

Виконує пошук для вказаного `filter` у директорії в рамках **`LDAP_SCOPE_ONELEVEL`**

**`LDAP_SCOPE_ONELEVEL`** означає, що пошук повинен повернути лише інформацію, яка є наступним рівнем нижче `base`, заданого під час виклику. (еквівалент введення)**ls**" та отримання списку файлів та папок у поточному робочому каталозі.)

Можна також виконувати паралельний пошук. У цьому випадку першим аргументом має бути масив екземплярів [LDAP\\Connection](class.ldap-connection.md), а чи не один екземпляр. Якщо пошук не повинен використовувати один і той же базовий DN і фільтр, як аргументи можна передати масив базових DN і/або масив фільтрів. Кількість елементів у масивах має збігатися з кількістю екземплярів [LDAP\\Connection](class.ldap-connection.md)оскільки перші записи масивів використовуються для одного пошуку, другі — для іншого і так далі. При паралельному пошуку повертається масив екземплярів [LDAP\\Result](class.ldap-result.md), за исключением возникновения ошибки, когда возвращается значение\*\*`false`\*\*

### Список параметрів

`ldap`

Екземпляр [LDAP\\Connection](class.ldap-connection.md), що повертається функцією [ldap\_connect()](function.ldap-connect.md)

`base`

Базове DN для каталогу.

`filter`

`attributes`

Масив необхідних атрибутів, наприклад, `array("mail", "sn", "cn")`. . Зверніть увагу, що "dn" завжди повертається, незалежно від того, які типи атрибутів потрібні.

Використання цього параметра набагато ефективніше, ніж стандартна дія (яка повинна повернути всі атрибути та їх значення). Тому використання цього параметра слід вважати гарною практикою.

`attributes_only`

Повинен дорівнювати 1, тільки якщо потрібні типи атрибута. Якщо встановлено 0, за промовчанням вибираються і типи атрибутів і значення атрибута.

`sizelimit`

Дозволяє обмежити кількість вибраних записів. Встановлення цього параметра як 0 означає, що обмеження відсутнє.

> **Зауваження** :
> 
> Цей параметр НЕ може перевизначати попереднє встановлення sizelimit на стороні сервера. Хоча його можна встановити нижче.
> 
> Деякі хости серверів каталогів будуть налаштовані так, щоб повернути не більше, ніж попередньо встановлена ​​кількість записів. Якщо це станеться, сервер вкаже, що повернув лише частковий набір результатів. Це також відбувається, якщо Ви використовуєте цей параметр, щоб обмежити кількість вибраних записів.

`timelimit`

Встановлює кількість секунд, що обмежує процес пошуку. Встановлення цього параметра як 0 означає, що обмеження відсутнє.

> **Зауваження** :
> 
> Цей параметр НЕ може перевизначати передустановку timelimit на стороні сервера. Хоча його можна встановити нижче.

`deref`

Визначає, як псевдоніми мають бути оброблені під час пошуку. Може бути одним із наступних:

-   \*\*`LDAP_DEREF_NEVER`\*\*- (за умовчанням) псевдоніми ніколи не розіменовуються.
-   \*\*`LDAP_DEREF_SEARCHING`\*\*- псевдоніми мають бути розіменовані під час пошуку, але не при визначенні розташування базового об'єкта пошуку.
-   \*\*`LDAP_DEREF_FINDING`\*\*- псевдоніми мають бути розіменовані щодо місця розташування базового об'єкта, але з під час пошуку.
-   \*\*`LDAP_DEREF_ALWAYS`\*\*- псевдоніми повинні завжди розіменовуватись завжди.

`controls`

Массив[керуючих констант LDAP](ldap.controls.md)для отправки в запросе.

### Значення, що повертаються

Повертає екземпляр [LDAP\\Result](class.ldap-result.md), масив екземплярів [LDAP\\Result](class.ldap-result.md)или\*\*`false`\*\*в случае возникновения ошибки.

### список змін

| Версия | Опис |
| --- | --- |
| 8.1.0 | Параметр`ldap` тепер чекає екземпляр [LDAP\\Connection](class.ldap-connection.md); раніше очікувався ресурс ([resource](language.types.resource.md) `ldap link` |
| 8.1.0 | Повертає екземпляр [LDAP\\Result](class.ldap-result.md); раніше повертався ресурс ([resource](language.types.resource.md) |
| 8.0.0 | `controls` тепер припускає значення null; раніше значення за умовчанням було `[]` |
| 7.3.0 | Додано підтримку параметра `controls` |

### Приклади

**Приклад #1 Виводить список усіх організаційних одиниць організації**

```php
<?php
// $ds допустимый экземпляр LDAP\Connection

$basedn = "o=My Company, c=US";
$justthese = array("ou");

$sr = ldap_list($ds, $basedn, "ou=*", $justthese);

$info = ldap_get_entries($ds, $sr);

for ($i=0; $i < $info["count"]; $i++) {
    echo $info[$i]["ou"][0];
}
?>
```

### Дивіться також

-   [ldap\_search()](function.ldap-search.md) \- Пошук по LDAP дереву
