- [«ldap_get_values](function.ldap-get-values.md)
- [ldap_mod_add_ext »](function.ldap-mod_add-ext.md)

- [PHP Manual](index.md)
- [Функції LDAP](ref.ldap.md)
- Однорівневий пошук

#ldap_list

(PHP 4, PHP 5, PHP 7, PHP 8)

ldap_list - Однорівневий пошук

### Опис

**ldap_list**(
[LDAP\Connection](class.ldap-connection.md)\|array `$ldap`,
array\|string `$base`,
array\|string `$filter`,
array `$attributes` = [],
int `$attributes_only` = 0,
int `$sizelimit` = -1,
int `$timelimit` = -1,
int `$deref` = **`LDAP_DEREF_NEVER`**,
?array `$controls` = **`null`** ): [LDAP\Result](class.ldap-result.md)\|array\|false

Виконує пошук для зазначеного `filter` у директорії в рамках
**`LDAP_SCOPE_ONELEVEL`**.

**`LDAP_SCOPE_ONELEVEL`** означає, що пошук повинен повернути тільки
інформацію, яка є наступним рівнем нижче `base`, заданого
під час виклику. (Еквівалент введення "**ls**" та отримання списку файлів та папок
у поточному робочому каталозі.)

### Список параметрів

`ldap`
Примірник [LDAP\Connection](class.ldap-connection.md), що повертається
функцією [ldap_connect()](function.ldap-connect.md).

`base`
Базове DN для каталогу.

`filter`

`attributes`
Масив необхідних атрибутів, наприклад, `array("mail", "sn", "cn")`.
Зверніть увагу, що "dn" завжди повертається, незалежно від того,
які типи атрибутів потрібні.

Використання цього параметра набагато ефективніше, ніж дія по
замовчуванням (яке має повернути всі атрибути та їх присвоєні
значення). Тому використання цього параметра слід вважати хорошим
практикою.

`attributes_only`
Повинний дорівнювати 1, тільки якщо потрібні типи атрибута. Якщо
встановлено 0, то, за замовчуванням, вибираються типи атрибутів і значення
атрибут.

`sizelimit`
Дозволяє обмежити кількість вибраних записів. Встановлення цього
параметра як 0 означає, що обмеження відсутнє.

> **Примітка**:
>
> Цей параметр НЕ може перевизначати попереднє встановлення sizelimit на
> стороні сервера. Хоча його можна встановити нижче.
>
> Деякі хости серверів каталогів будуть налаштовані так, щоб
> Повернути не більше, ніж попередньо встановлена кількість записів.
> Якщо це станеться, сервер вкаже, що повернув тільки частковий
> Набір результатів. Це також відбувається, якщо Ви використовуєте цей
> параметр, щоб обмежити кількість вибраних записів.

`timelimit`
Встановлює кількість секунд, що обмежує процес пошуку. Встановлення
цього параметра як 0 означає, що обмеження відсутнє.

> **Примітка**:
>
> Цей параметр НЕ може перевизначати передустановку timelimit на
> стороні сервера. Хоча його можна встановити нижче.

`deref`
Визначає, як псевдоніми мають бути оброблені під час пошуку. Може
бути одним із наступних:

- **`LDAP_DEREF_NEVER`** - (за замовчуванням) псевдоніми ніколи не
розіменовуватись.
- **`LDAP_DEREF_SEARCHING`** - псевдоніми повинні бути розіменовані у
час пошуку, але не при визначенні розташування базового об'єкта
пошуку.
- **`LDAP_DEREF_FINDING`** - псевдоніми повинні бути розіменовані при
визначення розташування базового об'єкта, але не під час пошуку.
- **`LDAP_DEREF_ALWAYS`** - псевдоніми повинні завжди розіменовуватися
завжди.

`controls`
Масив [керуючих констант LDAP](ldap.controls.md) для надсилання в
запит.

### Значення, що повертаються

Повертає екземпляр [LDAP\Result](class.ldap-result.md) або
**`false`** у разі виникнення помилки.

### Список змін

| Версія | Опис                                                                                                                                                    |
| ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 8.1.0  | Параметр ldap тепер очікує на екземпляр [LDAP\Connection](class.ldap-connection.md); раніше очікувався ресурс ([resource](language.types.resource.md)). |
| 8.1.0  | Повертає екземпляр [LDAP\Result](class.ldap-result.md); раніше повертався ресурс ([resource](language.types.resource.md)).                              |
| 8.0.0  | controls тепер припускає значення null; раніше значення за промовчанням було [].                                                                        |
| 7.3    | Додано підтримку параметра controls                                                                                                                     |

### Приклади

**Приклад #1 Виводить список усіх організаційних одиниць організації**

` <?php//$$ds вірний ідентифікатор посилання на сервер директорії$basedn = "o=My Company, c=US";$justthese = array("ou");$sr = ldap_list($ ou=*", $justthese);$info = ldap_get_entries($ds, $sr);for ($i=0; $i < $info["count"]; $i++) {   echo $info[$i] ["ou"][0];}?> `

### Дивіться також

- [ldap_search()](function.ldap-search.md) - Пошук по LDAP дереву
