Пріоритет оператора

-   [« Операторы](language.operators.html)
    
-   [Арифметические операторы »](language.operators.arithmetic.html)
    
-   [PHP Manual](index.html)
    
-   [Операторы](language.operators.html)
    
-   Пріоритет оператора
    

## Пріоритет оператора

Пріоритет оператора визначає, наскільки "тісно" він пов'язує між собою два вирази. Наприклад, вираз `1 + 5 * 3` обчислюється як `16`, а не `18`, оскільки оператор множення ("") має більший пріоритет, ніж оператор додавання ("+"). Круглі дужки можуть використовуватися для примусового вказівки порядку виконання операторів. Наприклад, вираз `(1 + 5) * 3` обчислюється як `18`

Якщо оператори мають рівний пріоритет, чи виконуватимуться вони праворуч наліво чи зліва направо визначається їх асоціативністю. Наприклад, "-" є ліво-асоціативним оператором. Отже `1 - 2 - 3` згрупується як `(1 - 2) - 3` і перерахується в `-4`. З іншого боку "=" - право-асоціативний оператор, тож `$a = $b = $c` згрупується як `$a = ($b = $c)`

Неасоціативні оператори з однаковим пріоритетом неможливо використовувати спільно. Наприклад `1 < 2 > 1` не працюватиме в PHP. Вираз `1 <= 1 == 1`, з іншого боку, буде, оскільки `==` має нижчий пріоритет ніж `<=`

Асоціативність має сенс лише двійкових (і тернарних) операторів. Унарні оператори є префіксними або постфіксними, тому це поняття не застосовується. Наприклад, `!!$a` можна згрупувати лише як `!(!$a)`

Використання дужок, крім випадків, коли вони суворо необхідні, може поліпшити читання коду, групуючи явно, а не покладаючись на пріоритети та асоціативність.

У наступній таблиці наведено список операторів, відсортований за зменшенням їх пріоритетів. Оператори, які розміщені в одному рядку мають однаковий пріоритет і порядок їх виконання визначається виходячи з їхньої асоціативності.

**Порядок виконання операторів**

| Ассоциативность | Оператор | Дополнительная информация |
| --- | --- | --- |
| (н/а) | `clone` `new` | [clone](language.oop5.cloning.html) і [new](language.oop5.basic.html#language.oop5.basic.new) |
| права | `**` | [арифметические операторы](language.operators.arithmetic.html) |
| (н/а) | `+` `-` `++` `--` `~` `(int)` `(float)` `(string)` `(array)` `(object)` `(bool)` `@` | [арифметические операторы](language.operators.arithmetic.html) (Унарні `+` і `-` [инкремент/декремент](language.operators.increment.html) [побитовые операторы](language.operators.bitwise.html) [приведение типов](language.types.type-juggling.html#language.types.typecasting) і [оператор управления ошибками](language.operators.errorcontrol.html) |
| ліва | instanceof | [типы](language.operators.type.html) |
| (н/а) |  | [логические операторы](language.operators.logical.html) |
| ліва | `*` `/` `%` | [арифметические операторы](language.operators.arithmetic.html) |
| ліва | `+` `-` `.` | [арифметические операторы](language.operators.arithmetic.html) (бінарні `+` і `-` [операторы, работающие с массивами](language.operators.array.html) і [строковые операторы](language.operators.string.html) `.` до PHP 8.0.0) |
| ліва | `<<` `>>` | [побитовые операторы](language.operators.bitwise.html) |
| ліва | `.` | [строковые операторы](language.operators.string.html) (починаючи з PHP 8.0.0) |
| неасоціативна | `<` `<=` `>` `>=` | [операторы сравнения](language.operators.comparison.html) |
| неасоціативна | `==` `!=` `===` `!==` `<>` `<=>` | [операторы сравнения](language.operators.comparison.html) |
| ліва | `&` | [побитовые операторы](language.operators.bitwise.html) і [ссылки](language.references.html) |
| ліва | `^` | [побитовые операторы](language.operators.bitwise.html) |
| ліва |  |  |
| ліва | `&&` | [логические операторы](language.operators.logical.html) |
| ліва |  |  |
| права | `??` | [операторы сравнения с null](language.operators.comparison.html#language.operators.comparison.coalesce) |
| неасоціативна | `? :` | [тернарный оператор](language.operators.comparison.html#language.operators.comparison.ternary) (ліво-асоціативний до PHP 8.0.0) |
| права | `=` `+=` `-=` `*=` `**=` `/=` `.=` `%=` `&=` | <<= \>>= |
| (н/а) | `yield from` | [yield from](language.generators.syntax.html#control-structures.yield.from) |
| (н/а) | `yield` | [yield](language.generators.syntax.html#control-structures.yield) |
| (н/а) | `print` | [print](function.print.html) |
| ліва | `and` | [логические операторы](language.operators.logical.html) |
| ліва | `xor` | [логические операторы](language.operators.logical.html) |
| ліва | `or` | [логические операторы](language.operators.logical.html) |

**Приклад #1 Асоціативність**

```php
<?php
$a = 3 * 3 % 5; // (3 * 3) % 5 = 4
// ассоциативность тернарных операторов отличается от C/C++
$a = true ? 0 : true ? 1 : 2; // (true ? 0 : true) ? 1 : 2 = 2 (до PHP 8.0.0)

$a = 1;
$b = 2;
$a = $b += 3; // $a = ($b += 3) -> $a = 5, $b = 5
?>
```

Пріоритет та асоціативність оператора визначає лише те, як групується вираз, а не порядок його обчислення. Зазвичай PHP не вказує, у якому порядку обчислюються вирази та коду, який передбачає специфічний порядок обчислення, слід уникати, тому що поведінка може змінюватися в різних версіях PHP або в залежності від навколишнього коду.

**Приклад #2 Невизначений порядок обчислення**

```php
<?php
$a = 1;
echo $a + $a++; // может вывести как 2 так и 3

$i = 1;
$array[$i] = $i++; // может установить индекс как 1, так 2
?>
```

**Приклад #3 `+` `-` і `.` мають однаковий пріоритет (до PHP 8.0.0)**

```php
<?php
$x = 4;
// следующий код может выдать неожиданный результат:
echo "x минус 1 равно " . $x-1 . ", ну я надеюсь\n";
// поскольку он вычисляется таким образом (до PHP 8.0.0):
echo (("x минус один равно " . $x) - 1) . ", ну я надеюсь\n";
// требуемый приоритет следует задать скобками:
echo "x минус 1 равно " . ($x-1) . ", ну я надеюсь\n";
?>
```

Результат виконання цього прикладу:

```
-1, ну я надеюсь
-1, ну я надеюсь
x минус один равно 3, ну я надеюсь
```

> **Зауваження**
> 
> Незважаючи на те що `=` має більш низький пріоритет, ніж більшість інших операторів, PHP все ж таки дозволяє робити так: `if (!$a = foo())`, у цьому прикладі результат виконання `foo()` буде присвоєно $a.

### список змін

| Версия | Описание |
| --- | --- |
|  | Об'єднання рядків (`.`) тепер має нижчий пріоритет, ніж арифметичне додавання/віднімання (`+` і `-`) і побитовий зсув вліво/вправо (`<<` і `>>`); раніше він мав той самий пріоритет, що і `+` і `-`, і вищий пріоритет, ніж `<<` і `>>` |
|  | Тернарний оператор (`? :`) тепер неасоціативний; раніше він був ліво-асоціативним. |
|  | Маючи пріоритет конкатенації рядків (`.`) щодо арифметичного складання/віднімання (`+` або `-`) або побитового зсуву вліво/вправо (`<<` або `>>`), тобто. їхнє спільне використання у виразі без дужок не рекомендується. |
|  | Не рекомендується покладатися на ліво-асоціативність тернарного оператора (`? :`), тобто. вкладення кількох тернарних операторів без дужок. |