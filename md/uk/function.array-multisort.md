Сортує кілька масивів або багатовимірні масиви

-   [« array\_merge](function.array-merge.html)
    
-   [array\_pad »](function.array-pad.html)
    
-   [PHP Manual](index.html)
    
-   [Функции для работы с массивами](ref.array.html)
    
-   Сортує кілька масивів або багатовимірні масиви
    

# arraymultisort

(PHP 4, PHP 5, PHP 7, PHP 8)

arraymultisort — Сортує кілька масивів або багатовимірні масиви

### Опис

```methodsynopsis
array_multisort(    array &$array1,    mixed $array1_sort_order = SORT_ASC,    mixed $array1_sort_flags = SORT_REGULAR,    mixed ...$rest): bool
```

Функція **arraymultisort()** може бути використана для сортування відразу декількох масивів або одного багатовимірного масиву відповідно до однієї або кількох розмірів.

Асоціативні (string) ключі будуть збережені, але числові ключі будуть проіндексовані.

> **Зауваження**
> 
> Якщо обидва порівнювані значення еквівалентні, вони зберігають свій початковий порядок. До PHP 8.0.0 їх відносний порядок у відсортованому масиві не було визначено.

> **Зауваження**
> 
> Скидає внутрішній покажчик масиву перший елемент.

### Список параметрів

`array1`

Сортується масив (array).

`array1_sort_order`

Порядок для сортування вищезгаданого аргументу типу array. Або **`SORT_ASC`** для сортування за зростанням, або **`SORT_DESC`** для сортування за спаданням.

Цей аргумент може змінюватися місцями з `array1_sort_flags` чи взагалі бути пропущеним. У цьому випадку мається на увазі значення **`SORT_ASC`**

`array1_sort_flags`

Налаштування сортування для вищезгаданого аргументу array:

Прапор способу сортування:

-   **`SORT_REGULAR`** - Звичайне порівняння елементів (без зміни типів)
-   **`SORT_NUMERIC`** - Порівняння елементів як чисел
-   **`SORT_STRING`** - Порівняння елементів як рядків
-   **`SORT_LOCALE_STRING`** - Порівняння елементів як рядків, враховуючи поточну локаль. Використовується локаль, яку можна міняти за допомогою функції [setlocale()](function.setlocale.html)
-   **`SORT_NATURAL`** - Порівняння елементів як рядків з використанням алгоритму "natural order", як у функції [natsort()](function.natsort.html)
-   **`SORT_FLAG_CASE`** - може бути об'єднаний (бінарне АБО) з **`SORT_STRING`** або **`SORT_NATURAL`** для сортування без урахування регістру

Цей аргумент може змінюватися місцями з `array1_sort_order` чи взагалі бути пропущеним. У цьому випадку мається на увазі значення **`SORT_REGULAR`**

`rest`

Додаткові масиви, які необов'язково йдуть після порядку сортування та прапорів. Порівнюються лише елементи, що відповідають таким же елементам у попередніх масивах. Іншими словами, проводиться сортування у лексикографічному порядку.

### Значення, що повертаються

Повертає **`true`** у разі успішного виконання або **`false`** у разі виникнення помилки.

### Приклади

**Приклад #1 Сортування кількох масивів**

```php
<?php
$ar1 = array(10, 100, 100, 0);
$ar2 = array(1, 3, 2, 4);
array_multisort($ar1, $ar2);

var_dump($ar1);
var_dump($ar2);
?>
```

У наведеному вище прикладі, після того, як буде здійснено сортування, перший масив міститиме 0, 10, 100, 100. Другий - 4, 1, 2, 3. Елементи другого масиву, що відповідають ідентичним елементам першого (100 і 100), також будуть відсортовані.

```
array(4) {
  [0]=> int(0)
  [1]=> int(10)
  [2]=> int(100)
  [3]=> int(100)
}
array(4) {
  [0]=> int(4)
  [1]=> int(1)
  [2]=> int(2)
  [3]=> int(3)
}
```

**Приклад #2 Сортування багатовимірного масиву**

```php
<?php
$ar = array(
       array("10", 11, 100, 100, "a"),
       array(   1,  2, "2",   3,   1)
      );
array_multisort($ar[0], SORT_ASC, SORT_STRING,
                $ar[1], SORT_NUMERIC, SORT_DESC);
var_dump($ar);
?>
```

У наведеному вище прикладі, після сортування, перший масив міститиме "10", 100, 100, 11, "a" (його елементи були відсортовані в зростаючому порядку), а другий масив міститиме 1, 3, "2", 2, 1 (Елементи відсортовані як числа, у порядку спадання).

```
array(2) {
  [0]=> array(5) {
    [0]=> string(2) "10"
    [1]=> int(100)
    [2]=> int(100)
    [3]=> int(11)
    [4]=> string(1) "a"
  }
  [1]=> array(5) {
    [0]=> int(1)
    [1]=> int(3)
    [2]=> string(1) "2"
    [3]=> int(2)
    [4]=> int(1)
  }
}
```

**Приклад #3 Сортування результатів бази даних**

У цьому прикладі кожен елемент масиву data являє собою ряд таблиці. Такий тип даних типовий записів бази даних.

Зразкові дані:

```
# том  | издание
volume | edition
-------+--------
    67 |       2
    86 |       1
    85 |       6
    98 |       2
    86 |       6
    67 |       7
```

Дані представлені як масиву з ім'ям data. Зазвичай їх можна отримати, наприклад, за допомогою циклу функції [mysqli\_fetch\_assoc()](mysqli-result.fetch-assoc.html)

```php
<?php
$data[] = array('volume' => 67, 'edition' => 2);
$data[] = array('volume' => 86, 'edition' => 1);
$data[] = array('volume' => 85, 'edition' => 6);
$data[] = array('volume' => 98, 'edition' => 2);
$data[] = array('volume' => 86, 'edition' => 6);
$data[] = array('volume' => 67, 'edition' => 7);
?>
```

У нашому прикладі ми будемо сортувати за volume у спадному порядку, а за edition - у зростаючому.

У нас є масив рядків, але **arraymultisort()** необхідний масив шпальт, тому спочатку ми використовуємо наступний код для отримання шпальт, а потім виконаємо сортування.

```php
<?php
// Получение списка столбцов
foreach ($data as $key => $row) {
    $volume[$key]  = $row['volume'];
    $edition[$key] = $row['edition'];
}

// Вы можете использовать array_column() вместо вышеуказанного кода
$volume  = array_column($data, 'volume');
$edition = array_column($data, 'edition');

// Сортируем данные по volume по убыванию и по edition по возрастанию
// Добавляем $data в качестве последнего параметра, для сортировки по общему ключу
array_multisort($volume, SORT_DESC, $edition, SORT_ASC, $data);
?>
```

Тепер дані відсортовані і виглядатимуть так:

```
volume | edition
-------+--------
    98 |       2
    86 |       1
    86 |       6
    85 |       6
    67 |       2
    67 |       7
```

**Приклад #4 Сортування без урахування регістру**

Обидві константи **`SORT_STRING`** і **`SORT_REGULAR`** враховують регістр при сортуванні, рядки, що починаються з великої літери, будуть виставлені раніше рядків, що починаються з малої літери.

Для виконання реєстронезалежного сортування, необхідно використовувати копію вихідного масиву приведену до нижнього регістру.

```php
<?php
$array = array('Alpha', 'atomic', 'Beta', 'bank');
$array_lowercase = array_map('strtolower', $array);

array_multisort($array_lowercase, SORT_ASC, SORT_STRING, $array);

print_r($array);
?>
```

Результат виконання цього прикладу:

```
Array
(
    [0] => Alpha
    [1] => atomic
    [2] => bank
    [3] => Beta
)
```

### Дивіться також

-   [usort()](function.usort.html) - Сортує масив за значеннями використовуючи функцію користувача для порівняння елементів
-   [Сравнение функций сортировки массивов](array.sorting.html)