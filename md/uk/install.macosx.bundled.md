Використання вбудованого PHP до macOS Monterey

-   [« Использование пакетов](install.macosx.packages.html)
    
-   [Компилирование PHP на macOS »](install.macosx.compile.html)
    
-   [PHP Manual](index.html)
    
-   [Установка на macOS](install.macosx.html)
    
-   Використання вбудованого PHP до macOS Monterey
    

## Використання вбудованого PHP до macOS Monterey

PHP поставлявся разом з macOS, починаючи з macOS X (10.0.0) до macOS Monterey (12.0.0). Включення PHP у стандартний веб-сервер робиться простим розкоментуванням кількох рядків у конфігураційному файлі Apache httpd.conf у той час як CGI та/або CLI включені за умовчанням (доступні для використання термінальними програмами).

Увімкнення PHP згідно з наведеною нижче інструкцією призначене для швидкого налаштування локального середовища розробки . *Вкрай рекомендується* завжди оновлювати PHP до найновішої стабільної версії. Для будь-якого ПЗ, нові версії випускаються для виправлення помилок і додавання нової функціональності і PHP не є винятком. Читайте відповідну документацію щодо встановлення на macOS, в якій описуються всі подробиці. Наступні інструкції призначені для розробників-початківців і описують стандартну установку, що дозволяє швидко приступити до роботи. Всім користувачам рекомендується скомпілювати або встановити з репозиторію нову версію PHP.

Стандартне встановлення з використанням modphp, який включається для стандартного веб-сервера macOS (за замовчуванням сервер доступний через системні налаштування) включає наступні кроки:

1.  Знайдіть та відкрийте конфігураційний файл Apache. За умовчанням він розташований /private/etc/apache2/httpd.conf Використання `Finder` або `Spotlight` для знаходження файлу може бути не простим, тому що він знаходиться в приватному просторі і належить користувачеві `root`
    
    > **Зауваження**: Один з варіантів, як відкрити цей файл - використовувати консольний редактор, наприклад, `nano`запустити його через термінал. Оскільки файл належить користувачеві `root`, для його відкриття буде потрібно використовувати команду `sudo` (яка підвищує привілеї до користувача `root`). Просто запустіть програму `Terminal`, введіть команду `sudo nano /private/etc/apache2/httpd.conf` і, коли буде запрошено пароль, введіть його. Корисні команди nano: `^w` (Шукати), `^o` (зберегти) та `^x` (закрити), де `^` – це клавіша Ctrl.
    
    > **Зауваження**: Версії macOS до 10.5 містять застарілі версії PHP та Apache У цьому випадку конфігураційний файл може розташовуватися /etc/httpd/httpd.conf.
    
2.  У текстовому редакторі знайдіть наступні рядки і розкоментуйте їх вилучивши символ # з початку рядка (ці рядки зазвичай знаходяться в різних місцях файлу):
    
    ```
    # LoadModule php5_module libexec/httpd/libphp5.so
    
    # AddModule mod_php5.c
    ```
    
    Запам'ятайте шлях до файлу, тому що при збиранні PHP в майбутньому може знадобитися змінити ці рядки.
    
3.  Переконайтеся, що вибрані модулі будуть оброблятися як PHP-файли (.php .html і .inc).
    
    Оскільки наступні вирази вже містяться в httpd.conf (станом на Mac Panther), одного разу увімкнувши PHP, файли .php будуть автоматично оброблятися ним.
    
    ```
    <IfModule mod_php5.c>
        # Если PHP разрешён, он будет обрабатывать файлы .php и .phps.
        AddType application/x-httpd-php .php
        AddType application/x-httpd-php-source .phps
    
        # Часто требуется, чтобы  index.php рассматривался как
        # страница по умолчанию, если она прямо не указана.
        # Сделать это можно следующим образом
        <IfModule mod_dir.c>
            DirectoryIndex index.html index.php
        </IfModule>
    </IfModule>
    ```
    
    > **Зауваження**
    > 
    > До macOS 10.5 (Leopard), до складу ОС був включений PHP 4, а не PHP 5. У такому випадку в інструкціях вище просто поміняйте 5 на 4.
    
4.  Переконайтеся, що DirectoryIndex завантажує індексний файл за замовчуванням. Ця поведінка задається в httpd.conf. Зазвичай використовуються index.php та index.html. За замовчуванням index.php дозволено. Якщо потрібно, то вимкніть.
    
5.  Визначте місце розташування php.ini або використовуйте налаштування за замовчуванням Зазвичай на macOS він розташований на шляху /usr/local/php/php.ini та виклик [phpinfo()](function.phpinfo.html) виведе відповідну інформацію. Якщо php.ini не використовується, PHP використовуватиме значення за замовчуванням. Також зверніть увагу на FAQ [поиск php.ini](faq.installation.html#faq.installation.phpini)
    
6.  Як знайти або встановити `DocumentRoot` DocumentRoot – це коренева директорія веб-сервера, в якій лежать скрипти сайту. Зазвичай шлях за замовчуванням він дорівнює /Library/WebServer/Documents, але його можна змінити на будь-який інший в httpd.conf. Також, для індивідуальних користувачів, DocumentRoot може бути встановлений як /Users/yourusername/Sites
    
7.  Створення файлу з [phpinfo()](function.phpinfo.html)
    
    Функція [phpinfo()](function.phpinfo.html) відображає інформацію про PHP. Створіть у DocumentRoot скрипт з таким кодом:
    
    ```php
    <?php phpinfo(); ?>
    ```
    
8.  Перезапустіть Apache і запитайте через браузер створений файл.
    
    Для перезапуску виконайте `sudo apachectl graceful` у терміналі або виконайте stop/start для "Personal Web Server" у системних налаштуваннях macOS. За промовчанням локальні файли можна завантажити, ввівши в рядок браузера URL, наприклад: [http://localhost/info.php](http://localhost/info.php), або використовуючи DocumentRoot в локальній директорії користувача, таким чином: [http://localhost/~yourusername/info.php](http://localhost/~yourusername/info.php)
    

CLI (або більш старих версіях CGI) називається як php і міститься в /usr/bin/php. Відкрийте термінал, прочитайте розділ документації PHP [командная строка](features.commandline.html), і запустіть `php -v` для перевірки встановленої версії PHP. Виклик функції [phpinfo()](function.phpinfo.html) також покаже цю інформацію.