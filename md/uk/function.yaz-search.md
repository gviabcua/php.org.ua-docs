---
navigation:
  - function.yaz-schema.md: « yazschema
  - function.yaz-set-option.md: yazsetoption »
  - index.md: PHP Manual
  - ref.yaz.md: Функции YAZ
title: yazsearch
---
# yazsearch

(PHP 4> = 4.0.1, PECL yaz> = 0.9.0)

yazsearch — Підготовка пошуку

### Опис

```methodsynopsis
yaz_search(resource $id, string $type, string $query): bool
```

**yazsearch()** готує пошук на заданому з'єднанні.

Так само як і [yazconnect()](function.yaz-connect.md) ця функція не блокує і лише готує умови пошуку, який буде виконаний функцією [yazwait()](function.yaz-wait.md)

### Список параметрів

`id`

Дескриптор з'єднання, що повертається функцією [yazconnect()](function.yaz-connect.md)

`type`

Цей параметр є типом запиту. Підтримується лише тип `"rpn"`. У цьому випадку третій аргумент визначає запит Type-1 у префіксній нотації запитів.

`query`

Запит RPN є текстовим поданням запиту Type-1, як зазначено у стандарті Z39.50. Проте у текстовому уявленні, використовуваному YAZ, застосовується префиксная нотація, тобто. оператор передує операнду. Рядок запиту є послідовністю лексем(токенів), в якій ігноруються пробільні символи, крім тих, що знаходяться між подвійними лапками. Лексеми, які починаються із символу `@` є операторами, інакше вони сприймаються як пошуковий термін.

**Оператори RPN**

| Конструкция | Описание |
| --- | --- |
| `@and` query1 query2 | перетин query1 і query2 |
| `@or` query1 query2 | об'єднання query1 та query2 |
| `@not` query1 query2 | query1 і не query2 |
| `@set` name | посилання на набір значень, що повертаються |
| `@attrset` set query | визначає набір атрибутів `set` для запиту `query`. Ця конструкція доступна лише один раз – на самому початку запиту. |
| `@attr` set type=value query | встановлює атрибути запиту. Значення `type` і `value` - Цілочисленні та визначають тип атрибуту та тип значення відповідно. Значення `set`, якщо його встановлено, визначає налаштування атрибутів. |

Всю інформацію про доступні атрибути ви можете знайти на сайті [» Z39.50 Maintenance Agency](http://www.loc.gov/z3950/agency/defns/bib1.md)

> **Зауваження**
> 
> Якщо ви хочете використовувати більш дружню нотацію, використовуйте CCL парсер - функції [yazcclconf()](function.yaz-ccl-conf.md) і [yazcclparse()](function.yaz-ccl-parse.md)

### Значення, що повертаються

Повертає **`true`** у разі успішного виконання або **`false`** у разі виникнення помилки.

### Приклади

**Приклад #1 Приклади запитів**

Ви можете використовувати прості терми, наприклад:

computer

які знаходять збіги слова "computer" у документах. Атрибутів не визначено.

запит

"knuth donald"

знаходить документи, де є фраза "knuth donald" (передбачається, що сервер підтримує пошук за фразами).

Запит містить два атрибути для однієї фрази.

@attr 1=1003 @attr 4=1 "knuth donald"

Перший атрибут має тип 1 (використовується Bib-1), значення якого дорівнює 1003 (Автор). Другий атрибут має тип 4 (структура) зі значенням 1 (фраза). Таким чином, цей запит буде шукати документи автор яких Donald Knuth.

запит

@and @or a b @not @or c d e

в інфіксній нотації представляється як `(a или b) и ((c или d) и не e)`

ще один складніший запит:

```
@attrset gils @and @attr 1=4 art @attr 1=2000 company
```

Весь запит використовуватиме набір атрибутів GILS. Запит шукає документи, де `art` зустрічається в назві (GILS, BIB-1) та `company` у постачальниках.
