---
navigation:
  - function.imap-num-recent.md: « imap\_num\_recent
  - function.imap-ping.md: imap\_ping »
  - index.md: PHP Manual
  - ref.imap.md: Функції IMAP
title: imap\_open
origin_hash: ddf652f5224dc9f1fa9671347921941ca401ea50
---
# imap\_open

(PHP 4, PHP 5, PHP 7, PHP 8)

imap\_open — Відкриває потік IMAP до поштової скриньки

### Опис

```methodsynopsis
imap_open(    string $mailbox,    string $user,    string $password,    int $flags = 0,    int $retries = 0,    array $options = []): IMAP\Connection|false
```

Відкриває потік IMAP до `mailbox`

Ця функція також може використовуватися для відкриття потоку до серверів POP3 та NNTP, але частина функцій та особливостей працюватиме лише з серверами IMAP.

### Список параметрів

`mailbox`

Ім'я поштової скриньки складається з сервера та шляху до поштової скриньки на ньому. Спеціальне ім'я `INBOX` використовується для поштової скриньки поточного користувача. Імена поштових скриньок, що містять міжнародні символи, крім вхідних у друкований простір ASCII, повинні бути закодовані за допомогою [imap\_utf7\_encode()](function.imap-utf7-encode.md)

**Увага**

Якщо [imap.enable\_insecure\_rsh](imap.configuration.md#ini.imap.enable-insecure-rsh) не вимкнено, то передача в цей параметр не перевірених даних *не безпечна*

Серверна частина, укладена у фігурні дужки '{' і '}', складається з імені або IP-адреси сервера, опціонального порту (попереднього двокрапкою) та опціональних специфікацій протоколу (попередніх слешем '/').

Серверна частина є обов'язковою у всіх параметрах поштової скриньки.

Всі імена, що починаються з `{` є віддаленими іменами і мають такий синтаксис `"{" remote_system_name [":" port] [flags] "}" [mailbox_name]`где:

-   `remote_system_name`\- Повне доменне ім'я сервера, або IP-адресу у квадратних дужках.
-   `port`\- Необов'язковий параметр. Визначає порт сервера
-   `flags`\- опціональні прапори, дивись таблицю нижче
-   `mailbox_name`\- Ім'я поштової скриньки. За замовчуванням INBOX

**Опціональні прапори**

| Флаг | Опис |
| --- | --- |
| `/service=`*service* | сервіс доступу до поштової скриньки. За замовчуванням "imap" |
| `/user=`*user* | ім'я користувача для входу на сервер |
| `/authuser=`*user* | віддалений користувач для автентифікації; якщо вказано, то це буде той користувач, пароль якого використовується (наприклад administrator) |
| `/anonymous` | віддалений доступ під анонімним користувачем |
| `/debug` | записувати телеметрію протоколу до спеціального лог-файлу програми |
| `/secure` | не передавати пароль через мережу у вигляді зашифрованого тексту |
| `/imap` `/imap2` `/imap2bis` `/imap4` `/imap4rev1` | еквівалентно `/service=imap` |
| `/pop3` | еквівалентно `/service=pop3` |
| `/nntp` | еквівалентно `/service=nntp` |
| `/norsh` | не використовувати rsh або ssh для встановлення переавторизованої сесії IMAP |
| `/ssl` | використовувати `SSL` для шифрування сесії |
| `/validate-cert` | перевіряти сертифікати серверів TLS/SSL (поведінка за замовчуванням) |
| `/novalidate-cert` | не перевіряти сертифікати від серверів TLS/SSL. корисно для серверів із самопідписаним сертифікатом |
| `/tls` | примусово використовувати `start-TLS` для шифрування сесії та відкидати з'єднання з серверами, що його не підтримують |
| `/notls` | не застосовувати `start-TLS` для шифрування сесії, навіть якщо сервер його підтримує |
| `/readonly` | запит відкриття в режимі "тільки читання" (тільки IMAP; ігнорується для NNTP та видає помилку для SMTP та POP3) |

`user`

Ім'я користувача

`password`

Пароль користувача `user`

`flags`

`flags` - бітова маска з однієї або кількох констант:

-   \*\*`OP_READONLY`\*\*- відкрити поштову скриньку лише для читання
-   \*\*`OP_ANONYMOUS`\*\*- не використовувати та не оновлювати .newsrc для новин (тільки NNTP)
-   \*\*`OP_HALFOPEN`\*\*- відкрити з'єднання, але не підключатися до поштової скриньки ім'я IMAP і NNTP.
-   \*\*`CL_EXPUNGE`\*\*- автоматично видаляти всі позначені для видалення повідомлення під час закриття поштової скриньки (див.[imap\_delete()](function.imap-delete.md) і [imap\_expunge()](function.imap-expunge.md)) .
-   \*\*`OP_DEBUG`\*\*- домовленості щодо протоколу налагодження
-   \*\*`OP_SHORTCACHE`\*\*- коротке кешування (тільки`elt`) .
-   \*\*`OP_SILENT`\*\*- не передавати події (внутрішнє використання)
-   \*\*`OP_PROTOTYPE`\*\*- Повернути прототип драйвера
-   \*\*`OP_SECURE`\*\*- не здійснювати безпечну автентифікацію

`retries`

Максимальна кількість спроб з'єднання

`options`

Параметри для з'єднання. Для встановлення одного або декількох параметрів з'єднання можна використовувати такі (рядки) ключі:

-   `DISABLE_AUTHENTICATOR`\- забороняє властивості автентифікації

### Значення, що повертаються

У разі успішного виконання повертає екземпляр [IMAP\\Connection](class.imap-connection.md)или\*\*`false`\*\*в случае возникновения ошибки.

### список змін

| Версия | Опис |
| --- | --- |
| 8.1.0 | Повертає екземпляр [IMAP\\Connection](class.imap-connection.md); раніше повертався ресурс ([resource](language.types.resource.md) |

### Приклади

**Приклад #1 Різні способи використання **imap\_open()****

```php
<?php
// Для подключения к серверу IMAP, работающему на порту 143 на локальной машине, сделать следующее:
$mbox = imap_open("{localhost:143}INBOX", "user_id", "password");

// Для подключения к серверу POP3, работающему на порту 110 на локальной машине, использовать:
$mbox = imap_open ("{localhost:110/pop3}INBOX", "user_id", "password");

// Для подключения к серверу SSL IMAP или POP3, добавить /ssl после протокола
// specification:
$mbox = imap_open ("{localhost:993/imap/ssl}INBOX", "user_id", "password");

// Для подключения к серверу SSL IMAP или POP3 с самоподписанным сертификатом,
// добавить /ssl/novalidate-cert после спецификации протокола:
$mbox = imap_open ("{localhost:995/pop3/ssl/novalidate-cert}", "user_id", "password");

// Для подключения к серверу NNTP, работающему на порту 119 на локальной машине, использовать:
$nntp = imap_open ("{localhost:119/nntp}comp.test", "", "");
// Для подключения к удалённому серверу, заменить "localhost" на имя или
// IP-адрес сервера, к которому вы хотите подключиться.
?>
```

**Приклад #2 Приклад використання** imap\_open()\*\*\*\*

```php
<?php
$mbox = imap_open("{imap.example.org:143}", "username", "password");

echo "<h1>Почтовые ящики</h1>\n";
$folders = imap_listmailbox($mbox, "{imap.example.org:143}", "*");

if ($folders == false) {
    echo "Неудачный вызов<br />\n";
} else {
    foreach ($folders as $val) {
        echo $val . "<br />\n";
    }
}

echo "<h1>Заголовки в INBOX</h1>\n";
$headers = imap_headers($mbox);

if ($headers == false) {
    echo "Неудачный вызов<br />\n";
} else {
    foreach ($headers as $val) {
        echo $val . "<br />\n";
    }
}

imap_close($mbox);
?>
```

### Дивіться також

-   [imap\_close()](function.imap-close.md) \- Закриває потік IMAP
